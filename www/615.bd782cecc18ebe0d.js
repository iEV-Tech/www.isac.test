"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[615],{1038:(A,F,c)=>{c.d(F,{v:()=>o});var g=c(467),b=c(5972);const o=function(){var R=(0,g.A)(function*(t){t.params=t.params||{};var p=[];t.params.subFolder&&(t.params.subFolder=t.params.subFolder.replace(/[^a-zA-Z0-9\/]/gm,"").replace(/\/+/gm,"/").replace(/^\//,"").replace(/\/$/,""),t.params.subFolder&&p.push(t.params.subFolder)),t.params.isconvertvideo=!!t.params.isconvertvideo,t.params.isconvertpdf2image=!!t.params.isconvertpdf2image,t.params.isconvertoffice2image=!!t.params.isconvertoffice2image,t.params.isresizeimage=!!t.params.isresizeimage;const n=new FormData;n.append("path",p.join("/")),n.append("types",t.params.fileType||null),n.append("file",t.params.file||null),n.append("base64",t.params.base64||!1),n.append("isconvertvideo",t.params.isconvertvideo),n.append("isconvertpdf2image",t.params.isconvertpdf2image),n.append("isconvertoffice2image",t.params.isconvertoffice2image),n.append("isresizeimage",t.params.isresizeimage),(0,b.ZD)({url:"files",formData:n,success:e=>{"function"==typeof t.callback&&t.callback(e||null)},error:e=>{"function"==typeof t.callback&&t.callback(),console.error(t,e)},loading:t.loading})});return function(p){return R.apply(this,arguments)}}()},9946:(A,F,c)=>{c.d(F,{ks:()=>R,sh:()=>t,z:()=>o});var g=c(467),b=c(5972);const o=function(){var p=(0,g.A)(function*(n){n.params=n.params||{},(0,b.hm)({url:"api/User/get-user",params:{},success:e=>{"function"==typeof n.callback&&n.callback(e.data||null)},error:e=>{var f;"function"==typeof n.callback&&n.callback(null==e||null===(f=e.response)||void 0===f?void 0:f.data),console.error(e)},loading:n.loading})});return function(e){return p.apply(this,arguments)}}(),R=function(){var p=(0,g.A)(function*(n){var e,f,v,_,M,T;n.params=n.params||{},(0,b.IH)({url:"api/User/update-user",params:{UserId:null!==(e=n.params.UserId)&&void 0!==e?e:null,FullName:null!==(f=n.params.FullName)&&void 0!==f?f:null,Address:null!==(v=n.params.Address)&&void 0!==v?v:null,Gender:null!==(_=n.params.Gender)&&void 0!==_?_:null,Birthday:null!==(M=n.params.Birthday)&&void 0!==M?M:null,PersonEmail:null!==(T=n.params.Email)&&void 0!==T?T:null},success:U=>{"function"==typeof n.callback&&n.callback(U.data||null)},error:U=>{var C;"function"==typeof n.callback&&n.callback(null==U||null===(C=U.response)||void 0===C?void 0:C.data),console.error(U)},loading:n.loading})});return function(e){return p.apply(this,arguments)}}(),t=function(){var p=(0,g.A)(function*(n){var e,f;n.params=n.params||{},(0,b.IH)({url:"api/User/update-avatar",params:{UserId:null!==(e=n.params.UserId)&&void 0!==e?e:null,Avatar:null!==(f=n.params.Avatar)&&void 0!==f?f:null},success:v=>{"function"==typeof n.callback&&n.callback(v.data||null)},error:v=>{var _;"function"==typeof n.callback&&n.callback(null==v||null===(_=v.response)||void 0===_?void 0:_.data),console.error(v)},loading:n.loading})});return function(e){return p.apply(this,arguments)}}()},615:(A,F,c)=>{c.r(F),c.d(F,{UserInfoPageModule:()=>x});var g=c(177),b=c(9417),o=c(7896),R=c(7625),t=c(467),p=c(9946),n=c(8344),e=c(4438),f=c(4842);function v(i,m){if(1&i){const s=e.RV6();e.qex(0),e.j41(1,"ion-content")(2,"div",4)(3,"ion-list",5)(4,"div",6)(5,"label"),e.EFF(6),e.nI1(7,"translate"),e.j41(8,"span",7),e.EFF(9,"*"),e.k0s()(),e.j41(10,"div",8)(11,"ion-item")(12,"ion-input",9),e.nI1(13,"translate"),e.bIt("ionChange",function(a){e.eBV(s);const l=e.XpG();return e.Njj(l.changeFullName(a))}),e.k0s()()()(),e.j41(14,"div",6)(15,"label"),e.EFF(16),e.nI1(17,"translate"),e.k0s(),e.j41(18,"div",8)(19,"ion-item")(20,"ion-input",10),e.nI1(21,"translate"),e.bIt("ionChange",function(a){e.eBV(s);const l=e.XpG();return e.Njj(l.changeEmail(a))}),e.k0s()()()(),e.j41(22,"div",6)(23,"label"),e.EFF(24),e.nI1(25,"translate"),e.k0s(),e.j41(26,"div",8)(27,"ion-item")(28,"ion-textarea",11),e.nI1(29,"translate"),e.bIt("ionChange",function(a){e.eBV(s);const l=e.XpG();return e.Njj(l.changeAddress(a))}),e.k0s()()()()()()(),e.j41(30,"ion-footer")(31,"div",12)(32,"ion-button",13),e.bIt("click",function(a){e.eBV(s);const l=e.XpG();return e.Njj(l.submit(a))}),e.j41(33,"ion-label"),e.EFF(34),e.nI1(35,"translate"),e.k0s()()()(),e.bVm()}if(2&i){const s=e.XpG();e.R7$(6),e.SpI("",e.bMT(7,11,"FullName")," "),e.R7$(6),e.FS9("placeholder",e.bMT(13,13,"FullName")),e.Y8G("value",s.user.FullName),e.R7$(4),e.JRh(e.bMT(17,15,"Email")),e.R7$(4),e.FS9("placeholder",e.bMT(21,17,"Email")),e.Y8G("value",null==s.user.Person?null:s.user.Person.Email),e.R7$(4),e.JRh(e.bMT(25,19,"Address")),e.R7$(4),e.FS9("placeholder",e.bMT(29,21,"Address")),e.Y8G("autoGrow",!0)("value",s.user.Address),e.R7$(6),e.JRh(e.bMT(35,23,"Complete"))}}let _=(()=>{var i;class m{constructor(r,a,l){var d=this;this.modalController=r,this.toastController=a,this.loadingController=l,this.user={},(0,t.A)(function*(){d.loading=yield d.loadingController.create({message:""})})()}ngOnInit(){(0,p.z)({loading:r=>{var a,l;r?null===(a=this.loading)||void 0===a||a.present():null===(l=this.loading)||void 0===l||l.dismiss()},callback:r=>{var a;this.response=r,null!=r&&r.Succeeded?this.user=null!==(a=r.Data)&&void 0!==a?a:{}:(0,n.cX)(this.toastController,{},r).then(l=>l.present())}})}close(r){var a=this;return(0,t.A)(function*(){a.modalController.dismiss(null,"cancel")})()}submit(r){var a=this;return(0,t.A)(function*(){(0,p.ks)({loading:l=>{var d,u;l?null===(d=a.loading)||void 0===d||d.present():null===(u=a.loading)||void 0===u||u.dismiss()},params:a.user,callback:l=>{a.response=l,null!=l&&l.Succeeded?a.modalController.dismiss(null,"success"):(0,n.cX)(a.toastController,{},l).then(d=>d.present())}})})()}changeFullName(r){var a=this;return(0,t.A)(function*(){a.user.FullName=r.detail.value})()}changeEmail(r){var a=this;return(0,t.A)(function*(){a.user.Email=r.detail.value})()}changeAddress(r){var a=this;return(0,t.A)(function*(){a.user.Address=r.detail.value})()}}return(i=m).\u0275fac=function(r){return new(r||i)(e.rXU(o.W3),e.rXU(o.K_),e.rXU(o.Xi))},i.\u0275cmp=e.VBU({type:i,selectors:[["app-modal-update-user"]],decls:9,vars:4,consts:[["slot","start"],[3,"click"],["src","../../../assets/icon/ion-icon/arrow-left.svg"],[4,"ngIf"],[1,"card-info","bg-white","container","py-3","min-h-100"],["lines","none"],[1,"form-group"],[1,"text-danger"],[1,"ion-item-input"],[3,"ionChange","placeholder","value"],["type","email",3,"ionChange","placeholder","value"],[3,"ionChange","autoGrow","placeholder","value"],[1,"container","py-3"],["color","primary","expand","block","shape","round",3,"click"]],template:function(r,a){1&r&&(e.j41(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",0)(3,"ion-button",1),e.bIt("click",function(d){return a.close(d)}),e.nrm(4,"ion-icon",2),e.k0s()(),e.j41(5,"ion-title"),e.EFF(6),e.nI1(7,"translate"),e.k0s()()(),e.DNE(8,v,36,25,"ng-container",3)),2&r&&(e.R7$(6),e.JRh(e.bMT(7,2,"UpdateInfo")),e.R7$(2),e.Y8G("ngIf",null==a.response?null:a.response.Succeeded))},dependencies:[g.bT,o.Jm,o.QW,o.W9,o.M0,o.eU,o.iq,o.$w,o.uz,o.he,o.nf,o.nc,o.BC,o.ai,o.Gw,f.D9],styles:[".card-info[_ngcontent-%COMP%]{border-top-left-radius:1.5rem;border-top-right-radius:1.5rem}"]}),m})();var M=c(5312),T=c(1038),U=c(6539),C=c(8517),P=c(8833);function y(i,m){1&i&&(e.j41(0,"div",7),e.nrm(1,"ion-spinner",8),e.k0s())}function $(i,m){if(1&i&&(e.j41(0,"div",9)(1,"div",10)(2,"small",11),e.EFF(3),e.nI1(4,"translate"),e.k0s(),e.j41(5,"p",12)(6,"b"),e.EFF(7),e.nI1(8,"translate"),e.k0s()()(),e.j41(9,"div",10)(10,"small",11),e.EFF(11),e.nI1(12,"translate"),e.k0s(),e.j41(13,"p",12)(14,"b"),e.EFF(15),e.nI1(16,"translate"),e.k0s()()(),e.j41(17,"div",10)(18,"small",11),e.EFF(19),e.nI1(20,"translate"),e.k0s(),e.j41(21,"p",12)(22,"b"),e.EFF(23),e.nI1(24,"translate"),e.k0s()()(),e.j41(25,"div",10)(26,"small",11),e.EFF(27),e.nI1(28,"translate"),e.k0s(),e.j41(29,"p",12)(30,"b"),e.EFF(31),e.nI1(32,"translate"),e.k0s()()()()),2&i){const s=e.XpG();e.R7$(3),e.JRh(e.bMT(4,8,"FullName")),e.R7$(4),e.JRh(s.user.FullName||e.bMT(8,10,"NotUpdate")),e.R7$(4),e.JRh(e.bMT(12,12,"Mobile")),e.R7$(4),e.JRh(s.APP_FUNC_FormatMobileNumber(s.user.PhoneNumber)||e.bMT(16,14,"NotUpdate")),e.R7$(4),e.JRh(e.bMT(20,16,"Email")),e.R7$(4),e.JRh((null==s.user.Person?null:s.user.Person.Email)||e.bMT(24,18,"NotUpdate")),e.R7$(4),e.JRh(e.bMT(28,20,"Address")),e.R7$(4),e.JRh(s.user.Address||e.bMT(32,22,"NotUpdate"))}}function j(i,m){if(1&i){const s=e.RV6();e.j41(0,"ion-footer")(1,"div",13)(2,"ion-button",14),e.bIt("click",function(a){e.eBV(s);const l=e.XpG();return e.Njj(l.presentModalUpdateUser(a))}),e.j41(3,"ion-label"),e.EFF(4),e.nI1(5,"translate"),e.k0s()()()()}2&i&&(e.R7$(4),e.JRh(e.bMT(5,1,"Update")))}const G=[{path:"",component:(()=>{var i;class m{constructor(r,a,l){var d=this;this.modalController=r,this.toastController=a,this.loadingController=l,this.APP_ROUTE=P._,this.api_url=M.c.api_url,this.APP_FUNC_FormatMobileNumber=C.IV,(0,t.A)(function*(){d.loading=yield d.loadingController.create({message:""})})()}ngOnInit(){var r=this;(0,t.A)(function*(){(yield(0,U.kU)())&&r.refreshData()})()}onIonRefresher(r){this.refreshData(()=>{r.target.complete()})}refreshData(r){var a=this;return(0,t.A)(function*(){(0,p.z)({loading:l=>{var d,u;l?null===(d=a.loading)||void 0===d||d.present():null===(u=a.loading)||void 0===u||u.dismiss()},callback:l=>{var d;a.response=l,null!=l&&l.Succeeded?a.user=null!==(d=l.Data)&&void 0!==d?d:{}:(0,n.cX)(a.toastController,{},l).then(u=>u.present()),r&&r()}})})()}presentModalUpdateUser(r){var a=this;return(0,t.A)(function*(){let l=yield a.modalController.create({component:_});l.onDidDismiss().then(d=>{"success"==d.role&&a.refreshData()}),l.present()})()}changeAvatar(r){var a=this;return(0,t.A)(function*(){yield a.loadingController.create({spinner:"dots",message:"\u0110ang x\u1eed l\xfd t\u1eadp tin ...",animated:!1}),(0,C.oG)({accept:"image/*"},d=>{(0,T.v)({loading:u=>{var I,h;u?null===(I=a.loading)||void 0===I||I.present():null===(h=a.loading)||void 0===h||h.dismiss()},params:{file:d[0],subFolder:"avatar",fileType:"image"},callback:u=>{var I;0==(null==u?void 0:u.ReturnCode)&&(0,p.sh)({loading:h=>{var E,k;h?null===(E=a.loading)||void 0===E||E.present():null===(k=a.loading)||void 0===k||k.dismiss()},params:{UserId:null===(I=a.user)||void 0===I?void 0:I.UserId,Avatar:`${u.path}/${u.file.name}`},callback:h=>{null!=h&&h.Succeeded?a.refreshData():(0,n.cX)(a.toastController,{},h).then(E=>E.present())}})}})})})()}}return(i=m).\u0275fac=function(r){return new(r||i)(e.rXU(o.W3),e.rXU(o.K_),e.rXU(o.Xi))},i.\u0275cmp=e.VBU({type:i,selectors:[["app-user-info"]],decls:13,vars:7,consts:[["mode","ios"],["slot","start"],["icon","../../../assets/icon/ion-icon/arrow-left.svg","text","",3,"defaultHref"],["slot","fixed",3,"ionRefresh"],["class","container-loading",4,"ngIf"],["class","card-info bg-white container py-3 min-h-100",4,"ngIf"],[4,"ngIf"],[1,"container-loading"],["name","circular","color","primary"],[1,"card-info","bg-white","container","py-3","min-h-100"],[1,"mb-3"],[1,"text-muted"],[1,"mt-1","mb-0"],[1,"container","py-3"],["expand","block","shape","round",3,"click"]],template:function(r,a){1&r&&(e.j41(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-buttons",1),e.nrm(3,"ion-back-button",2),e.k0s(),e.j41(4,"ion-title"),e.EFF(5),e.nI1(6,"translate"),e.k0s()()(),e.j41(7,"ion-content")(8,"ion-refresher",3),e.bIt("ionRefresh",function(d){return a.onIonRefresher(d)}),e.nrm(9,"ion-refresher-content"),e.k0s(),e.DNE(10,y,2,0,"div",4)(11,$,33,24,"div",5),e.k0s(),e.DNE(12,j,6,3,"ion-footer",6)),2&r&&(e.R7$(3),e.Y8G("defaultHref",a.APP_ROUTE.TABS_USER),e.R7$(2),e.JRh(e.bMT(6,5,"UserInfo")),e.R7$(5),e.Y8G("ngIf",!a.response),e.R7$(),e.Y8G("ngIf",a.user),e.R7$(),e.Y8G("ngIf",null==a.user?null:a.user.UserId))},dependencies:[g.bT,o.Jm,o.QW,o.W9,o.M0,o.eU,o.he,o.To,o.Ki,o.w2,o.BC,o.ai,o.el,f.D9],styles:[".card-info[_ngcontent-%COMP%]{border-top-left-radius:1.5rem;border-top-right-radius:1.5rem}"]}),m})()}];let N=(()=>{var i;class m{}return(i=m).\u0275fac=function(r){return new(r||i)},i.\u0275mod=e.$C({type:i}),i.\u0275inj=e.G2t({imports:[R.iI.forChild(G),R.iI]}),m})();var D=c(3890);let x=(()=>{var i;class m{}return(i=m).\u0275fac=function(r){return new(r||i)},i.\u0275mod=e.$C({type:i}),i.\u0275inj=e.G2t({imports:[g.MD,b.YN,o.bv,N,D.x]}),m})()}}]);
"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[4687],{5454:(B,I,s)=>{s.d(I,{K5:()=>j,X1:()=>u,fy:()=>S,nY:()=>q});var b=s(467),y=s(5972);const u=function(){var _=(0,b.A)(function*(t){var d,m,o,g,f,R,e,M,F,D,k;t.params=t.params||{},(0,y.Ll)({url:"api/RequestService/create",params:{ServiceId:null!==(d=t.params.ServiceId)&&void 0!==d?d:null,ChargePackageId:null!==(m=t.params.ChargePackageId)&&void 0!==m?m:null,RequestAddress:null!==(o=t.params.RequestAddress)&&void 0!==o?o:null,RequestLat:null!==(g=t.params.RequestLat)&&void 0!==g?g:null,RequestLong:null!==(f=t.params.RequestLong)&&void 0!==f?f:null,DestAddress:null!==(R=t.params.DestAddress)&&void 0!==R?R:null,DestLat:null!==(e=t.params.DestLat)&&void 0!==e?e:null,DestLong:null!==(M=t.params.DestLong)&&void 0!==M?M:null,ExecutionDateAsString:null!==(F=t.params.ExecutionDate)&&void 0!==F?F:null,ExecutionTimeAsString:null!==(D=t.params.ExecutionTime)&&void 0!==D?D:null,Notes:null!==(k=t.params.Notes)&&void 0!==k?k:null},success:E=>{"function"==typeof t.callback&&t.callback(E.data||null)},error:E=>{var x;"function"==typeof t.callback&&t.callback(null==E||null===(x=E.response)||void 0===x?void 0:x.data),console.error(E)},loading:t.loading,loadingController:t.loadingController})});return function(d){return _.apply(this,arguments)}}(),q=function(){var _=(0,b.A)(function*(t){var d,m;t.params=t.params||{},(0,y.Ll)({url:"api/RequestService/cancel",params:{RequestServiceId:null!==(d=t.params.RequestServiceId)&&void 0!==d?d:null,CancelReason:null!==(m=t.params.CancelReason)&&void 0!==m?m:null},success:o=>{"function"==typeof t.callback&&t.callback(o.data||null)},error:o=>{var g;"function"==typeof t.callback&&t.callback(null==o||null===(g=o.response)||void 0===g?void 0:g.data),console.error(o)},loading:t.loading,loadingController:t.loadingController})});return function(d){return _.apply(this,arguments)}}(),S=function(){var _=(0,b.A)(function*(t){var d,m,o,g;t.params=t.params||{},(0,y.hm)({url:"api/RequestService/get-myhistory",params:{VRequestStatus:null!==(d=t.params.VRequestStatus)&&void 0!==d?d:null,VRequestStatusMulti:null!==(m=t.params.VRequestStatusMulti)&&void 0!==m?m:null,PageNumber:null!==(o=t.params.PageNumber)&&void 0!==o?o:1,PageSize:null!==(g=t.params.PageSize)&&void 0!==g?g:10},success:f=>{"function"==typeof t.callback&&t.callback(f.data||null)},error:f=>{var R;"function"==typeof t.callback&&t.callback(null==f||null===(R=f.response)||void 0===R?void 0:R.data),console.error(f)},loading:t.loading,loadingController:t.loadingController})});return function(d){return _.apply(this,arguments)}}(),j=function(){var _=(0,b.A)(function*(t){var d;t.params=t.params||{},(0,y.hm)({url:`api/RequestService/get-detail/${t.params.RequestServiceId}`,params:{RequestServiceId:null!==(d=t.params.RequestServiceId)&&void 0!==d?d:null},success:m=>{"function"==typeof t.callback&&t.callback(m.data||null)},error:m=>{var o;"function"==typeof t.callback&&t.callback(null==m||null===(o=m.response)||void 0===o?void 0:o.data),console.error(m)},loading:t.loading,loadingController:t.loadingController})});return function(d){return _.apply(this,arguments)}}()},4687:(B,I,s)=>{s.r(I),s.d(I,{RequestServiceDetailPageModule:()=>z});var b=s(177),y=s(9417),u=s(9465),q=s(7625),S=s(467),j=s(7762),_=s(5312),t=s(3801),d=s(5454),m=s(6539),o=s(8517),g=s(8650),f=s(3588),R=s(8833),e=s(4438),M=s(4842);const F=()=>({}),D=r=>({$implicit:r});function k(r,p){if(1&r){const c=e.RV6();e.j41(0,"div",39),e.nrm(1,"ion-spinner",40),e.j41(2,"ion-label",41),e.EFF(3,"\u0110ang t\xecm nh\xe2n vi\xean ti\u1ebfp nh\u1eadn d\u1ecbch v\u1ee5 ..."),e.k0s()(),e.j41(4,"ion-button",42),e.bIt("click",function(){e.eBV(c);const a=e.XpG(2);return e.Njj(a.cancelService())}),e.j41(5,"ion-label"),e.EFF(6,"H\u1ee7y d\u1ecbch v\u1ee5"),e.k0s()()}}function E(r,p){if(1&r){const c=e.RV6();e.j41(0,"div",39),e.nrm(1,"ion-icon",43),e.j41(2,"ion-label",44),e.EFF(3,"Nh\xe2n vi\xean \u0111\xe3 nh\u1eadn d\u1ecbch v\u1ee5."),e.k0s()(),e.j41(4,"ion-button",42),e.bIt("click",function(){e.eBV(c);const a=e.XpG(2);return e.Njj(a.cancelService())}),e.j41(5,"ion-label"),e.EFF(6,"H\u1ee7y d\u1ecbch v\u1ee5"),e.k0s()()}}function x(r,p){if(1&r){const c=e.RV6();e.j41(0,"ion-button",45),e.bIt("click",function(){let a;e.eBV(c);const l=e.XpG(2);return e.Njj(l.navigateByUrl(l.APP_ROUTE.CHARGING_SESSION_DETAIL.replace(":id",null!==(a=null==l.requestService||null==l.requestService.ChargeSessionId?null:l.requestService.ChargeSessionId.toString())&&void 0!==a?a:"")))}),e.j41(1,"ion-label"),e.EFF(2),e.nI1(3,"translate"),e.k0s()()}2&r&&(e.R7$(2),e.JRh(e.bMT(3,1,"GoToChargingSession")))}function G(r,p){if(1&r){const c=e.RV6();e.j41(0,"ion-content")(1,"ion-refresher",4),e.bIt("ionRefresh",function(a){e.eBV(c);const l=e.XpG();return e.Njj(l.onIonRefresher(a))}),e.nrm(2,"ion-refresher-content"),e.k0s(),e.j41(3,"div",5)(4,"div",6)(5,"div",7)(6,"div",8)(7,"h4",9)(8,"span"),e.EFF(9),e.k0s()(),e.j41(10,"div",10)(11,"small"),e.EFF(12),e.k0s()(),e.nrm(13,"hr",11),e.j41(14,"div",12)(15,"span",13)(16,"small"),e.EFF(17),e.nI1(18,"translate"),e.j41(19,"b"),e.EFF(20),e.k0s()()(),e.j41(21,"span",14)(22,"small"),e.EFF(23),e.nI1(24,"translate"),e.j41(25,"b"),e.EFF(26),e.nI1(27,"translate"),e.k0s()()()()(),e.nrm(28,"div",15),e.k0s()()(),e.j41(29,"div",16)(30,"div",17)(31,"div",18)(32,"div",19)(33,"div",20)(34,"div",21)(35,"div",22)(36,"ion-chip",23),e.nrm(37,"ion-icon",24),e.j41(38,"ion-label"),e.EFF(39),e.k0s()()()()(),e.j41(40,"div",25)(41,"div",26)(42,"div",27)(43,"div"),e.nrm(44,"ion-img",28),e.k0s(),e.j41(45,"div",29)(46,"div",30),e.EFF(47),e.nI1(48,"translate"),e.k0s(),e.j41(49,"div")(50,"strong"),e.EFF(51),e.k0s(),e.j41(52,"small"),e.EFF(53),e.k0s()()()()(),e.j41(54,"div",31)(55,"h6",32)(56,"b"),e.EFF(57,"Th\u1eddi gian \u0111\u1eb7t l\u1ecbch"),e.k0s()(),e.nrm(58,"hr",33),e.j41(59,"div")(60,"b",34),e.EFF(61),e.k0s()()(),e.j41(62,"div",31)(63,"h6",32)(64,"b"),e.EFF(65,"Th\u1eddi gian th\u1ef1c hi\u1ec7n (d\u1ef1 ki\u1ebfn)"),e.k0s()(),e.nrm(66,"hr",33),e.j41(67,"div")(68,"b",34),e.EFF(69),e.k0s()()()()()(),e.j41(70,"div",35),e.eu8(71,36),e.k0s()()()(),e.j41(72,"ion-footer",37)(73,"div",38),e.DNE(74,k,7,0)(75,E,7,0)(76,x,4,3),e.k0s()()}if(2&r){let c,i,a,l;const n=e.XpG(),v=e.sdS(9);e.R7$(9),e.JRh(null==n.requestService?null:n.requestService.ServiceName),e.R7$(3),e.JRh(null==n.requestService?null:n.requestService.RequestAddress),e.R7$(5),e.SpI("",e.bMT(18,20,"YourWay")," "),e.R7$(3),e.SpI("",n.getDistance2CL()," km"),e.R7$(3),e.SpI("",e.bMT(24,22,"EstimatedTime")," "),e.R7$(3),e.Lme("",n.getTime2CL()," ",e.bMT(27,24,"Minute"),""),e.R7$(6),e.HbH("border-"+n.APP_FUNC_GetColor_VRequestStatus(null==n.requestService?null:n.requestService.VRequestStatus)),e.R7$(4),e.Y8G("color",n.APP_FUNC_GetColor_VRequestStatus(null==n.requestService?null:n.requestService.VRequestStatus)),e.R7$(3),e.JRh(null==n.requestService?null:n.requestService.VRequestStatusName),e.R7$(8),e.JRh(null!==(c=null==n.requestService?null:n.requestService.ChargePackageName)&&void 0!==c?c:e.bMT(48,26,"ChargingPackage")),e.R7$(4),e.SpI("",n.APP_FUNC_FormatMoney(null!==(i=null==n.requestService?null:n.requestService.PayValue)&&void 0!==i?i:0),"\u0111"),e.R7$(2),e.Lme(" /",null==n.requestService?null:n.requestService.PowerValue,"",null!==(a=null==n.requestService?null:n.requestService.Unit)&&void 0!==a?a:"kWh",""),e.R7$(8),e.JRh(n.APP_FUNC_FormatDate(null==n.requestService?null:n.requestService.RequestDate)),e.R7$(8),e.JRh(n.APP_FUNC_FormatDate((null==n.requestService?null:n.requestService.ExecutionDate)+" "+(null==n.requestService?null:n.requestService.ExecutionTime))),e.R7$(2),e.Y8G("ngTemplateOutlet",v)("ngTemplateOutletContext",e.eq3(29,D,e.lJ4(28,F))),e.R7$(3),e.vxM(74,(l=null==n.requestService?null:n.requestService.VRequestStatus)===n.v_request_status.YeuCauDichVu?74:l===n.v_request_status.NhanVienDangDiDen?75:l===n.v_request_status.DangPhucVu?76:-1)}}function w(r,p){if(1&r&&(e.j41(0,"div",46)(1,"div",47)(2,"div",48)(3,"b",49),e.EFF(4,"Chi ti\u1ebft d\u1ecbch v\u1ee5"),e.k0s()()(),e.nrm(5,"hr",50),e.j41(6,"div",51)(7,"table",52)(8,"tr")(9,"td"),e.EFF(10),e.nI1(11,"translate"),e.k0s(),e.j41(12,"td")(13,"b"),e.EFF(14),e.k0s()()(),e.j41(15,"tr")(16,"td"),e.EFF(17),e.nI1(18,"translate"),e.k0s(),e.j41(19,"td")(20,"b"),e.EFF(21),e.k0s()()(),e.j41(22,"tr")(23,"td"),e.EFF(24),e.nI1(25,"translate"),e.k0s(),e.j41(26,"td")(27,"b"),e.EFF(28),e.k0s()()(),e.j41(29,"tr")(30,"td"),e.EFF(31),e.nI1(32,"translate"),e.k0s(),e.j41(33,"td")(34,"b"),e.EFF(35),e.k0s()()()()()()),2&r){const c=p.$implicit;e.R7$(10),e.JRh(e.bMT(11,8,"Employe")),e.R7$(4),e.JRh(c.CarBrand),e.R7$(3),e.JRh(e.bMT(18,10,"CarBrand")),e.R7$(4),e.JRh(c.CarBrand),e.R7$(3),e.JRh(e.bMT(25,12,"ModelName")),e.R7$(4),e.JRh(c.ModelName),e.R7$(3),e.JRh(e.bMT(32,14,"VehicleNumber")),e.R7$(4),e.JRh(c.VehicleNumber)}}const J=[{path:"",component:(()=>{var r;class p{constructor(i,a,l,n,v,C){var P;this.router=i,this.activatedRoute=a,this.modalController=l,this.animationController=n,this.toastController=v,this.loadingController=C,this.APP_ROUTE=R._,this.APP_FUNC_FormatDate=o.Rv,this.APP_FUNC_FormatMoney=o.xi,this.APP_FUNC_GetColor_VRequestStatus=o.rZ,this.v_request_status=f.Gz;let h=null!==(P=a.snapshot.params.id)&&void 0!==P?P:"";h&&(this.RequestServiceId=parseFloat(h))}ngOnInit(){var i=this;this.IsOnInit=!0,(0,S.A)(function*(){(yield(0,m.kU)())&&i.refreshData(()=>{})})()}ionViewDidEnter(){this.IsOnInit?this.IsOnInit=!1:this.refreshData()}onIonRefresher(i){this.refreshData(()=>{i.target.complete()})}refreshData(i){var a=this;return(0,S.A)(function*(){(0,d.K5)({params:{RequestServiceId:a.RequestServiceId},callback:l=>{var n,v,C,P,h;a.response=l,null!=l&&l.Succeeded?(a.requestService=null!==(n=l.Data)&&void 0!==n?n:{},a.customerPosition={lat:null!==(v=null===(C=a.requestService)||void 0===C?void 0:C.RequestLat)&&void 0!==v?v:0,lng:null!==(P=null===(h=a.requestService)||void 0===h?void 0:h.RequestLong)&&void 0!==P?P:0}):(0,g.cX)(a.toastController,{},l).then($=>{$.onDidDismiss().then(O=>{a.router.navigateByUrl(R._.REQUEST_SERVICE)}),$.present()}),i&&i()}})})()}initMap(){var i=this;const a=function(){var n=(0,S.A)(function*(){let v,C,h=window.google.maps;const{Map:$}=yield h.importLibrary("maps"),{AdvancedMarkerElement:O}=yield h.importLibrary("marker");let T=new $(document.getElementById("map"),{zoom:12,center:i.customerPosition,disableDefaultUI:!0,mapId:"DEMO_MAP_ID"});i.customerPosition&&(v=new O({map:T,position:i.customerPosition,title:"V\u1ecb tr\xed kh\xe1ch h\xe0ng \u0111\u1eb7t l\u1ecbch"})),i.employePosition&&(C=new O({map:T,position:i.employePosition,title:"V\u1ecb tr\xed nh\xe2n vi\xean iSAC"})),i.customerPosition&&i.employePosition&&setTimeout(()=>{var A,V,U,N,K=h.DirectionsService(),L=h.DirectionsRenderer();L.setMap(T),K.route({origin:h.LatLng(null===(A=i.employePosition)||void 0===A?void 0:A.lat,null===(V=i.employePosition)||void 0===V?void 0:V.lng),destination:h.LatLng(null===(U=i.customerPosition)||void 0===U?void 0:U.lat,null===(N=i.customerPosition)||void 0===N?void 0:N.lng),travelMode:"DRIVING"},function(Y,W){"OK"==W&&L.setDirections(Y)})},1e3)});return function(){return n.apply(this,arguments)}}();window.initMap=a;let l=document.createElement("script");l.async=!0,l.src=`https://maps.google.com/maps/api/js?key=${_.c.apiKey}&libraries=places,marker,routes&callback=initMap&loading=async`,document.head.append(l)}refreshCurrentPosition(i){var a=this;return(0,S.A)(function*(){let l=()=>{(0,t.Xz)().then(n=>{a.employePosition=n,i&&i()})};j.L.getCurrentPosition({enableHighAccuracy:!0}).then(function(){var n=(0,S.A)(function*(v){if(v.coords){var C={lat:v.coords.latitude,lng:v.coords.longitude};yield(0,t.fj)({params:C})}l()});return function(v){return n.apply(this,arguments)}}()).catch(()=>{l()})})()}navigateByUrl(i){this.router.navigateByUrl(i)}getDistance2CL(){return this.employePosition&&this.customerPosition?(0,o.Rw)((0,o.GH)(this.employePosition,this.customerPosition),10):0}getTime2CL(){return this.employePosition&&this.customerPosition?(0,o.Rw)(3*(0,o.GH)(this.employePosition,this.customerPosition),1):0}cancelService(){var i=this;return(0,S.A)(function*(){var a;(0,g.Yy)(i.modalController,i.animationController,{selectedId:null===(a=i.requestService)||void 0===a?void 0:a.RequestServiceId,message:{TitleConfirm:"H\u1ee7y d\u1ecbch v\u1ee5",TextConfirm:"Confirm"},fnConfirm:l=>{(0,d.nY)({loadingController:i.loadingController,params:{RequestServiceId:l},callback:n=>{null!=n&&n.Succeeded?(0,g.cX)(i.toastController,{},n).then(v=>{v.onDidDismiss().then(C=>{i.router.navigateByUrl(R._.REQUEST_SERVICE)}),v.present()}):(0,g.cX)(i.toastController,{},n).then(v=>v.present())}})}})})()}}return(r=p).\u0275fac=function(i){return new(i||r)(e.rXU(q.Ix),e.rXU(q.nX),e.rXU(u.W3),e.rXU(u.Hx),e.rXU(u.K_),e.rXU(u.Xi))},r.\u0275cmp=e.VBU({type:r,selectors:[["app-request-service-detail"]],decls:10,vars:5,consts:[["templateVehicle",""],["color","primary"],["slot","start"],["icon","../../../assets/icon/ion-icon/arrow-left.svg","text","",3,"defaultHref"],["slot","fixed",3,"ionRefresh"],[1,"bg-primary"],[1,"container","card-location","text-white","pb-2"],[1,"row"],[1,"col-auto"],[1,"d-flex","align-items-center","my-0"],[1,"d-flex","align-items-center","mt-1"],[1,"border-gray","mt-2","mb-1"],[1,"text-right","text-nowrap"],[1,"mr-4"],[1,"d-inline-block"],[1,"col","p-0"],[1,"container"],[1,"row","align-items-stretch"],[1,"col-12","col-lg-6","mt-3","mb-4","d-flex","flex-column"],[1,"flex-grow-1","card-day","d-flex","flex-column","rounded","bg-white","border","mt-3"],[1,"flex-grow-1"],[1,"d-flex","justify-content-center"],[1,"card-status"],[1,"no-opacity",3,"color"],["src","../../../assets/icon/tabs/service.svg"],[1,"p-2"],[1,"card-package","rounded","border","d-flex","align-items-stretch","p-2"],[1,"d-flex","align-items-center"],["src","../../../assets/icon/ion-img/charge-package.svg"],[1,"align-self-stretch","pl-2","d-flex","flex-column","justify-content-between"],[1,"text-muted","fs-3"],[1,"card-day","bg-white","p-2","mt-3"],[1,"m-0"],[1,"border-dashed","mt-2","mb-3"],[1,"text-medium"],[1,"col-12","col-lg-6","mb-4"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"ion-padding-vertical"],[1,"container","d-flex","align-items-center","justify-content-between"],[1,"mr-3","d-flex","align-items-center"],["name","lines"],[1,"fs-14","ml-2"],["color","medium","shape","round","fill","outline","expand","block",3,"click"],["color","primary","name","checkmark-circle-outline",1,"fs-24"],["color","primary",1,"fs-14","ml-2"],["color","primary","expand","block",1,"flex-grow-1",3,"click"],[1,"card-vehicle","h-100","bg-white","rounded","p-3"],[1,"d-flex","align-items-center","justify-content-between"],[1,"text-ellipsis"],[1,"mr-1"],[1,"mt-2","mb-2"],[1,"d-flex","align-items-start"],[1,"table","table-borderless","m-0"]],template:function(i,a){1&i&&(e.j41(0,"ion-header",1)(1,"ion-toolbar")(2,"ion-buttons",2),e.nrm(3,"ion-back-button",3),e.k0s(),e.j41(4,"ion-title"),e.EFF(5),e.nI1(6,"translate"),e.k0s()()(),e.DNE(7,G,77,31)(8,w,36,16,"ng-template",null,0,e.C5r)),2&i&&(e.R7$(3),e.Y8G("defaultHref",a.APP_ROUTE.TABS_DEFAULT),e.R7$(2),e.JRh(e.bMT(6,3,"ServiceDetail")),e.R7$(2),e.vxM(7,a.response?7:-1))},dependencies:[b.T3,u.Jm,u.QW,u.ZB,u.W9,u.M0,u.eU,u.iq,u.KW,u.he,u.To,u.Ki,u.w2,u.BC,u.ai,u.el,M.D9],styles:[".card-location[_ngcontent-%COMP%]{position:relative;z-index:1;background-image:url(bg-charging-location.24bf138423cec5f5.svg);background-repeat:no-repeat;background-position:top center;background-size:auto 100%}.card-location.rounded[_ngcontent-%COMP%]{border-top-left-radius:1.5rem!important;border-top-right-radius:1.5rem!important}.card-location[_ngcontent-%COMP%]   ion-thumbnail[_ngcontent-%COMP%]{--size: 5rem;--border-radius: .5rem;border:1px solid var(--ion-color-light)}.card-location[_ngcontent-%COMP%]   .icon-w24[_ngcontent-%COMP%]{display:inline-block;width:24px}.card-location[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:1.5rem}#map[_ngcontent-%COMP%]{width:100%;height:100%}.card-day.rounded[_ngcontent-%COMP%], .card-day.rounded[_ngcontent-%COMP%]   .rounded[_ngcontent-%COMP%]{border-radius:1rem!important}.card-day[_ngcontent-%COMP%]   .card-status[_ngcontent-%COMP%]{margin-top:-1rem}.card-day[_ngcontent-%COMP%]   .card-package[_ngcontent-%COMP%]   ion-img[_ngcontent-%COMP%]{width:3rem}.card-vehicle.rounded[_ngcontent-%COMP%]{border-radius:1rem!important}.card-vehicle[_ngcontent-%COMP%]   hr[_ngcontent-%COMP%]{border-style:dashed!important}.card-vehicle[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{width:2rem;height:2rem;min-width:2rem;min-height:2rem;--padding-start: 0;--padding-end: 0;--padding-top: 0;--padding-bottom: 0;--border-radius: .5rem}.card-vehicle[_ngcontent-%COMP%]   ion-img[_ngcontent-%COMP%]{width:3rem}.card-vehicle[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]{table-layout:fixed;font-size:.875rem}.card-vehicle[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding-top:.25rem;padding-bottom:.25rem;vertical-align:top}.card-vehicle[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child{width:40%;padding-left:0;padding-right:.5rem;color:var(--ion-color-medium-shade)}.card-vehicle[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child{padding-left:.5rem;padding-right:0;text-align:right}"]}),p})()}];let X=(()=>{var r;class p{}return(r=p).\u0275fac=function(i){return new(i||r)},r.\u0275mod=e.$C({type:r}),r.\u0275inj=e.G2t({imports:[q.iI.forChild(J),q.iI]}),p})();var H=s(3890);let z=(()=>{var r;class p{}return(r=p).\u0275fac=function(i){return new(i||r)},r.\u0275mod=e.$C({type:r}),r.\u0275inj=e.G2t({imports:[b.MD,y.YN,u.bv,X,H.x]}),p})()}}]);
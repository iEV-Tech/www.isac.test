"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[968],{2254:(M,$,s)=>{s.d($,{C:()=>y,D1:()=>P,cZ:()=>p,kT:()=>R,vE:()=>a});var F=s(467),T=s(5972);const p=function(){var d=(0,F.A)(function*(n){var r,e,v,m,u;n.params=n.params||{},(0,T.Ll)({url:"api/Feedback/create",params:{FbCatgId:null!==(r=n.params.FbCatgId)&&void 0!==r?r:null,DocType:null!==(e=n.params.DocType)&&void 0!==e?e:null,DocId:null!==(v=n.params.DocId)&&void 0!==v?v:null,Title:null!==(m=n.params.Title)&&void 0!==m?m:null,Content:null!==(u=n.params.Content)&&void 0!==u?u:null},success:f=>{"function"==typeof n.callback&&n.callback(f.data||null)},error:f=>{var o;"function"==typeof n.callback&&n.callback(null==f||null===(o=f.response)||void 0===o?void 0:o.data),console.error(f)},loading:n.loading,loadingController:n.loadingController})});return function(r){return d.apply(this,arguments)}}(),P=function(){var d=(0,F.A)(function*(n){var r,e,v,m,u,f;n.params=n.params||{},(0,T.IH)({url:"api/Feedback/update",params:{FeedbackId:null!==(r=n.params.FeedbackId)&&void 0!==r?r:null,FbCatgId:null!==(e=n.params.FbCatgId)&&void 0!==e?e:null,DocType:null!==(v=n.params.DocType)&&void 0!==v?v:null,DocId:null!==(m=n.params.DocId)&&void 0!==m?m:null,Title:null!==(u=n.params.Title)&&void 0!==u?u:null,Content:null!==(f=n.params.Content)&&void 0!==f?f:null},success:o=>{"function"==typeof n.callback&&n.callback(o.data||null)},error:o=>{var t;"function"==typeof n.callback&&n.callback(null==o||null===(t=o.response)||void 0===t?void 0:t.data),console.error(o)},loading:n.loading,loadingController:n.loadingController})});return function(r){return d.apply(this,arguments)}}(),R=function(){var d=(0,F.A)(function*(n){var r,e;n.params=n.params||{},(0,T.hm)({url:"api/Feedback/get-feedbacks",params:{PageNumber:null!==(r=n.params.PageNumber)&&void 0!==r?r:1,PageSize:null!==(e=n.params.PageSize)&&void 0!==e?e:10},success:v=>{"function"==typeof n.callback&&n.callback(v.data||null)},error:v=>{var m;"function"==typeof n.callback&&n.callback(null==v||null===(m=v.response)||void 0===m?void 0:m.data),console.error(v)},loading:n.loading,loadingController:n.loadingController})});return function(r){return d.apply(this,arguments)}}(),y=function(){var d=(0,F.A)(function*(n){n.params=n.params||{},(0,T.hm)({url:`api/Feedback/get-byid/${n.params.FeedbackId}`,params:{},success:r=>{"function"==typeof n.callback&&n.callback(r.data||null)},error:r=>{var e;"function"==typeof n.callback&&n.callback(null==r||null===(e=r.response)||void 0===e?void 0:e.data),console.error(r)},loading:n.loading,loadingController:n.loadingController})});return function(r){return d.apply(this,arguments)}}(),a=function(){var d=(0,F.A)(function*(n){n.params=n.params||{},(0,T.sj)({url:`api/Feedback/delete/${n.params.FeedbackId}`,params:{},success:r=>{"function"==typeof n.callback&&n.callback(r.data||null)},error:r=>{var e;"function"==typeof n.callback&&n.callback(null==r||null===(e=r.response)||void 0===e?void 0:e.data),console.error(r)},loading:n.loading,loadingController:n.loadingController})});return function(r){return d.apply(this,arguments)}}()},9051:(M,$,s)=>{s.d($,{l:()=>v});var F=s(467),T=s(2254),p=s(5972);const P=function(){var m=(0,F.A)(function*(u){var f,o;u.params=u.params||{},(0,p.hm)({url:"api/FeedbackCatg/get-feedbackcatgs",params:{PageNumber:null!==(f=u.params.PageNumber)&&void 0!==f?f:1,PageSize:null!==(o=u.params.PageSize)&&void 0!==o?o:10},success:t=>{"function"==typeof u.callback&&u.callback(t.data||null)},error:t=>{var h;"function"==typeof u.callback&&u.callback(null==t||null===(h=t.response)||void 0===h?void 0:h.data),console.error(t)},loading:u.loading,loadingController:u.loadingController})});return function(f){return m.apply(this,arguments)}}();var y=s(8650),a=s(4438),d=s(791),n=s(177),r=s(4842);function e(m,u){if(1&m&&(a.qex(0),a.j41(1,"ion-select-option",15),a.EFF(2),a.k0s(),a.bVm()),2&m){const f=u.$implicit;a.R7$(),a.Y8G("value",f.FbCatgId),a.R7$(),a.JRh(f.FbCatgTitle)}}let v=(()=>{var m;class u{constructor(o,t,h){this.modalController=o,this.loadingController=t,this.toastController=h,this.feedback={},this.feedbackcatgs=[]}ngOnInit(){P({params:{},callback:o=>{var t;null!=o&&o.Succeeded?this.feedbackcatgs=null!==(t=o.Data)&&void 0!==t?t:[]:(0,y.cX)(this.toastController,{},o).then(h=>h.present())}}),this.FeedbackId&&(0,T.C)({loadingController:this.loadingController,params:{FeedbackId:this.FeedbackId},callback:o=>{var t;this.response=o,null!=o&&o.Succeeded?this.feedback=null!==(t=o.Data)&&void 0!==t?t:{}:(0,y.cX)(this.toastController,{},o).then(h=>h.present())}})}close(o){var t=this;return(0,F.A)(function*(){t.modalController.dismiss(null,"cancel")})()}submit(o){var t=this;return(0,F.A)(function*(){var h;t.feedback.Content&&(null!==(h=t.feedback)&&void 0!==h&&h.FeedbackId?(0,T.D1)({loadingController:t.loadingController,params:t.feedback,callback:b=>{t.response=b,null!=b&&b.Succeeded?t.modalController.dismiss(null,"success"):(0,y.cX)(t.toastController,{},b).then(D=>D.present())}}):(0,T.cZ)({loadingController:t.loadingController,params:t.feedback,callback:b=>{t.response=b,null!=b&&b.Succeeded?(t.modalController.dismiss(null,"success"),(0,y.cX)(t.toastController,{color:"success",message:"G\u1eedi ph\u1ea3n h\u1ed3i th\xe0nh c\xf4ng"}).then(D=>D.present())):(0,y.cX)(t.toastController,{},b).then(D=>D.present())}}))})()}changeTitle(o){var t=this;return(0,F.A)(function*(){t.feedback.Title=o.detail.value})()}changeContent(o){var t=this;return(0,F.A)(function*(){t.feedback.Content=o.detail.value})()}changeCatg(o){var t=this;return(0,F.A)(function*(){t.feedback.FbCatgId=o.detail.value})()}}return(m=u).\u0275fac=function(o){return new(o||m)(a.rXU(d.W3),a.rXU(d.Xi),a.rXU(d.K_))},m.\u0275cmp=a.VBU({type:m,selectors:[["app-modal-add-feedback"]],inputs:{FeedbackId:"FeedbackId",feedback:"feedback"},decls:44,vars:32,consts:[["slot","start"],[3,"click"],["src","../../../assets/icon/ion-icon/arrow-left.svg"],[1,"container","d-flex","flex-column","h-100"],[1,"flex-grow-1"],["lines","none"],[1,"form-group"],[1,"ion-item-input"],["justify","space-between","interface","action-sheet",3,"ionChange","label","placeholder","value"],[4,"ngFor","ngForOf"],[3,"ionChange","placeholder","value"],[1,"text-danger"],["maxlength","250",3,"ionChange","autoGrow","placeholder","value"],[1,"mt-4","py-3"],["color","primary","shape","round","expand","block",3,"click"],[3,"value"]],template:function(o,t){1&o&&(a.j41(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",0)(3,"ion-button",1),a.bIt("click",function(b){return t.close(b)}),a.nrm(4,"ion-icon",2),a.k0s()(),a.j41(5,"ion-title"),a.EFF(6),a.nI1(7,"translate"),a.k0s()()(),a.j41(8,"ion-content")(9,"div",3)(10,"div",4)(11,"ion-list",5)(12,"div",6)(13,"label"),a.EFF(14),a.nI1(15,"translate"),a.k0s(),a.j41(16,"div",7)(17,"ion-item")(18,"ion-select",8),a.nI1(19,"translate"),a.nI1(20,"translate"),a.bIt("ionChange",function(b){return t.changeCatg(b)}),a.DNE(21,e,3,2,"ng-container",9),a.k0s()()()(),a.j41(22,"div",6)(23,"label"),a.EFF(24),a.nI1(25,"translate"),a.k0s(),a.j41(26,"div",7)(27,"ion-item")(28,"ion-input",10),a.nI1(29,"translate"),a.bIt("ionChange",function(b){return t.changeTitle(b)}),a.k0s()()()(),a.j41(30,"div",6)(31,"label"),a.EFF(32),a.nI1(33,"translate"),a.j41(34,"span",11),a.EFF(35,"*"),a.k0s()(),a.j41(36,"div",7)(37,"ion-item")(38,"ion-textarea",12),a.nI1(39,"translate"),a.bIt("ionChange",function(b){return t.changeContent(b)}),a.k0s()()()()()(),a.j41(40,"div",13)(41,"ion-button",14),a.bIt("click",function(b){return t.submit(b)}),a.EFF(42),a.nI1(43,"translate"),a.k0s()()()()),2&o&&(a.R7$(6),a.JRh(a.bMT(7,14,"SendFeedback")),a.R7$(8),a.JRh(a.bMT(15,16,"Category")),a.R7$(4),a.FS9("label",a.bMT(19,18,"FeedbackCatg")),a.FS9("placeholder",a.bMT(20,20,"Select")),a.Y8G("value",t.feedback.FbCatgId),a.R7$(3),a.Y8G("ngForOf",t.feedbackcatgs),a.R7$(3),a.JRh(a.bMT(25,22,"Title")),a.R7$(4),a.FS9("placeholder",a.bMT(29,24,"FeedbackTitle")),a.Y8G("value",t.feedback.Title),a.R7$(4),a.SpI("",a.bMT(33,26,"Content")," "),a.R7$(6),a.FS9("placeholder",a.bMT(39,28,"FeedbackContent")),a.Y8G("autoGrow",!0)("value",t.feedback.Content),a.R7$(4),a.JRh(a.bMT(43,30,"Send")))},dependencies:[n.Sq,d.Jm,d.QW,d.W9,d.eU,d.iq,d.$w,d.uz,d.nf,d.Nm,d.Ip,d.nc,d.BC,d.ai,d.Je,d.Gw,r.D9]}),u})()},968:(M,$,s)=>{s.r($),s.d($,{FeedbackPageModule:()=>D});var F=s(177),T=s(9417),p=s(791),P=s(7625),R=s(467),y=s(9051),a=s(2254),d=s(6539),n=s(8650),r=s(8833),e=s(4438),v=s(4842);function m(g,I){1&g&&(e.j41(0,"div",10),e.nrm(1,"img",11),e.j41(2,"div",12),e.EFF(3),e.nI1(4,"translate"),e.k0s()()),2&g&&(e.R7$(3),e.JRh(e.bMT(4,1,"DataNotFound")))}function u(g,I){if(1&g){const C=e.RV6();e.qex(0),e.j41(1,"div",13)(2,"div",14)(3,"div",15)(4,"div")(5,"small",16),e.EFF(6),e.k0s()(),e.j41(7,"div",17)(8,"ion-button",18),e.bIt("click",function(i){const c=e.eBV(C).$implicit,k=e.XpG();return e.Njj(k.presentModalAddFeedback(i,c.FeedbackId))}),e.nrm(9,"ion-icon",19),e.k0s(),e.j41(10,"ion-button",20),e.bIt("click",function(i){const c=e.eBV(C).$implicit,k=e.XpG();return e.Njj(k.DeleteFeedback(i,c.FeedbackId))}),e.nrm(11,"ion-icon",21),e.k0s()()(),e.nrm(12,"hr"),e.j41(13,"div")(14,"b"),e.EFF(15),e.k0s(),e.j41(16,"div",22),e.EFF(17),e.k0s()()()(),e.bVm()}if(2&g){const C=I.$implicit;e.R7$(6),e.JRh(C.FbCatgTitle),e.R7$(9),e.JRh(C.Title),e.R7$(2),e.JRh(C.Content)}}function f(g,I){if(1&g){const C=e.RV6();e.j41(0,"ion-infinite-scroll",23),e.bIt("ionInfinite",function(i){e.eBV(C);const c=e.XpG();return e.Njj(c.onIonInfinite(i))}),e.nrm(1,"ion-infinite-scroll-content"),e.k0s()}}const t=[{path:"",component:(()=>{var g;class I{constructor(l,i,c,k,_){this.router=l,this.modalController=i,this.toastController=c,this.loadingController=k,this.animationController=_,this.APP_ROUTE=r._,this.paging={sortfield:null,sorttype:null,page:1,limit:10,loading:!1,active:!0},this.filter={},this.feedbacks=[],this.limitLoad=0}ngOnInit(){var l=this;(0,R.A)(function*(){(yield(0,d.kU)())&&l.refreshData()})()}onIonRefresher(l){this.filter={},this.refreshData(()=>{l.target.complete()})}onIonInfinite(l){this.loadMore(()=>{l.target.complete()})}pushData(l){1==this.paging.page&&(this.feedbacks.length=0),this.feedbacks=this.feedbacks.concat(l)}refreshData(l){this.filter={},this.paging.page=1,this.paging.active=!0,this.loadData_Paging_Limit(l)}loadMore(l){this.paging.page+=1,this.loadData_Paging_Limit(l)}searchChange(l){this.filter.search=l.target.value.replace(/\s+/g," ").trim(),this.paging.page=1,this.paging.active=!0,this.loadData_Paging_Limit()}sortChange(l,i){this.paging.sortfield=l||null,this.paging.sorttype=i||null,this.paging.page=1,this.paging.active=!0,this.loadData_Paging_Limit()}filterChange(){this.paging.page=1,this.paging.active=!0,this.loadData_Paging_Limit()}loadData_Paging_Limit(l){var i=this;return(0,R.A)(function*(){if(i.limitLoad>0)return void(l&&l());i.limitLoad=300;let c=setInterval(()=>{i.limitLoad-=100,i.limitLoad<=0&&(clearInterval(c),i.loadData_Paging(l))},100)})()}loadData_Paging(l){var i=this;return(0,R.A)(function*(){i.paging.loading=!0,(0,a.kT)({loadingController:i.loadingController,params:{PageNumber:i.paging.page,PageSize:i.paging.limit},callback:c=>{var k;i.response=c,null!=c&&c.Succeeded?i.pushData(null!==(k=c.Data)&&void 0!==k?k:[]):(0,n.cX)(i.toastController,{},c).then(_=>_.present()),i.paging.loading=!1,i.paging.active=!(null==c||!c.HasNextPage),l&&l()}})})()}presentModalAddFeedback(l,i){var c=this;return(0,R.A)(function*(){null==l||l.preventDefault();let k=yield c.modalController.create({component:y.l,componentProps:{FeedbackId:i}});k.onDidDismiss().then(_=>{"success"==_.role&&c.refreshData()}),k.present()})()}DeleteFeedback(l,i){var c=this;return(0,R.A)(function*(){null==l||l.preventDefault(),i&&(0,n.Yy)(c.modalController,c.animationController,{selectedId:i,message:{TitleConfirm:"Delete_Confirm",TextConfirm:"Delete"},fnConfirm:k=>{(0,a.vE)({loadingController:c.loadingController,params:{FeedbackId:k},callback:_=>{null!=_&&_.Succeeded?c.refreshData():(0,n.cX)(c.toastController,{},_).then(A=>A.present())}})}})})()}openDetail(l,i){var c=this;return(0,R.A)(function*(){var k,_;c.router.navigateByUrl(r._.FEEDBACK_DETAIL.replace(":id",null!==(k=null===(_=i.FeedbackId)||void 0===_?void 0:_.toString())&&void 0!==k?k:""))})()}}return(g=I).\u0275fac=function(l){return new(l||g)(e.rXU(P.Ix),e.rXU(p.W3),e.rXU(p.K_),e.rXU(p.Xi),e.rXU(p.Hx))},g.\u0275cmp=e.VBU({type:g,selectors:[["app-feedback"]],decls:21,vars:10,consts:[["slot","start"],["icon","../../../assets/icon/ion-icon/arrow-left.svg","text","",3,"defaultHref"],["slot","fixed",3,"ionRefresh"],["class","container py-5 text-center",4,"ngIf"],[1,"container"],[4,"ngFor","ngForOf"],[3,"ionInfinite",4,"ngIf"],[1,"container","py-3"],["mode","md","size","default","expand","full","shape","round",1,"ion-no-margin",3,"click"],["slot","start","name","add-outline"],[1,"container","py-5","text-center"],["src","../../../assets/image/default/no-info.svg"],[1,"text-muted","mt-4"],[1,"mb-3"],[1,"card-feedback","rounded","bg-white"],[1,"d-flex","align-items-center","justify-content-between"],[1,"text-primary"],[1,"text-nowrap"],["size","small","color","medium","fill","clear",3,"click"],["src","../../../assets/icon/ion-icon/edit.svg",1,"fs-4"],["size","small","color","danger","fill","clear",3,"click"],["name","close-outline",1,"fs-5"],[1,"mt-2"],[3,"ionInfinite"]],template:function(l,i){1&l&&(e.j41(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",0),e.nrm(3,"ion-back-button",1),e.k0s(),e.j41(4,"ion-title"),e.EFF(5),e.nI1(6,"translate"),e.k0s()()(),e.j41(7,"ion-content")(8,"ion-refresher",2),e.bIt("ionRefresh",function(k){return i.onIonRefresher(k)}),e.nrm(9,"ion-refresher-content"),e.k0s(),e.DNE(10,m,5,3,"div",3),e.j41(11,"div",4),e.DNE(12,u,18,3,"ng-container",5),e.k0s(),e.DNE(13,f,2,0,"ion-infinite-scroll",6),e.k0s(),e.j41(14,"ion-footer")(15,"div",7)(16,"ion-button",8),e.bIt("click",function(k){return i.presentModalAddFeedback(k)}),e.nrm(17,"ion-icon",9),e.j41(18,"ion-label"),e.EFF(19),e.nI1(20,"translate"),e.k0s()()()()),2&l&&(e.R7$(3),e.Y8G("defaultHref",i.APP_ROUTE.DEFAULT),e.R7$(2),e.JRh(e.bMT(6,6,"Feedback")),e.R7$(5),e.Y8G("ngIf",i.response&&!i.feedbacks.length),e.R7$(2),e.Y8G("ngForOf",i.feedbacks),e.R7$(),e.Y8G("ngIf",i.paging.active),e.R7$(6),e.JRh(e.bMT(20,8,"NewFeedback")))},dependencies:[F.Sq,F.bT,p.Jm,p.QW,p.W9,p.M0,p.eU,p.iq,p.Ax,p.Hp,p.he,p.To,p.Ki,p.BC,p.ai,p.el,v.D9],styles:[".card-feedback[_ngcontent-%COMP%]{padding:1rem}.card-feedback.rounded[_ngcontent-%COMP%]{border-radius:1.5rem!important}.card-feedback[_ngcontent-%COMP%]   hr[_ngcontent-%COMP%]{border-style:dashed!important}.card-feedback[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{width:2rem;height:2rem;min-width:2rem;min-height:2rem;--padding-start: 0;--padding-end: 0;--padding-top: 0;--padding-bottom: 0;--border-radius: .5rem}"]}),I})()}];let h=(()=>{var g;class I{}return(g=I).\u0275fac=function(l){return new(l||g)},g.\u0275mod=e.$C({type:g}),g.\u0275inj=e.G2t({imports:[P.iI.forChild(t),P.iI]}),I})();var b=s(3890);let D=(()=>{var g;class I{}return(g=I).\u0275fac=function(l){return new(l||g)},g.\u0275mod=e.$C({type:g}),g.\u0275inj=e.G2t({imports:[F.MD,T.YN,p.bv,h,b.x]}),I})()}}]);
"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[7578],{7578:(S,f,s)=>{s.r(f),s.d(f,{WalletHistoryPageModule:()=>A});var m=s(177),_=s(9417),r=s(791),d=s(7625),u=s(467),v=s(5312),y=s(5972);const P=function(){var e=(0,u.A)(function*(a){var o,n,i,l,c;a.params=a.params||{},(0,y.hm)({url:"api/WalletHistory/get-myhistory",params:{IsIn:null!==(o=a.params.IsIn)&&void 0!==o?o:null,StartDate:null!==(n=a.params.StartDate)&&void 0!==n?n:null,EndDate:null!==(i=a.params.EndDate)&&void 0!==i?i:null,PageNumber:null!==(l=a.params.PageNumber)&&void 0!==l?l:1,PageSize:null!==(c=a.params.PageSize)&&void 0!==c?c:10},success:g=>{"function"==typeof a.callback&&a.callback(g.data||null)},error:g=>{var p;"function"==typeof a.callback&&a.callback(null==g||null===(p=g.response)||void 0===p?void 0:p.data),console.error(g)},loading:a.loading,loadingController:a.loadingController})});return function(o){return e.apply(this,arguments)}}();var C=s(6539),h=s(8517),R=s(8650),H=s(8833),t=s(4438),I=s(3656),W=s(4842);const $=e=>({$implicit:e});function F(e,a){if(1&e&&(t.qex(0),t.j41(1,"div",11),t.eu8(2,12),t.k0s(),t.bVm()),2&e){const o=a.$implicit;t.XpG(2);const n=t.sdS(28);t.R7$(2),t.Y8G("ngTemplateOutlet",n)("ngTemplateOutletContext",t.eq3(2,$,o))}}function M(e,a){if(1&e&&(t.j41(0,"div",7)(1,"div",9),t.DNE(2,F,3,4,"ng-container",10),t.k0s()()),2&e){const o=t.XpG();t.R7$(2),t.Y8G("ngForOf",o.walletHistorys)}}function T(e,a){1&e&&(t.j41(0,"div",13),t.nrm(1,"img",14),t.j41(2,"div",15),t.EFF(3),t.nI1(4,"translate"),t.k0s()()),2&e&&(t.R7$(3),t.JRh(t.bMT(4,1,"DataNotFound")))}function b(e,a){if(1&e){const o=t.RV6();t.j41(0,"ion-infinite-scroll",16),t.bIt("ionInfinite",function(i){t.eBV(o);const l=t.XpG();return t.Njj(l.onIonInfinite(i))}),t.nrm(1,"ion-infinite-scroll-content"),t.k0s()}}function j(e,a){if(1&e&&t.nrm(0,"img",22),2&e){const o=t.XpG(2).$implicit;t.Mz_("src","../../../assets/icon/payment/",null==o.Paymethod?null:o.Paymethod.toLowerCase(),".jpeg",t.B4B)}}function x(e,a){1&e&&t.nrm(0,"img",23)}function D(e,a){if(1&e&&(t.j41(0,"b"),t.EFF(1),t.k0s(),t.j41(2,"ion-chip")(3,"ion-label",20),t.EFF(4),t.k0s(),t.j41(5,"ion-avatar"),t.DNE(6,j,1,2,"img",22)(7,x,1,0),t.k0s()()),2&e){let o;const n=t.XpG().$implicit,i=t.XpG();t.R7$(),t.JRh(n.VWalletInMethodName),t.R7$(3),t.SpI("+",i.APP_FUNC_FormatMoney(null!==(o=n.Amount)&&void 0!==o?o:0),"\u0111"),t.R7$(2),t.vxM(6,n.Paymethod?6:7)}}function E(e,a){1&e&&(t.j41(0,"ion-avatar"),t.nrm(1,"img",24),t.k0s())}function G(e,a){1&e&&(t.j41(0,"ion-avatar"),t.nrm(1,"img",25),t.k0s())}function N(e,a){if(1&e&&(t.j41(0,"b"),t.EFF(1,"Thanh to\xe1n d\u1ecbch v\u1ee5"),t.k0s(),t.j41(2,"ion-chip")(3,"ion-label",20),t.EFF(4),t.k0s(),t.DNE(5,E,2,0,"ion-avatar")(6,G,2,0),t.k0s()),2&e){let o;const n=t.XpG().$implicit,i=t.XpG();t.R7$(4),t.SpI("-",i.APP_FUNC_FormatMoney(null!==(o=n.Amount)&&void 0!==o?o:0),"\u0111"),t.R7$(),t.vxM(5,n.IsVehicleVipWallet?5:6)}}function k(e,a){if(1&e&&(t.j41(0,"div",17)(1,"div",18),t.DNE(2,D,8,3)(3,N,7,2),t.k0s(),t.j41(4,"div",19)(5,"small",20),t.EFF(6),t.k0s(),t.j41(7,"small")(8,"b",21),t.EFF(9),t.nI1(10,"translate"),t.k0s()()()()),2&e){const o=a.$implicit,n=t.XpG();t.R7$(2),t.vxM(2,o.IsIn?2:3),t.R7$(4),t.JRh(n.APP_FUNC_FormatDate(o.CreatedDate)),t.R7$(3),t.JRh(t.bMT(10,3,"Completed"))}}const O=[{path:"",component:(()=>{var e;class a{constructor(n,i,l,c,g,p){this.router=n,this.platform=i,this.modalController=l,this.animationController=c,this.toastController=g,this.loadingController=p,this.APP_ROUTE=H._,this.APP_FUNC_FormatMoney=h.xi,this.APP_FUNC_FormatDate=h.Rv,this.readfile_url=v.c.readfile_url,this.paging={sortfield:null,sorttype:null,page:1,limit:20,loading:!1,active:!0},this.filter={},this.walletHistorys=[],this.limitLoad=0}ngOnInit(){(0,C.kU)().then(n=>{n&&this.refreshData()})}onIonRefresher(n){this.filter={},this.refreshData(()=>{n.target.complete()})}onIonInfinite(n){this.loadMore(()=>{n.target.complete()})}onIonSegmentChange(n){console.log(n),this.filter.type=n.detail.value,this.filterChange()}pushData(n){1==this.paging.page&&(this.walletHistorys.length=0),this.walletHistorys=this.walletHistorys.concat(n)}refreshData(n){this.filter={},this.paging.page=1,this.paging.active=!0,this.loadData_Paging_Limit(n)}loadMore(n){this.paging.page+=1,this.loadData_Paging_Limit(n)}searchChange(n){this.filter.search=n.target.value.replace(/\s+/g," ").trim(),this.paging.page=1,this.paging.active=!0,this.loadData_Paging_Limit()}sortChange(n,i){this.paging.sortfield=n||null,this.paging.sorttype=i||null,this.paging.page=1,this.paging.active=!0,this.loadData_Paging_Limit()}filterChange(){this.paging.page=1,this.paging.active=!0,this.loadData_Paging_Limit()}loadData_Paging_Limit(n){var i=this;return(0,u.A)(function*(){if(i.limitLoad>0)return void(n&&n());i.limitLoad=300;let l=setInterval(()=>{i.limitLoad-=100,i.limitLoad<=0&&(clearInterval(l),i.loadData_Paging(n))},100)})()}loadData_Paging(n){var i=this;return(0,u.A)(function*(){i.paging.loading=!0,P({loadingController:i.loadingController,params:{IsIn:1==i.filter.type||2!=i.filter.type&&null,PageNumber:i.paging.page,PageSize:i.paging.limit},callback:l=>{var c;i.response=l,null!=l&&l.Succeeded?i.pushData(null!==(c=l.Data)&&void 0!==c?c:[]):(0,R.cX)(i.toastController,{},l).then(g=>g.present()),i.paging.loading=!1,i.paging.active=!(null==l||!l.HasNextPage),n&&n()}})})()}}return(e=a).\u0275fac=function(n){return new(n||e)(t.rXU(d.Ix),t.rXU(I.OD),t.rXU(r.W3),t.rXU(r.Hx),t.rXU(r.K_),t.rXU(r.Xi))},e.\u0275cmp=t.VBU({type:e,selectors:[["app-wallet-history"]],decls:29,vars:19,consts:[["templateWallet",""],["slot","start"],["icon","../../../assets/icon/ion-icon/arrow-left.svg","text","",3,"defaultHref"],["slot","fixed",3,"ionRefresh"],[1,"container","px-0"],["mode","md",3,"ionChange","value"],[3,"value"],[1,"container","pt-3","pb-4"],[3,"ionInfinite",4,"ngIf"],[1,"row"],[4,"ngFor","ngForOf"],[1,"col-12","col-lg-6","mb-3"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"container","py-5","text-center"],["src","../../../assets/image/default/no-info.svg"],[1,"text-muted","mt-4"],[3,"ionInfinite"],[1,"card-order","cursor-pointer"],[1,"d-flex","align-items-start","justify-content-between"],[1,"d-flex","align-items-start","justify-content-between","mt-2"],[1,"fw-300"],[1,"text-success"],[3,"src"],["src","../../../assets/icon/payment/money.svg"],["src","../../../assets/icon/payment/wallet-vip.svg"],["src","../../../assets/icon/payment/wallet-basic.svg"]],template:function(n,i){if(1&n){const l=t.RV6();t.j41(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",1),t.nrm(3,"ion-back-button",2),t.k0s(),t.j41(4,"ion-title"),t.EFF(5),t.nI1(6,"translate"),t.k0s()()(),t.j41(7,"ion-content")(8,"ion-refresher",3),t.bIt("ionRefresh",function(g){return t.eBV(l),t.Njj(i.onIonRefresher(g))}),t.nrm(9,"ion-refresher-content"),t.k0s(),t.j41(10,"div",4)(11,"ion-segment",5),t.bIt("ionChange",function(g){return t.eBV(l),t.Njj(i.onIonSegmentChange(g))}),t.j41(12,"ion-segment-button",6)(13,"ion-label"),t.EFF(14),t.nI1(15,"translate"),t.k0s()(),t.j41(16,"ion-segment-button",6)(17,"ion-label"),t.EFF(18),t.nI1(19,"translate"),t.k0s()(),t.j41(20,"ion-segment-button",6)(21,"ion-label"),t.EFF(22),t.nI1(23,"translate"),t.k0s()()()(),t.DNE(24,M,3,1,"div",7)(25,T,5,3)(26,b,2,0,"ion-infinite-scroll",8),t.k0s(),t.DNE(27,k,11,5,"ng-template",null,0,t.C5r)}if(2&n){let l;t.R7$(3),t.Y8G("defaultHref",i.APP_ROUTE.SERVICE),t.R7$(2),t.JRh(t.bMT(6,11,"TransactionHistory")),t.R7$(6),t.Y8G("value",null!==(l=i.filter.type)&&void 0!==l?l:0),t.R7$(),t.Y8G("value",0),t.R7$(2),t.JRh(t.bMT(15,13,"All")),t.R7$(2),t.Y8G("value",1),t.R7$(2),t.JRh(t.bMT(19,15,"TopUp")),t.R7$(2),t.Y8G("value",2),t.R7$(2),t.JRh(t.bMT(23,17,"Pay")),t.R7$(2),t.vxM(24,i.walletHistorys.length?24:i.response?25:-1),t.R7$(2),t.Y8G("ngIf",i.paging.active)}},dependencies:[m.Sq,m.bT,m.T3,r.mC,r.QW,r.ZB,r.W9,r.eU,r.Ax,r.Hp,r.he,r.To,r.Ki,r.Gp,r.eP,r.BC,r.ai,r.Je,r.el,W.D9],styles:[".card-order[_ngcontent-%COMP%]{padding:1rem;border-radius:1rem;background-color:var(--ion-color-light);color:var(--ion-color-light-contrast)}.card-order[_ngcontent-%COMP%]   ion-chip[_ngcontent-%COMP%]{min-height:1.25rem;padding-top:.25rem;padding-bottom:.25rem;background:transparent}.card-order[_ngcontent-%COMP%]   ion-chip[_ngcontent-%COMP%]   ion-avatar[_ngcontent-%COMP%]{width:1.25rem;height:1.25rem;line-height:0;border:1px solid var(--ion-color-medium-tint)}.card-order[_ngcontent-%COMP%]   ion-chip[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{border-radius:50%;padding:2px;background:var(--ion-color-light-tint)}"]}),a})()}];let U=(()=>{var e;class a{}return(e=a).\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.$C({type:e}),e.\u0275inj=t.G2t({imports:[d.iI.forChild(O),d.iI]}),a})();var X=s(3890);let A=(()=>{var e;class a{}return(e=a).\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.$C({type:e}),e.\u0275inj=t.G2t({imports:[m.MD,_.YN,r.bv,U,X.x]}),a})()}}]);
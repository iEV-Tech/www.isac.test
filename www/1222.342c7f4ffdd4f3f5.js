"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[1222],{1222:(K,F,l)=>{l.r(F),l.d(F,{ServiceChargingPageModule:()=>L});var f=l(177),j=l(9417),o=l(9465),v=l(7625),R=l(467),_=l(3801),A=l(574),S=l(4470),I=l(6539),b=l(8517),y=l(8650),G=l(8833),e=l(4438),T=l(4842);const x=["inpAddress"],E=()=>[0,1],O=()=>({weekday:"long",year:"numeric",month:"2-digit",day:"2-digit"}),$=()=>({hour:"2-digit",minute:"2-digit"}),N=(a,d)=>({date:a,time:d});function B(a,d){if(1&a){const i=e.RV6();e.j41(0,"ion-header")(1,"ion-toolbar")(2,"ion-title",28),e.EFF(3,"Ch\u1ecdn \u0111\u1ecba ch\u1ec9"),e.k0s()()(),e.j41(4,"ion-content",29)(5,"div",30)(6,"div",7)(7,"label"),e.EFF(8),e.nI1(9,"translate"),e.k0s(),e.j41(10,"div",21)(11,"ion-item",6),e.nrm(12,"ion-icon",31)(13,"ion-input",32,2),e.k0s()()(),e.j41(15,"div",33),e.nrm(16,"div",34),e.k0s()()(),e.j41(17,"ion-footer",26)(18,"ion-button",35),e.bIt("click",function(){e.eBV(i),e.XpG();const n=e.sdS(52);return e.Njj(null==n?null:n.dismiss())}),e.j41(19,"ion-label"),e.EFF(20),e.nI1(21,"translate"),e.k0s()()()}if(2&a){const i=e.XpG();e.R7$(8),e.JRh(e.bMT(9,3,"Address")),e.R7$(5),e.Y8G("value",i.dataForm.address),e.R7$(7),e.JRh(e.bMT(21,5,"Complete"))}}function D(a,d){if(1&a){const i=e.RV6();e.j41(0,"ion-datetime",36),e.bIt("ionChange",function(n){e.eBV(i);const r=e.XpG();return e.Njj(r.changeDateTime(n))}),e.k0s()}if(2&a){const i=e.XpG();e.Y8G("value",i.dataForm.datetime)("formatOptions",e.l_i(4,N,e.lJ4(2,O),e.lJ4(3,$)))}}function X(a,d){if(1&a&&(e.qex(0),e.j41(1,"div")(2,"small"),e.EFF(3),e.k0s()(),e.j41(4,"div",18)(5,"b")(6,"b",19),e.EFF(7),e.k0s()(),e.j41(8,"span"),e.EFF(9),e.k0s()(),e.bVm()),2&a){let i;const t=e.XpG().$implicit,n=e.XpG(2);e.R7$(3),e.JRh(t.ChargePackName),e.R7$(4),e.Lme("",t.PowerValue,"",t.Unit,""),e.R7$(2),e.SpI(" / ",n.APP_FUNC_FormatMoney(null!==(i=t.AftertaxPrice)&&void 0!==i?i:0),"\u0111")}}function U(a,d){if(1&a&&(e.qex(0),e.j41(1,"div")(2,"small"),e.EFF(3),e.k0s()(),e.j41(4,"div",18)(5,"b")(6,"b",19),e.EFF(7),e.k0s()(),e.j41(8,"span"),e.EFF(9),e.k0s()(),e.bVm()),2&a){let i;const t=e.XpG().$implicit,n=e.XpG(2);e.R7$(3),e.JRh(t.ChargePackName),e.R7$(4),e.SpI("",n.APP_FUNC_FormatMoney(null!==(i=t.AftertaxPrice)&&void 0!==i?i:0),"\u0111"),e.R7$(2),e.Lme(" / ",t.PowerValue,"",t.Unit,"")}}function V(a,d){if(1&a&&(e.j41(0,"div",39)(1,"ion-item",40)(2,"ion-radio",41)(3,"div",42)(4,"div"),e.nrm(5,"ion-img",43),e.k0s(),e.j41(6,"div",44),e.DNE(7,X,10,4,"ng-container",45)(8,U,10,4,"ng-container",45),e.k0s()()()()()),2&a){const i=d.$implicit;e.R7$(2),e.Y8G("value",i.ChargePackageId),e.R7$(5),e.Y8G("ngIf",i.IsPackByPower),e.R7$(),e.Y8G("ngIf",!i.IsPackByPower)}}function w(a,d){if(1&a){const i=e.RV6();e.j41(0,"ion-header")(1,"ion-toolbar")(2,"ion-title",28),e.EFF(3,"Ch\u1ecdn g\xf3i s\u1ea1c"),e.k0s()()(),e.j41(4,"ion-content",29)(5,"div",37)(6,"ion-radio-group",38),e.bIt("ionChange",function(n){e.eBV(i);const r=e.XpG();return e.Njj(r.changeChargePackage(n))}),e.Z7z(7,V,9,3,"div",39,e.fX1),e.k0s()()(),e.j41(9,"ion-footer",26)(10,"ion-button",35),e.bIt("click",function(){e.eBV(i),e.XpG();const n=e.sdS(57);return e.Njj(null==n?null:n.dismiss())}),e.j41(11,"ion-label"),e.EFF(12),e.nI1(13,"translate"),e.k0s()()()}if(2&a){const i=e.XpG();e.R7$(6),e.Y8G("value",i.dataForm.ChargePackageId),e.R7$(),e.Dyx(i.chargingPackages),e.R7$(5),e.JRh(e.bMT(13,2,"Complete"))}}const J=[{path:"",component:(()=>{var a;class d{constructor(t,n,r,s,c){this.router=t,this.animationController=n,this.modalController=r,this.toastController=s,this.loadingController=c,this.APP_ROUTE=G._,this.APP_FUNC_FormatMoney=b.xi,this.APP_FUNC_FormatDate=b.Rv,this.dataForm={datetime:"2024-12-31T23:59:00"},this.chargingPackages=[]}ngOnInit(){(0,I.kU)(),(0,_.fA)({callback:t=>{null!=t&&t.currentAddress&&(this.dataForm.address=null==t?void 0:t.currentAddress)}}),(0,_.Xz)().then(t=>{this.dataForm.pos=t})}changeAdress(t){this.dataForm.address=t.detail.value}changeDateTime(t){this.dataForm.datetime=t.detail.value}changeChargePackage(t){this.dataForm.ChargePackageId=t.detail.value}changeNote(t){this.dataForm.note=t.detail.value}onModalAddressDidPresent(t){var n=this;const r=function(){var c=(0,R.A)(function*(){var u;let g,p,h,P;g=window.google.maps,p=new g.Map(document.getElementById("map"),{zoom:15,center:n.dataForm.pos,disableDefaultUI:!0}),h=new g.Marker({map:p,draggable:!0,animation:g.Animation.DROP,position:n.dataForm.pos}),g.event.addListener(h,"dragend",m=>{n.requestAddress({lat:m.latLng.lat(),lng:m.latLng.lng()})}),P=new g.places.Autocomplete(yield null===(u=n.inpAddressRed)||void 0===u?void 0:u.getInputElement()),P.addListener("place_changed",()=>{var m,C=P.getPlace(),k={lat:C.geometry.location.lat(),lng:C.geometry.location.lng()};n.dataForm.address=C.formatted_address,n.dataForm.pos=k,p.moveCamera({zoom:15,center:k}),null===(m=h)||void 0===m||m.setMap(null),h=new g.Marker({map:p,draggable:!0,animation:g.Animation.DROP,position:k})})});return function(){return c.apply(this,arguments)}}();window.initMap=r;let s=document.createElement("script");s.async=!0,s.src="https://maps.google.com/maps/api/js?key=AIzaSyAfx5a8yx5MqeGoTS3ierzoe35TXoX0ZOY&libraries=places&callback=initMap",document.head.append(s)}onModalPackageDidPresent(t){(0,A.P3)({loadingController:this.loadingController,params:{ChargeConnectorId:1,PageNumber:1,PageSize:10},callback:n=>{var r;null!=n&&n.Succeeded?this.chargingPackages=null!==(r=n.Data)&&void 0!==r?r:[]:(0,y.cX)(this.toastController,{},n).then(s=>s.present())}})}requestAddress(t){(0,S.S)({params:{lat:t.lat,lng:t.lng},callback:n=>{var r,s,c;"OK"==(null==n?void 0:n.status)&&(this.dataForm.pos=t,this.dataForm.address=null!==(r=(null!==(s=n.results[0])&&void 0!==s?s:{}).formatted_address)&&void 0!==r?r:null===(c=n.plus_code)||void 0===c?void 0:c.compound_code)}})}}return(a=d).\u0275fac=function(t){return new(t||a)(e.rXU(v.Ix),e.rXU(o.Hx),e.rXU(o.W3),e.rXU(o.K_),e.rXU(o.Xi))},a.\u0275cmp=e.VBU({type:a,selectors:[["app-service-charging"]],viewQuery:function(t,n){if(1&t&&e.GBs(x,5),2&t){let r;e.mGM(r=e.lsd())&&(n.inpAddressRed=r.first)}},decls:64,vars:24,consts:[["modalAddress",""],["modalPackage",""],["inpAddress",""],["slot","start"],["icon","../../../assets/icon/ion-icon/arrow-left.svg","text","",3,"defaultHref"],[1,"card-page","min-h-100"],["lines","none"],[1,"form-group"],[1,"choice-item"],["detail","false","button","true","id","present-modal-address"],["slot","start","color","medium","name","location"],[1,"mr-0"],[1,"fs-14"],["slot","start","color","medium","name","calendar"],["datetime","datetime"],[1,"package-item"],["detail","false","button","true","id","present-modal-package"],["slot","start","src","../../../assets/icon/ion-img/charge-package.svg"],[1,"mt-1"],[1,"text-primary"],["slot","end","color","medium","name","chevron-down-outline"],[1,"ion-item-input"],["placeholder","Nh\u1eadp ghi ch\xfa c\u1ee7a b\u1ea1n cho d\u1ecbch v\u1ee5 s\u1ea1c",3,"ionChange","autoGrow","value"],["trigger","present-modal-address",3,"didPresent","initialBreakpoint","breakpoints"],[3,"keepContentsMounted"],["trigger","present-modal-package",3,"didPresent","initialBreakpoint","breakpoints"],[1,"ion-padding"],["color","primary","shape","round","expand","block"],[1,"text-center"],[1,"ion-padding-horizontal"],[1,"h-100","d-flex","flex-column"],["slot","start","color","medium","name","location",1,"mr-3"],["placeholder","Nh\u1eadp \u0111\u1ecba ch\u1ec9 c\u1ee7a b\u1ea1n ho\u1eb7c ch\u1ecdn t\u1eeb b\u1ea3n \u0111\u1ed3",3,"value"],[1,"flex-grow-1"],["id","map"],["color","primary","fill","outline","expand","block",3,"click"],["id","datetime","presentation","date-time",3,"ionChange","value","formatOptions"],[1,"package-list"],[3,"ionChange","value"],[1,"package-item","mb-3"],["lines","none","detail","false","button","","mode","ios"],["mode","md","justify","space-between",3,"value"],[1,"d-flex","align-items-center"],["src","../../../assets/icon/ion-img/charge-package.svg"],[1,"pl-3"],[4,"ngIf"]],template:function(t,n){if(1&t){const r=e.RV6();e.j41(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",3),e.nrm(3,"ion-back-button",4),e.k0s(),e.j41(4,"ion-title"),e.EFF(5,"Y\xeau c\u1ea7u s\u1ea1c t\u1ea1i nh\xe0"),e.k0s()()(),e.j41(6,"ion-content")(7,"div",5)(8,"ion-list",6)(9,"div",7)(10,"label"),e.EFF(11),e.nI1(12,"translate"),e.k0s(),e.j41(13,"div",8)(14,"ion-item",9),e.nrm(15,"ion-icon",10),e.j41(16,"ion-label",11)(17,"div",12),e.EFF(18),e.k0s()()()()(),e.j41(19,"div",7)(20,"label"),e.EFF(21),e.nI1(22,"translate"),e.k0s(),e.j41(23,"div",8)(24,"ion-item"),e.nrm(25,"ion-icon",13)(26,"ion-datetime-button",14),e.k0s()()(),e.j41(27,"div",7)(28,"label"),e.EFF(29),e.nI1(30,"translate"),e.k0s(),e.j41(31,"div",15)(32,"ion-item",16),e.nrm(33,"ion-img",17),e.j41(34,"ion-label")(35,"div")(36,"small"),e.EFF(37,"G\xf3i s\u1ea1c VIP 1"),e.k0s()(),e.j41(38,"div",18)(39,"b")(40,"b",19),e.EFF(41),e.k0s()(),e.j41(42,"span"),e.EFF(43," / 50kWh"),e.k0s()()(),e.nrm(44,"ion-icon",20),e.k0s()()(),e.j41(45,"div",7)(46,"label"),e.EFF(47,"Ghi ch\xfa"),e.k0s(),e.j41(48,"div",21)(49,"ion-item")(50,"ion-textarea",22),e.bIt("ionChange",function(c){return e.eBV(r),e.Njj(n.changeNote(c))}),e.k0s()()()()()(),e.j41(51,"ion-modal",23,0),e.bIt("didPresent",function(c){return e.eBV(r),e.Njj(n.onModalAddressDidPresent(c))}),e.DNE(53,B,22,7,"ng-template"),e.k0s(),e.j41(54,"ion-modal",24),e.DNE(55,D,1,7,"ng-template"),e.k0s(),e.j41(56,"ion-modal",25,1),e.bIt("didPresent",function(c){return e.eBV(r),e.Njj(n.onModalPackageDidPresent(c))}),e.DNE(58,w,14,4,"ng-template"),e.k0s()(),e.j41(59,"ion-footer",26)(60,"ion-button",27)(61,"ion-label"),e.EFF(62),e.nI1(63,"translate"),e.k0s()()()}2&t&&(e.R7$(3),e.Y8G("defaultHref",n.APP_ROUTE.TABS_SERVICE),e.R7$(8),e.JRh(e.bMT(12,14,"Address")),e.R7$(7),e.JRh(n.dataForm.address),e.R7$(3),e.JRh(e.bMT(22,16,"Time")),e.R7$(8),e.JRh(e.bMT(30,18,"ChargingPackage")),e.R7$(12),e.SpI("",n.APP_FUNC_FormatMoney(5e5),"\u0111"),e.R7$(9),e.Y8G("autoGrow",!0)("value",n.dataForm.note),e.R7$(),e.Y8G("initialBreakpoint",1)("breakpoints",e.lJ4(22,E)),e.R7$(3),e.Y8G("keepContentsMounted",!0),e.R7$(2),e.Y8G("initialBreakpoint",1)("breakpoints",e.lJ4(23,E)),e.R7$(6),e.JRh(e.bMT(63,20,"Pay")))},dependencies:[f.bT,o.Jm,o.QW,o.W9,o.A9,o.K4,o.M0,o.eU,o.iq,o.KW,o.$w,o.uz,o.he,o.nf,o.KO,o.f0,o.nc,o.BC,o.ai,o.Sb,o.Je,o.Gw,o.el,T.D9],styles:[".card-page[_ngcontent-%COMP%]{padding:1rem;border-top-left-radius:1.5rem;border-top-right-radius:1.5rem;background:var(--ion-color-light)}.choice-item[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{--border-width: 1px;--border-color: #eee;--border-radius: .75rem}.choice-item[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-icon[slot=start][_ngcontent-%COMP%]{margin-right:1rem}.choice-item[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-icon[slot=end][_ngcontent-%COMP%]{margin-left:1rem}.package-item[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{--padding-top: .5rem;--padding-bottom: .5rem;--border-width: 1px;--border-color: #eee;--border-radius: .75rem}.package-item[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-img[_ngcontent-%COMP%]{width:4rem}ion-datetime-button[_ngcontent-%COMP%]::part(native){background:transparent}ion-datetime-button[_ngcontent-%COMP%]::part(native):hover{background:var(--ion-color-step-300, var(--ion-background-color-step-300, #edeef0))}#map[_ngcontent-%COMP%]{width:100%;height:100%}"]}),d})()}];let Y=(()=>{var a;class d{}return(a=d).\u0275fac=function(t){return new(t||a)},a.\u0275mod=e.$C({type:a}),a.\u0275inj=e.G2t({imports:[v.iI.forChild(J),v.iI]}),d})();var z=l(3890);let L=(()=>{var a;class d{}return(a=d).\u0275fac=function(t){return new(t||a)},a.\u0275mod=e.$C({type:a}),a.\u0275inj=e.G2t({imports:[f.MD,j.YN,o.bv,Y,z.x]}),d})()}}]);
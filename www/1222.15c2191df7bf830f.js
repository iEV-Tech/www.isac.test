"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[1222],{5454:(V,I,c)=>{c.d(I,{K5:()=>x,X1:()=>l,fy:()=>D,nY:()=>j});var k=c(467),F=c(5972);const l=function(){var f=(0,k.A)(function*(n){var d,u,m,v,h,_,R,b,S,e,$;n.params=n.params||{},(0,F.Ll)({url:"api/RequestService/create",params:{ServiceId:null!==(d=n.params.ServiceId)&&void 0!==d?d:null,ChargePackageId:null!==(u=n.params.ChargePackageId)&&void 0!==u?u:null,RequestAddress:null!==(m=n.params.RequestAddress)&&void 0!==m?m:null,RequestLat:null!==(v=n.params.RequestLat)&&void 0!==v?v:null,RequestLong:null!==(h=n.params.RequestLong)&&void 0!==h?h:null,DestAddress:null!==(_=n.params.DestAddress)&&void 0!==_?_:null,DestLat:null!==(R=n.params.DestLat)&&void 0!==R?R:null,DestLong:null!==(b=n.params.DestLong)&&void 0!==b?b:null,ExecutionDateAsString:null!==(S=n.params.ExecutionDate)&&void 0!==S?S:null,ExecutionTimeAsString:null!==(e=n.params.ExecutionTime)&&void 0!==e?e:null,Notes:null!==($=n.params.Notes)&&void 0!==$?$:null},success:P=>{"function"==typeof n.callback&&n.callback(P.data||null)},error:P=>{var y;"function"==typeof n.callback&&n.callback(null==P||null===(y=P.response)||void 0===y?void 0:y.data),console.error(P)},loading:n.loading,loadingController:n.loadingController})});return function(d){return f.apply(this,arguments)}}(),j=function(){var f=(0,k.A)(function*(n){var d,u;n.params=n.params||{},(0,F.Ll)({url:"api/RequestService/cancel",params:{RequestServiceId:null!==(d=n.params.RequestServiceId)&&void 0!==d?d:null,CancelReason:null!==(u=n.params.CancelReason)&&void 0!==u?u:null},success:m=>{"function"==typeof n.callback&&n.callback(m.data||null)},error:m=>{var v;"function"==typeof n.callback&&n.callback(null==m||null===(v=m.response)||void 0===v?void 0:v.data),console.error(m)},loading:n.loading,loadingController:n.loadingController})});return function(d){return f.apply(this,arguments)}}(),D=function(){var f=(0,k.A)(function*(n){var d,u,m,v;n.params=n.params||{},(0,F.hm)({url:"api/RequestService/get-myhistory",params:{VRequestStatus:null!==(d=n.params.VRequestStatus)&&void 0!==d?d:null,VRequestStatusMulti:null!==(u=n.params.VRequestStatusMulti)&&void 0!==u?u:null,PageNumber:null!==(m=n.params.PageNumber)&&void 0!==m?m:1,PageSize:null!==(v=n.params.PageSize)&&void 0!==v?v:10},success:h=>{"function"==typeof n.callback&&n.callback(h.data||null)},error:h=>{var _;"function"==typeof n.callback&&n.callback(null==h||null===(_=h.response)||void 0===_?void 0:_.data),console.error(h)},loading:n.loading,loadingController:n.loadingController})});return function(d){return f.apply(this,arguments)}}(),x=function(){var f=(0,k.A)(function*(n){var d;n.params=n.params||{},(0,F.hm)({url:`api/RequestService/get-detail/${n.params.RequestServiceId}`,params:{RequestServiceId:null!==(d=n.params.RequestServiceId)&&void 0!==d?d:null},success:u=>{"function"==typeof n.callback&&n.callback(u.data||null)},error:u=>{var m;"function"==typeof n.callback&&n.callback(null==u||null===(m=u.response)||void 0===m?void 0:m.data),console.error(u)},loading:n.loading,loadingController:n.loadingController})});return function(d){return f.apply(this,arguments)}}()},1222:(V,I,c)=>{c.r(I),c.d(I,{ServiceChargingPageModule:()=>te});var k=c(177),F=c(9417),l=c(9465),j=c(7625),D=c(467),x=c(7762),f=c(7586),n=c.n(f),d=c(3801),u=c(574),m=c(4470),v=c(5454),h=c(6539),_=c(2313),R=c(8517),b=c(8650),S=c(8833),e=c(4438),$=c(4842);const P=["inpAddress"],y=()=>({weekday:"long",year:"numeric",month:"2-digit",day:"2-digit"}),L=()=>({hour:"2-digit",minute:"2-digit"}),B=(i,p)=>({date:i,time:p});function q(i,p){if(1&i&&(e.j41(0,"b")(1,"b",27),e.EFF(2),e.k0s()(),e.j41(3,"span"),e.EFF(4),e.k0s()),2&i){let o;const a=e.XpG(2);e.R7$(2),e.Lme("",a.chargingPackage.PowerValue,"",a.chargingPackage.Unit,""),e.R7$(2),e.SpI(" / ",a.APP_FUNC_FormatMoney(null!==(o=a.chargingPackage.AftertaxPrice)&&void 0!==o?o:0),"\u0111")}}function Y(i,p){if(1&i&&(e.j41(0,"b")(1,"b",27),e.EFF(2),e.k0s()(),e.j41(3,"span"),e.EFF(4),e.k0s()),2&i){let o;const a=e.XpG(2);e.R7$(2),e.SpI("",a.APP_FUNC_FormatMoney(null!==(o=a.chargingPackage.AftertaxPrice)&&void 0!==o?o:0),"\u0111"),e.R7$(2),e.Lme(" / ",a.chargingPackage.PowerValue,"",a.chargingPackage.Unit,"")}}function w(i,p){if(1&i&&(e.j41(0,"div")(1,"small"),e.EFF(2),e.k0s()(),e.j41(3,"div",26),e.DNE(4,q,5,3)(5,Y,5,3),e.k0s()),2&i){const o=e.XpG();e.R7$(2),e.JRh(o.chargingPackage.ChargePackName),e.R7$(2),e.vxM(4,o.chargingPackage.IsPackByPower?4:5)}}function J(i,p){if(1&i){const o=e.RV6();e.j41(0,"ion-header")(1,"ion-toolbar")(2,"ion-title",28),e.EFF(3,"Ch\u1ecdn \u0111\u1ecba ch\u1ec9"),e.k0s()()(),e.j41(4,"ion-content",29)(5,"div",30)(6,"div",7)(7,"label"),e.EFF(8),e.nI1(9,"translate"),e.k0s(),e.j41(10,"div",19)(11,"ion-item",6),e.nrm(12,"ion-icon",31)(13,"ion-input",32,2),e.k0s()()(),e.j41(15,"div",33),e.nrm(16,"div",34),e.j41(17,"div",35)(18,"ion-button",36),e.bIt("click",function(t){e.eBV(o);const r=e.XpG();return e.Njj(r.refreshCurrentPosition(t))}),e.nrm(19,"ion-icon",37),e.k0s()()()()(),e.j41(20,"ion-footer",24)(21,"ion-button",38),e.bIt("click",function(){e.eBV(o),e.XpG();const t=e.sdS(44);return e.Njj(null==t?null:t.dismiss())}),e.j41(22,"ion-label"),e.EFF(23),e.nI1(24,"translate"),e.k0s()()()}if(2&i){const o=e.XpG();e.R7$(8),e.JRh(e.bMT(9,3,"Address")),e.R7$(5),e.Y8G("value",o.dataForm.address),e.R7$(10),e.JRh(e.bMT(24,5,"Apply"))}}function z(i,p){if(1&i){const o=e.RV6();e.j41(0,"ion-datetime",39),e.bIt("ionChange",function(t){e.eBV(o);const r=e.XpG();return e.Njj(r.changeDateTime(t))}),e.k0s()}if(2&i){const o=e.XpG();e.Y8G("value",o.dataForm.datetime)("formatOptions",e.l_i(4,B,e.lJ4(2,y),e.lJ4(3,L)))}}function H(i,p){if(1&i&&(e.j41(0,"div")(1,"small"),e.EFF(2),e.k0s()(),e.j41(3,"div",26)(4,"b")(5,"b",27),e.EFF(6),e.k0s()(),e.j41(7,"span"),e.EFF(8),e.k0s()()),2&i){let o;const a=e.XpG().$implicit,t=e.XpG(2);e.R7$(2),e.JRh(a.ChargePackName),e.R7$(4),e.Lme("",a.PowerValue,"",a.Unit,""),e.R7$(2),e.SpI(" / ",t.APP_FUNC_FormatMoney(null!==(o=a.AftertaxPrice)&&void 0!==o?o:0),"\u0111")}}function K(i,p){if(1&i&&(e.j41(0,"div")(1,"small"),e.EFF(2),e.k0s()(),e.j41(3,"div",26)(4,"b")(5,"b",27),e.EFF(6),e.k0s()(),e.j41(7,"span"),e.EFF(8),e.k0s()()),2&i){let o;const a=e.XpG().$implicit,t=e.XpG(2);e.R7$(2),e.JRh(a.ChargePackName),e.R7$(4),e.SpI("",t.APP_FUNC_FormatMoney(null!==(o=a.AftertaxPrice)&&void 0!==o?o:0),"\u0111"),e.R7$(2),e.Lme(" / ",a.PowerValue,"",a.Unit,"")}}function W(i,p){if(1&i&&(e.j41(0,"div",42)(1,"ion-item",43)(2,"ion-radio",44)(3,"div",45)(4,"div"),e.nrm(5,"ion-img",46),e.k0s(),e.j41(6,"div",47),e.DNE(7,H,9,4)(8,K,9,4),e.k0s()()()()()),2&i){const o=p.$implicit;e.R7$(2),e.Y8G("value",o.ChargePackageId),e.R7$(5),e.vxM(7,o.IsPackByPower?7:8)}}function Q(i,p){if(1&i){const o=e.RV6();e.j41(0,"ion-header")(1,"ion-toolbar")(2,"ion-title",28),e.EFF(3,"Ch\u1ecdn g\xf3i s\u1ea1c"),e.k0s()()(),e.j41(4,"ion-content",29)(5,"div",40)(6,"ion-radio-group",41),e.bIt("ionChange",function(t){e.eBV(o);const r=e.XpG();return e.Njj(r.changeChargePackage(t))}),e.Z7z(7,W,9,2,"div",42,e.fX1),e.k0s()()(),e.j41(9,"ion-footer",24)(10,"ion-button",38),e.bIt("click",function(){e.eBV(o),e.XpG();const t=e.sdS(49);return e.Njj(null==t?null:t.dismiss())}),e.j41(11,"ion-label"),e.EFF(12),e.nI1(13,"translate"),e.k0s()()()}if(2&i){const o=e.XpG();e.R7$(6),e.Y8G("value",o.dataForm.ChargePackageId),e.R7$(),e.Dyx(o.chargingPackages),e.R7$(5),e.JRh(e.bMT(13,2,"Apply"))}}const Z=[{path:"",component:(()=>{var i;class p{constructor(a,t,r,s,g,E){var C;this.router=a,this.changeDetectorRef=t,this.animationController=r,this.modalController=s,this.toastController=g,this.loadingController=E,this.APP_ROUTE=S._,this.APP_FUNC_FormatMoney=R.xi,this.APP_FUNC_FormatDate=R.Rv,this.dataForm={datetime:(C=new Date,C.setMinutes(15*(Math.ceil(C.getMinutes()/15)+1)),(0,R.Rv)(C,"YYYY-MM-DDTHH:mm:ss"))},this.chargingPackages=[]}ngOnInit(){(0,h.kU)(),(0,d.fA)({callback:a=>{null!=a&&a.currentAddress&&(this.dataForm.address=null==a?void 0:a.currentAddress)}}),(0,d.Xz)().then(a=>{this.dataForm.pos=a})}changeAdress(a){this.dataForm.address=a.detail.value}changeDateTime(a){this.dataForm.datetime=a.detail.value}changeChargePackage(a){this.dataForm.ChargePackageId=a.detail.value,this.chargingPackage=this.chargingPackages.find(t=>t.ChargePackageId==this.dataForm.ChargePackageId)}changeNote(a){this.dataForm.note=a.detail.value}get submitDisabled(){var a,t;return!(this.dataForm.ChargePackageId&&this.dataForm.address&&null!==(a=this.dataForm.pos)&&void 0!==a&&a.lat&&null!==(t=this.dataForm.pos)&&void 0!==t&&t.lng)}submitCreateService(a){var t,r;(0,v.X1)({params:{ServiceId:_.u9.SAC_VIP_ID,ChargePackageId:this.dataForm.ChargePackageId,RequestAddress:this.dataForm.address,RequestLat:null===(t=this.dataForm.pos)||void 0===t?void 0:t.lat,RequestLong:null===(r=this.dataForm.pos)||void 0===r?void 0:r.lng,ExecutionDate:n()(this.dataForm.datetime).format("YYYY-MM-DD"),ExecutionTime:n()(this.dataForm.datetime).format("HH:mm:ss"),Notes:this.dataForm.note},callback:s=>{null!=s&&s.Succeeded&&s.Data?this.router.navigateByUrl(S._.REQUEST_SERVICE_DETAIL.replace(":id",s.Data),{replaceUrl:!0}):(0,b.cX)(this.toastController,{},s).then(g=>g.present())}})}onModalAddressDidPresent(a){var t=this;const r=function(){var g=(0,D.A)(function*(){var E;let C,T,G,N;C=window.google.maps,T=new C.Map(document.getElementById("map"),{zoom:15,center:t.dataForm.pos,disableDefaultUI:!0});let O=M=>{var A;T.moveCamera({zoom:15,center:M}),null===(A=G)||void 0===A||A.setMap(null),G=new C.Marker({map:T,draggable:!0,animation:C.Animation.DROP,position:M}),C.event.addListener(G,"dragend",U=>{t.requestAddress({lat:U.latLng.lat(),lng:U.latLng.lng()})})};window.createMarker=O,t.dataForm.pos&&O(t.dataForm.pos),N=new C.places.Autocomplete(yield null===(E=t.inpAddressRed)||void 0===E?void 0:E.getInputElement()),N.addListener("place_changed",()=>{var M=N.getPlace(),A={lat:M.geometry.location.lat(),lng:M.geometry.location.lng()};t.dataForm.address=M.formatted_address,t.dataForm.pos=A,O(A)})});return function(){return g.apply(this,arguments)}}();window.initMap=r;let s=document.createElement("script");s.async=!0,s.src="https://maps.google.com/maps/api/js?key=AIzaSyAfx5a8yx5MqeGoTS3ierzoe35TXoX0ZOY&libraries=places&callback=initMap&loading=async",document.head.append(s)}onModalPackageDidPresent(a){(0,u.LE)({loadingController:this.loadingController,params:{ServiceId:_.u9.SAC_VIP_ID,PageNumber:1,PageSize:10},callback:t=>{var r;null!=t&&t.Succeeded?this.chargingPackages=null!==(r=t.Data)&&void 0!==r?r:[]:(0,b.cX)(this.toastController,{},t).then(s=>s.present())}})}refreshCurrentPosition(a){this.getCurrentPosition(t=>{t&&window.createMarker(t)})}getCurrentPosition(a){var t=this;x.L.getCurrentPosition({enableHighAccuracy:!0}).then(function(){var r=(0,D.A)(function*(s){if(s.coords){var g={lat:s.coords.latitude,lng:s.coords.longitude};yield(0,d.fj)({params:g}),t.requestAddress(g),a&&a(g)}else a&&a()});return function(s){return r.apply(this,arguments)}}()).catch(()=>{a&&a()})}requestAddress(a){(0,m.S)({params:{lat:a.lat,lng:a.lng},callback:t=>{var r,s,g;"OK"==(null==t?void 0:t.status)&&(this.dataForm.pos=a,this.dataForm.address=null!==(r=(null!==(s=t.results[0])&&void 0!==s?s:{}).formatted_address)&&void 0!==r?r:null===(g=t.plus_code)||void 0===g?void 0:g.compound_code,this.changeDetectorRef.detectChanges())}})}}return(i=p).\u0275fac=function(a){return new(a||i)(e.rXU(j.Ix),e.rXU(e.gRc),e.rXU(l.Hx),e.rXU(l.W3),e.rXU(l.K_),e.rXU(l.Xi))},i.\u0275cmp=e.VBU({type:i,selectors:[["app-service-charging"]],viewQuery:function(a,t){if(1&a&&e.GBs(P,5),2&a){let r;e.mGM(r=e.lsd())&&(t.inpAddressRed=r.first)}},decls:56,vars:19,consts:[["modalAddress",""],["modalPackage",""],["inpAddress",""],["slot","start"],["icon","../../../assets/icon/ion-icon/arrow-left.svg","text","",3,"defaultHref"],[1,"card-page","min-h-100"],["lines","none"],[1,"form-group"],[1,"choice-item"],["detail","false","button","true","id","present-modal-address"],["slot","start","color","medium","name","location"],[1,"mr-0"],[1,"fs-14"],["slot","start","color","medium","name","calendar",1,"mr-0"],["datetime","datetime"],[1,"package-item"],["detail","false","button","true","id","present-modal-package"],["slot","start","src","../../../assets/icon/ion-img/charge-package.svg"],["slot","end","color","medium","name","chevron-down-outline"],[1,"ion-item-input"],["placeholder","Nh\u1eadp ghi ch\xfa c\u1ee7a b\u1ea1n cho d\u1ecbch v\u1ee5 s\u1ea1c",3,"ionChange","autoGrow","value"],["trigger","present-modal-address",3,"didPresent"],[3,"keepContentsMounted"],["trigger","present-modal-package",3,"didPresent"],[1,"ion-padding"],["color","primary","shape","round","expand","block",3,"click","disabled"],[1,"mt-1"],[1,"text-primary"],[1,"text-center"],[1,"ion-padding-horizontal"],[1,"h-100","d-flex","flex-column"],["slot","start","color","medium","name","location",1,"mr-3"],["clear-input","true","placeholder","Nh\u1eadp \u0111\u1ecba ch\u1ec9 c\u1ee7a b\u1ea1n ho\u1eb7c ch\u1ecdn t\u1eeb b\u1ea3n \u0111\u1ed3",3,"value"],[1,"flex-grow-1","position-relative"],["id","map"],[1,"position-absolute","bottom-0","right-0"],["id","btn-geolocation","color","light",3,"click"],["src","../../../assets/icon/map/geolocation.svg"],["color","primary","fill","outline","expand","block",3,"click"],["id","datetime","presentation","date-time",3,"ionChange","value","formatOptions"],[1,"package-list"],[3,"ionChange","value"],[1,"package-item","mb-3"],["lines","none","detail","false","button","","mode","ios"],["mode","md","justify","space-between",3,"value"],[1,"d-flex","align-items-center"],["src","../../../assets/icon/ion-img/charge-package.svg"],[1,"pl-3"]],template:function(a,t){if(1&a){const r=e.RV6();e.j41(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",3),e.nrm(3,"ion-back-button",4),e.k0s(),e.j41(4,"ion-title"),e.EFF(5,"Y\xeau c\u1ea7u s\u1ea1c t\u1ea1i nh\xe0"),e.k0s()()(),e.j41(6,"ion-content")(7,"div",5)(8,"ion-list",6)(9,"div",7)(10,"label"),e.EFF(11),e.nI1(12,"translate"),e.k0s(),e.j41(13,"div",8)(14,"ion-item",9),e.nrm(15,"ion-icon",10),e.j41(16,"ion-label",11)(17,"div",12),e.EFF(18),e.k0s()()()()(),e.j41(19,"div",7)(20,"label"),e.EFF(21),e.nI1(22,"translate"),e.k0s(),e.j41(23,"div",8)(24,"ion-item"),e.nrm(25,"ion-icon",13)(26,"ion-datetime-button",14),e.k0s()()(),e.j41(27,"div",7)(28,"label"),e.EFF(29),e.nI1(30,"translate"),e.k0s(),e.j41(31,"div",15)(32,"ion-item",16),e.nrm(33,"ion-img",17),e.j41(34,"ion-label"),e.DNE(35,w,6,2),e.k0s(),e.nrm(36,"ion-icon",18),e.k0s()()(),e.j41(37,"div",7)(38,"label"),e.EFF(39,"Ghi ch\xfa"),e.k0s(),e.j41(40,"div",19)(41,"ion-item")(42,"ion-textarea",20),e.bIt("ionChange",function(g){return e.eBV(r),e.Njj(t.changeNote(g))}),e.k0s()()()()()(),e.j41(43,"ion-modal",21,0),e.bIt("didPresent",function(g){return e.eBV(r),e.Njj(t.onModalAddressDidPresent(g))}),e.DNE(45,J,25,7,"ng-template"),e.k0s(),e.j41(46,"ion-modal",22),e.DNE(47,z,1,7,"ng-template"),e.k0s(),e.j41(48,"ion-modal",23,1),e.bIt("didPresent",function(g){return e.eBV(r),e.Njj(t.onModalPackageDidPresent(g))}),e.DNE(50,Q,14,4,"ng-template"),e.k0s()(),e.j41(51,"ion-footer",24)(52,"ion-button",25),e.bIt("click",function(g){return e.eBV(r),e.Njj(t.submitCreateService(g))}),e.j41(53,"ion-label"),e.EFF(54),e.nI1(55,"translate"),e.k0s()()()}2&a&&(e.R7$(3),e.Y8G("defaultHref",t.APP_ROUTE.TABS_SERVICE),e.R7$(8),e.JRh(e.bMT(12,11,"Address")),e.R7$(7),e.JRh(t.dataForm.address),e.R7$(3),e.JRh(e.bMT(22,13,"Time")),e.R7$(8),e.JRh(e.bMT(30,15,"ChargingPackage")),e.R7$(6),e.vxM(35,t.chargingPackage?35:-1),e.R7$(7),e.Y8G("autoGrow",!0)("value",t.dataForm.note),e.R7$(4),e.Y8G("keepContentsMounted",!0),e.R7$(6),e.Y8G("disabled",t.submitDisabled),e.R7$(2),e.JRh(e.bMT(55,17,"Pay")))},dependencies:[l.Jm,l.QW,l.W9,l.A9,l.K4,l.M0,l.eU,l.iq,l.KW,l.$w,l.uz,l.he,l.nf,l.KO,l.f0,l.nc,l.BC,l.ai,l.Sb,l.Je,l.Gw,l.el,$.D9],styles:[".card-page[_ngcontent-%COMP%]{padding:1rem;border-top-left-radius:1.5rem;border-top-right-radius:1.5rem;background:var(--ion-color-light)}.choice-item[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{--border-width: 1px;--border-color: #eee;--border-radius: .75rem}.choice-item[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-icon[slot=start][_ngcontent-%COMP%]{margin-right:1rem}.choice-item[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-icon[slot=end][_ngcontent-%COMP%]{margin-left:1rem}.package-item[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{--padding-top: .5rem;--padding-bottom: .5rem;--border-width: 1px;--border-color: #eee;--border-radius: .75rem}.package-item[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-img[_ngcontent-%COMP%]{width:4rem}ion-datetime-button[_ngcontent-%COMP%]::part(native){background:transparent}ion-datetime-button[_ngcontent-%COMP%]::part(native):hover{background:var(--ion-color-step-300, var(--ion-background-color-step-300, #edeef0))}#map[_ngcontent-%COMP%]{width:100%;height:100%}#btn-geolocation[_ngcontent-%COMP%]{width:3rem;height:3rem;min-width:3rem;min-height:3rem;--padding-top: 0;--padding-start: 0;--padding-end: 0;--padding-bottom: 0;--border-radius: 50%;margin:0 1.5rem 1.5rem 0}#btn-geolocation[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:3rem;color:var(--ion-color-tertiary)}"]}),p})()}];let ee=(()=>{var i;class p{}return(i=p).\u0275fac=function(a){return new(a||i)},i.\u0275mod=e.$C({type:i}),i.\u0275inj=e.G2t({imports:[j.iI.forChild(Z),j.iI]}),p})();var ae=c(3890);let te=(()=>{var i;class p{}return(i=p).\u0275fac=function(a){return new(a||i)},i.\u0275mod=e.$C({type:i}),i.\u0275inj=e.G2t({imports:[k.MD,F.YN,l.bv,ee,ae.x]}),p})()}}]);
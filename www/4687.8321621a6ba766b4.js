"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[4687],{5454:(G,I,o)=>{o.d(I,{K5:()=>A,X1:()=>u,fy:()=>y,nY:()=>D});var q=o(467),b=o(5972);const u=function(){var P=(0,q.A)(function*(t){var s,c,r,m,h,f,e,_,F,M,x;t.params=t.params||{},(0,b.Ll)({url:"api/RequestService/create",params:{ServiceId:null!==(s=t.params.ServiceId)&&void 0!==s?s:null,ChargePackageId:null!==(c=t.params.ChargePackageId)&&void 0!==c?c:null,RequestAddress:null!==(r=t.params.RequestAddress)&&void 0!==r?r:null,RequestLat:null!==(m=t.params.RequestLat)&&void 0!==m?m:null,RequestLong:null!==(h=t.params.RequestLong)&&void 0!==h?h:null,DestAddress:null!==(f=t.params.DestAddress)&&void 0!==f?f:null,DestLat:null!==(e=t.params.DestLat)&&void 0!==e?e:null,DestLong:null!==(_=t.params.DestLong)&&void 0!==_?_:null,ExecutionDateAsString:null!==(F=t.params.ExecutionDate)&&void 0!==F?F:null,ExecutionTimeAsString:null!==(M=t.params.ExecutionTime)&&void 0!==M?M:null,Notes:null!==(x=t.params.Notes)&&void 0!==x?x:null},success:E=>{"function"==typeof t.callback&&t.callback(E.data||null)},error:E=>{var k;"function"==typeof t.callback&&t.callback(null==E||null===(k=E.response)||void 0===k?void 0:k.data),console.error(E)},loading:t.loading,loadingController:t.loadingController})});return function(s){return P.apply(this,arguments)}}(),D=function(){var P=(0,q.A)(function*(t){var s,c;t.params=t.params||{},(0,b.Ll)({url:"api/RequestService/cancel",params:{RequestServiceId:null!==(s=t.params.RequestServiceId)&&void 0!==s?s:null,CancelReason:null!==(c=t.params.CancelReason)&&void 0!==c?c:null},success:r=>{"function"==typeof t.callback&&t.callback(r.data||null)},error:r=>{var m;"function"==typeof t.callback&&t.callback(null==r||null===(m=r.response)||void 0===m?void 0:m.data),console.error(r)},loading:t.loading,loadingController:t.loadingController})});return function(s){return P.apply(this,arguments)}}(),y=function(){var P=(0,q.A)(function*(t){var s,c,r,m;t.params=t.params||{},(0,b.hm)({url:"api/RequestService/get-myhistory",params:{VRequestStatus:null!==(s=t.params.VRequestStatus)&&void 0!==s?s:null,VRequestStatusMulti:null!==(c=t.params.VRequestStatusMulti)&&void 0!==c?c:null,PageNumber:null!==(r=t.params.PageNumber)&&void 0!==r?r:1,PageSize:null!==(m=t.params.PageSize)&&void 0!==m?m:10},success:h=>{"function"==typeof t.callback&&t.callback(h.data||null)},error:h=>{var f;"function"==typeof t.callback&&t.callback(null==h||null===(f=h.response)||void 0===f?void 0:f.data),console.error(h)},loading:t.loading,loadingController:t.loadingController})});return function(s){return P.apply(this,arguments)}}(),A=function(){var P=(0,q.A)(function*(t){var s;t.params=t.params||{},(0,b.hm)({url:`api/RequestService/get-detail/${t.params.RequestServiceId}`,params:{RequestServiceId:null!==(s=t.params.RequestServiceId)&&void 0!==s?s:null},success:c=>{"function"==typeof t.callback&&t.callback(c.data||null)},error:c=>{var r;"function"==typeof t.callback&&t.callback(null==c||null===(r=c.response)||void 0===r?void 0:r.data),console.error(c)},loading:t.loading,loadingController:t.loadingController})});return function(s){return P.apply(this,arguments)}}()},4687:(G,I,o)=>{o.r(I),o.d(I,{RequestServiceDetailPageModule:()=>X});var q=o(177),b=o(9417),u=o(9465),D=o(7625),y=o(467),A=o(7762),P=o(5312),t=o(3801),s=o(5454),c=o(6539),r=o(8517),m=o(8650),h=o(3588),f=o(8833),e=o(4438),_=o(4842);function F(l,R){if(1&l){const p=e.RV6();e.j41(0,"ion-button",42),e.bIt("click",function(){e.eBV(p);const a=e.XpG(2);return e.Njj(a.cancelService())}),e.j41(1,"ion-label"),e.EFF(2,"H\u1ee7y d\u1ecbch v\u1ee5"),e.k0s()()}}function M(l,R){if(1&l){const p=e.RV6();e.j41(0,"ion-content")(1,"ion-refresher",3),e.bIt("ionRefresh",function(a){e.eBV(p);const n=e.XpG();return e.Njj(n.onIonRefresher(a))}),e.nrm(2,"ion-refresher-content"),e.k0s(),e.j41(3,"div",4)(4,"div",5)(5,"div",6)(6,"div",7)(7,"h4",8)(8,"span"),e.EFF(9),e.k0s()(),e.j41(10,"div",9)(11,"small"),e.EFF(12),e.k0s()(),e.nrm(13,"hr",10),e.j41(14,"div",11)(15,"span",12)(16,"small"),e.EFF(17),e.nI1(18,"translate"),e.j41(19,"b"),e.EFF(20),e.k0s()()(),e.j41(21,"span",13)(22,"small"),e.EFF(23),e.nI1(24,"translate"),e.j41(25,"b"),e.EFF(26),e.nI1(27,"translate"),e.k0s()()()()(),e.nrm(28,"div",14),e.k0s()()(),e.j41(29,"div",15)(30,"div",16)(31,"div",17)(32,"div",18)(33,"div",19),e.nrm(34,"div",20),e.k0s()()(),e.j41(35,"div",21)(36,"div",22)(37,"div",23)(38,"div",24)(39,"div",25)(40,"ion-chip",26),e.nrm(41,"ion-icon",27),e.j41(42,"ion-label"),e.EFF(43),e.k0s()()()()(),e.j41(44,"div",28)(45,"div",29)(46,"div",30)(47,"div"),e.nrm(48,"ion-img",31),e.k0s(),e.j41(49,"div",32)(50,"div",33),e.EFF(51),e.nI1(52,"translate"),e.k0s(),e.j41(53,"div")(54,"strong"),e.EFF(55),e.k0s(),e.j41(56,"small"),e.EFF(57),e.k0s()()()()(),e.j41(58,"div",34)(59,"h6",35)(60,"b"),e.EFF(61,"Th\u1eddi gian \u0111\u1eb7t l\u1ecbch"),e.k0s()(),e.nrm(62,"hr",36),e.j41(63,"div")(64,"b",37),e.EFF(65),e.k0s()()(),e.j41(66,"div",34)(67,"h6",35)(68,"b"),e.EFF(69,"Th\u1eddi gian th\u1ef1c hi\u1ec7n (d\u1ef1 ki\u1ebfn)"),e.k0s()(),e.nrm(70,"hr",36),e.j41(71,"div")(72,"b",37),e.EFF(73),e.k0s()()()()()()()(),e.j41(74,"div",38)(75,"div",6)(76,"div",17)(77,"div",39)(78,"h6",35)(79,"b"),e.EFF(80,"G\u1eedi y\xeau c\u1ea7u b\u1edfi"),e.k0s()(),e.nrm(81,"hr",36),e.j41(82,"div")(83,"b",37),e.EFF(84),e.k0s()()()(),e.j41(85,"div",17)(86,"div",39)(87,"h6",35)(88,"b"),e.EFF(89,"Nh\xe2n vi\xean ti\u1ebfp nh\u1eadn d\u1ecbch v\u1ee5"),e.k0s()(),e.nrm(90,"hr",36),e.j41(91,"div")(92,"b",37),e.EFF(93,"Middle Kien"),e.k0s()()()()()()(),e.j41(94,"ion-footer",40)(95,"div",41),e.DNE(96,F,3,0),e.k0s()()}if(2&l){let p,i,a;const n=e.XpG();e.R7$(9),e.JRh(null==n.requestService?null:n.requestService.ServiceName),e.R7$(3),e.JRh(null==n.requestService?null:n.requestService.RequestAddress),e.R7$(5),e.SpI("",e.bMT(18,19,"YourWay")," "),e.R7$(3),e.SpI("",n.getDistance2CL()," km"),e.R7$(3),e.SpI("",e.bMT(24,21,"EstimatedTime")," "),e.R7$(3),e.Lme("",n.getTime2CL()," ",e.bMT(27,23,"Minute"),""),e.R7$(10),e.HbH("border-"+n.APP_FUNC_GetColor_VRequestStatus(null==n.requestService?null:n.requestService.VRequestStatus)),e.R7$(4),e.Y8G("color",n.APP_FUNC_GetColor_VRequestStatus(null==n.requestService?null:n.requestService.VRequestStatus)),e.R7$(3),e.JRh(null==n.requestService?null:n.requestService.VRequestStatusName),e.R7$(8),e.JRh(e.bMT(52,25,"ChargingPackage")),e.R7$(4),e.SpI("",n.APP_FUNC_FormatMoney(null!==(p=null==n.requestService?null:n.requestService.PayValue)&&void 0!==p?p:0),"\u0111"),e.R7$(2),e.Lme(" /",null==n.requestService?null:n.requestService.PowerValue,"",null!==(i=null==n.requestService?null:n.requestService.Unit)&&void 0!==i?i:"kWh",""),e.R7$(8),e.JRh(n.APP_FUNC_FormatDate(null==n.requestService?null:n.requestService.RequestDate)),e.R7$(8),e.JRh(n.APP_FUNC_FormatDate((null==n.requestService?null:n.requestService.ExecutionDate)+" "+(null==n.requestService?null:n.requestService.ExecutionTime))),e.R7$(11),e.JRh(null==n.requestService?null:n.requestService.CustomerFullname),e.R7$(12),e.vxM(96,(a=null==n.requestService?null:n.requestService.VRequestStatus)===n.v_request_status.YeuCauDichVu?96:-1)}}const E=[{path:"",component:(()=>{var l;class R{constructor(i,a,n,v,d,S){var C;this.router=i,this.activatedRoute=a,this.modalController=n,this.animationController=v,this.toastController=d,this.loadingController=S,this.APP_ROUTE=f._,this.APP_FUNC_FormatDate=r.Rv,this.APP_FUNC_FormatMoney=r.xi,this.APP_FUNC_GetColor_VRequestStatus=r.rZ,this.v_request_status=h.Gz;let g=null!==(C=a.snapshot.params.id)&&void 0!==C?C:"";g&&(this.RequestServiceId=parseFloat(g))}ngOnInit(){var i=this;this.IsOnInit=!0,(0,y.A)(function*(){(yield(0,c.kU)())&&i.refreshData(()=>{i.initMap()})})()}ionViewDidEnter(){this.IsOnInit?this.IsOnInit=!1:this.refreshData()}onIonRefresher(i){this.refreshData(()=>{i.target.complete()})}refreshData(i){var a=this;return(0,y.A)(function*(){(0,s.K5)({params:{RequestServiceId:a.RequestServiceId},callback:n=>{var v,d,S,C,g;a.response=n,null!=n&&n.Succeeded?(a.requestService=null!==(v=n.Data)&&void 0!==v?v:{},a.customerPosition={lat:null!==(d=null===(S=a.requestService)||void 0===S?void 0:S.RequestLat)&&void 0!==d?d:0,lng:null!==(C=null===(g=a.requestService)||void 0===g?void 0:g.RequestLong)&&void 0!==C?C:0}):(0,m.cX)(a.toastController,{},n).then($=>{$.onDidDismiss().then(j=>{a.router.navigateByUrl(f._.REQUEST_SERVICE)}),$.present()}),i&&i()}})})()}initMap(){var i=this;const a=function(){var v=(0,y.A)(function*(){let d,S,g=window.google.maps;const{Map:$}=yield g.importLibrary("maps"),{AdvancedMarkerElement:j}=yield g.importLibrary("marker");let T=new $(document.getElementById("map"),{zoom:12,center:i.customerPosition,disableDefaultUI:!0,mapId:"DEMO_MAP_ID"});i.customerPosition&&(d=new j({map:T,position:i.customerPosition,title:"V\u1ecb tr\xed kh\xe1ch h\xe0ng \u0111\u1eb7t l\u1ecbch"})),i.employePosition&&(S=new j({map:T,position:i.employePosition,title:"V\u1ecb tr\xed nh\xe2n vi\xean iSAC"})),i.customerPosition&&i.employePosition&&setTimeout(()=>{var L,O,U,V,w=g.DirectionsService(),N=g.DirectionsRenderer();N.setMap(T),w.route({origin:g.LatLng(null===(L=i.employePosition)||void 0===L?void 0:L.lat,null===(O=i.employePosition)||void 0===O?void 0:O.lng),destination:g.LatLng(null===(U=i.customerPosition)||void 0===U?void 0:U.lat,null===(V=i.customerPosition)||void 0===V?void 0:V.lng),travelMode:"DRIVING"},function(H,J){"OK"==J&&N.setDirections(H)})},1e3)});return function(){return v.apply(this,arguments)}}();window.initMap=a;let n=document.createElement("script");n.async=!0,n.src=`https://maps.google.com/maps/api/js?key=${P.c.apiKey}&loading=async&libraries=places,marker,routes&callback=initMap`,document.head.append(n)}refreshCurrentPosition(i){var a=this;return(0,y.A)(function*(){let n=()=>{(0,t.Xz)().then(v=>{a.employePosition=v,i&&i()})};A.L.getCurrentPosition({enableHighAccuracy:!0}).then(function(){var v=(0,y.A)(function*(d){if(d.coords){var S={lat:d.coords.latitude,lng:d.coords.longitude};yield(0,t.fj)({params:S})}n()});return function(d){return v.apply(this,arguments)}}()).catch(()=>{n()})})()}navigateByUrl(i){this.router.navigateByUrl(i)}getDistance2CL(){return this.employePosition&&this.customerPosition?(0,r.Rw)((0,r.GH)(this.employePosition,this.customerPosition),10):0}getTime2CL(){return this.employePosition&&this.customerPosition?(0,r.Rw)(3*(0,r.GH)(this.employePosition,this.customerPosition),1):0}cancelService(){var i=this;return(0,y.A)(function*(){var a;(0,m.Yy)(i.modalController,i.animationController,{selectedId:null===(a=i.requestService)||void 0===a?void 0:a.RequestServiceId,message:{TitleConfirm:"H\u1ee7y d\u1ecbch v\u1ee5",TextConfirm:"Confirm"},fnConfirm:n=>{(0,s.nY)({loadingController:i.loadingController,params:{RequestServiceId:n},callback:v=>{null!=v&&v.Succeeded?(0,m.cX)(i.toastController,{},v).then(d=>{d.onDidDismiss().then(S=>{i.router.navigateByUrl(f._.REQUEST_SERVICE)}),d.present()}):(0,m.cX)(i.toastController,{},v).then(d=>d.present())}})}})})()}}return(l=R).\u0275fac=function(i){return new(i||l)(e.rXU(D.Ix),e.rXU(D.nX),e.rXU(u.W3),e.rXU(u.Hx),e.rXU(u.K_),e.rXU(u.Xi))},l.\u0275cmp=e.VBU({type:l,selectors:[["app-request-service-detail"]],decls:8,vars:5,consts:[["color","primary"],["slot","start"],["icon","../../../assets/icon/ion-icon/arrow-left.svg","text","",3,"defaultHref"],["slot","fixed",3,"ionRefresh"],[1,"bg-primary"],[1,"container","card-location","text-white","pb-2"],[1,"row"],[1,"col-auto"],[1,"d-flex","align-items-center","my-0"],[1,"d-flex","align-items-center","mt-1"],[1,"border-gray","mt-2","mb-1"],[1,"text-right","text-nowrap"],[1,"mr-4"],[1,"d-inline-block"],[1,"col","p-0"],[1,"container","pt-3"],[1,"row","align-items-stretch"],[1,"col-12","col-lg-6","mb-3"],[1,"embed-responsive","embed-responsive-16by9"],[1,"embed-responsive-item"],["id","map"],[1,"col-12","col-lg-6","mb-3","d-flex","flex-column"],[1,"flex-grow-1","card-day","d-flex","flex-column","rounded","bg-white","border","mt-3"],[1,"flex-grow-1"],[1,"d-flex","justify-content-center"],[1,"card-status"],[1,"no-opacity",3,"color"],["src","../../../assets/icon/tabs/service.svg"],[1,"p-2"],[1,"card-package","rounded","border","d-flex","align-items-stretch","p-2"],[1,"d-flex","align-items-center"],["src","../../../assets/icon/ion-img/charge-package.svg"],[1,"align-self-stretch","pl-2","d-flex","flex-column","justify-content-between"],[1,"text-muted","fs-3"],[1,"card-day","bg-white","p-2","mt-3"],[1,"m-0"],[1,"border-dashed","mt-2","mb-3"],[1,"text-medium"],[1,"container","mb-3"],[1,"card-day","rounded","bg-white","p-3"],[1,"ion-padding-vertical"],[1,"container"],["color","danger","shape","round","expand","block",3,"click"]],template:function(i,a){1&i&&(e.j41(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-buttons",1),e.nrm(3,"ion-back-button",2),e.k0s(),e.j41(4,"ion-title"),e.EFF(5),e.nI1(6,"translate"),e.k0s()()(),e.DNE(7,M,97,27)),2&i&&(e.R7$(3),e.Y8G("defaultHref",a.APP_ROUTE.TABS_SERVICE),e.R7$(2),e.JRh(e.bMT(6,3,"ServiceDetail")),e.R7$(2),e.vxM(7,a.response?7:-1))},dependencies:[u.Jm,u.QW,u.ZB,u.W9,u.M0,u.eU,u.iq,u.KW,u.he,u.To,u.Ki,u.BC,u.ai,u.el,_.D9],styles:[".card-location[_ngcontent-%COMP%]{position:relative;z-index:1;background-image:url(bg-charging-location.24bf138423cec5f5.svg);background-repeat:no-repeat;background-position:top center;background-size:auto 100%}.card-location.rounded[_ngcontent-%COMP%]{border-top-left-radius:1.5rem!important;border-top-right-radius:1.5rem!important}.card-location[_ngcontent-%COMP%]   ion-thumbnail[_ngcontent-%COMP%]{--size: 5rem;--border-radius: .5rem;border:1px solid var(--ion-color-light)}.card-location[_ngcontent-%COMP%]   .icon-w24[_ngcontent-%COMP%]{display:inline-block;width:24px}.card-location[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:1.5rem}#map[_ngcontent-%COMP%]{width:100%;height:100%}.card-day.rounded[_ngcontent-%COMP%], .card-day.rounded[_ngcontent-%COMP%]   .rounded[_ngcontent-%COMP%]{border-radius:1rem!important}.card-day[_ngcontent-%COMP%]   .card-status[_ngcontent-%COMP%]{margin-top:-1rem}.card-day[_ngcontent-%COMP%]   .card-package[_ngcontent-%COMP%]   ion-img[_ngcontent-%COMP%]{width:3rem}"]}),R})()}];let k=(()=>{var l;class R{}return(l=R).\u0275fac=function(i){return new(i||l)},l.\u0275mod=e.$C({type:l}),l.\u0275inj=e.G2t({imports:[D.iI.forChild(E),D.iI]}),R})();var B=o(3890);let X=(()=>{var l;class R{}return(l=R).\u0275fac=function(i){return new(i||l)},l.\u0275mod=e.$C({type:l}),l.\u0275inj=e.G2t({imports:[q.MD,b.YN,u.bv,k,B.x]}),R})()}}]);
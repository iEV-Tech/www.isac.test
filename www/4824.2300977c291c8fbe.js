"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[4824],{4824:(ve,I,g)=>{g.r(I),g.d(I,{ServiceTowingRescuePageModule:()=>he});var D=g(177),A=g(9417),u=g(791),k=g(7625),C=g(467),y=g(7762),b=g(3801),G=g(574),$=g(4470),V=g(5454),N=g(6539),M=g(2313),P=g(8517),S=g(8650),x=g(8833),B=g(4076),T=g(5883),j=g(3588),W=g(9946),e=g(4438),X=g(4842);const O=["inpAddress"];function U(a,s){1&a&&(e.j41(0,"ion-avatar",6),e.nrm(1,"img",23),e.k0s(),e.j41(2,"ion-label"),e.EFF(3,"C\u1ee9u h\u1ed9 xe VIP"),e.k0s())}function Y(a,s){1&a&&(e.j41(0,"ion-avatar",6),e.nrm(1,"img",24),e.k0s(),e.j41(2,"ion-label"),e.EFF(3,"C\u1ee9u h\u1ed9 xe th\u01b0\u1eddng"),e.k0s())}function H(a,s){if(1&a){const i=e.RV6();e.j41(0,"div",13)(1,"label"),e.EFF(2),e.nI1(3,"translate"),e.k0s(),e.j41(4,"div",21)(5,"ion-item",15),e.bIt("click",function(){e.eBV(i),e.XpG(2);const n=e.sdS(21);return e.Njj(null==n?null:n.present())}),e.DNE(6,U,4,0)(7,Y,4,0),e.nrm(8,"ion-icon",22),e.k0s()()()}if(2&a){const i=e.XpG(2);e.R7$(2),e.JRh(e.bMT(3,2,"Vehicle")),e.R7$(4),e.vxM(6,i.dataForm.IsVehicleVipCharging?6:7)}}function J(a,s){if(1&a&&(e.j41(0,"ion-avatar",6),e.nrm(1,"img",26),e.k0s(),e.j41(2,"ion-label")(3,"div",27),e.EFF(4),e.k0s(),e.j41(5,"div",28),e.EFF(6),e.nI1(7,"translate"),e.k0s()()),2&a){let i;const t=e.XpG(3);e.R7$(4),e.SpI("",t.APP_FUNC_FormatMoney(null!==(i=null==t.wallet?null:t.wallet.WalletBalance)&&void 0!==i?i:0),"\u0111"),e.R7$(2),e.Lme("",e.bMT(7,3,"VehicleVipWallet"),": ",null==t.wallet?null:t.wallet.VehicleNumber,"")}}function L(a,s){if(1&a&&(e.j41(0,"ion-avatar",6),e.nrm(1,"img",29),e.k0s(),e.j41(2,"ion-label")(3,"div"),e.EFF(4),e.k0s(),e.j41(5,"div",30),e.EFF(6),e.nI1(7,"translate"),e.k0s()()),2&a){let i;const t=e.XpG(3);e.R7$(4),e.SpI("",t.APP_FUNC_FormatMoney(null!==(i=null==t.wallet?null:t.wallet.WalletBalance)&&void 0!==i?i:0),"\u0111"),e.R7$(2),e.JRh(e.bMT(7,2,"PersonalWallet"))}}function z(a,s){if(1&a){const i=e.RV6();e.j41(0,"div",13)(1,"label"),e.EFF(2,"V\xed thanh to\xe1n"),e.k0s(),e.j41(3,"div",25)(4,"ion-item",15),e.bIt("click",function(){e.eBV(i),e.XpG(2);const n=e.sdS(18);return e.Njj(null==n?null:n.present())}),e.DNE(5,J,8,5)(6,L,8,4),e.nrm(7,"ion-icon",22),e.k0s()()()}if(2&a){const i=e.XpG(2);e.R7$(5),e.vxM(5,null!=i.wallet&&i.wallet.VehicleVipId?5:null!=i.wallet&&i.wallet.WalletId?6:-1)}}function K(a,s){if(1&a&&(e.j41(0,"div",13)(1,"label"),e.EFF(2,"V\xed thanh to\xe1n"),e.k0s(),e.j41(3,"div",25)(4,"ion-item")(5,"ion-avatar",6),e.nrm(6,"img",29),e.k0s(),e.j41(7,"ion-label"),e.EFF(8),e.k0s()()()()),2&a){let i;const t=e.XpG(2);e.R7$(8),e.SpI("",t.APP_FUNC_FormatMoney(null!==(i=null==t.wallet?null:t.wallet.WalletBalance)&&void 0!==i?i:0),"\u0111")}}function Z(a,s){if(1&a){const i=e.RV6();e.j41(0,"div",8)(1,"ion-list",12)(2,"div",13)(3,"label"),e.EFF(4,"\u0110\u1ecba \u0111i\u1ec3m \u0111\xf3n"),e.k0s(),e.j41(5,"div",14)(6,"ion-item",15),e.bIt("click",function(){e.eBV(i),e.XpG();const n=e.sdS(9);return e.Njj(null==n?null:n.present())}),e.j41(7,"ion-label",16)(8,"div",17),e.EFF(9),e.k0s()(),e.nrm(10,"ion-icon",18),e.k0s()()(),e.j41(11,"div",13)(12,"label"),e.EFF(13,"\u0110\u1ecba \u0111i\u1ec3m tr\u1ea3"),e.k0s(),e.j41(14,"div",14)(15,"ion-item",15),e.bIt("click",function(){e.eBV(i),e.XpG();const n=e.sdS(12);return e.Njj(null==n?null:n.present())}),e.j41(16,"ion-label",16)(17,"div",17),e.EFF(18),e.k0s()(),e.nrm(19,"ion-icon",18),e.k0s()()(),e.DNE(20,H,9,4,"div",13)(21,z,8,1,"div",13)(22,K,9,1),e.j41(23,"div",13)(24,"label"),e.EFF(25,"Ghi ch\xfa"),e.k0s(),e.j41(26,"div",19)(27,"ion-item")(28,"ion-textarea",20),e.bIt("ionChange",function(n){e.eBV(i);const o=e.XpG();return e.Njj(o.changeNote(n))}),e.k0s()()()()()()}if(2&a){const i=e.XpG();e.R7$(9),e.JRh(i.dataForm.address),e.R7$(9),e.JRh(i.dataForm.address2),e.R7$(2),e.vxM(20,i.user.VUserClassify==i.v_user_classify.TaiKhoanVIP?20:-1),e.R7$(),e.vxM(21,i.user.VUserClassify==i.v_user_classify.TaiKhoanVIP?21:22),e.R7$(7),e.Y8G("autoGrow",!0)("value",i.dataForm.note)}}function Q(a,s){1&a&&e.nrm(0,"ion-spinner",40)}function q(a,s){1&a&&e.nrm(0,"ion-icon",44)}function ee(a,s){if(1&a){const i=e.RV6();e.j41(0,"ion-header")(1,"ion-toolbar")(2,"ion-title",31),e.EFF(3,"Ch\u1ecdn \u0111\u1ecba ch\u1ec9"),e.k0s()()(),e.j41(4,"ion-content",32)(5,"div",33)(6,"div",13)(7,"label"),e.EFF(8),e.nI1(9,"translate"),e.k0s(),e.j41(10,"div",19)(11,"ion-item",12),e.nrm(12,"ion-icon",34)(13,"ion-input",35,5),e.k0s()()(),e.j41(15,"div",36),e.nrm(16,"div",37),e.j41(17,"div",38)(18,"ion-button",39),e.bIt("click",function(n){e.eBV(i);const o=e.XpG();return e.Njj(o.refreshCurrentPosition(n))}),e.DNE(19,Q,1,0,"ion-spinner",40)(20,q,1,0),e.k0s()()()()(),e.j41(21,"ion-footer",10)(22,"div",41)(23,"ion-button",42),e.bIt("click",function(){e.eBV(i),e.XpG();const n=e.sdS(9);return e.Njj(null==n?null:n.dismiss())}),e.j41(24,"ion-label"),e.EFF(25),e.nI1(26,"translate"),e.k0s()(),e.j41(27,"ion-button",43),e.bIt("click",function(){e.eBV(i);const n=e.XpG(),o=e.sdS(9);return e.Njj(n.confirmAddress(o))}),e.j41(28,"ion-label"),e.EFF(29),e.nI1(30,"translate"),e.k0s()()()()}if(2&a){const i=e.XpG();e.R7$(8),e.JRh(e.bMT(9,5,"Address")),e.R7$(5),e.Y8G("value",i.dataForm.address_temp),e.R7$(6),e.vxM(19,i.loadingGeolocation?19:20),e.R7$(6),e.JRh(e.bMT(26,7,"Cancel")),e.R7$(4),e.JRh(e.bMT(30,9,"Apply"))}}function te(a,s){1&a&&e.nrm(0,"ion-spinner",40)}function ne(a,s){1&a&&e.nrm(0,"ion-icon",44)}function ie(a,s){if(1&a){const i=e.RV6();e.j41(0,"ion-header")(1,"ion-toolbar")(2,"ion-title",31),e.EFF(3,"Ch\u1ecdn \u0111\u1ecba ch\u1ec9 t\u1edbi"),e.k0s()()(),e.j41(4,"ion-content",32)(5,"div",33)(6,"div",13)(7,"label"),e.EFF(8),e.nI1(9,"translate"),e.k0s(),e.j41(10,"div",19)(11,"ion-item",12),e.nrm(12,"ion-icon",34)(13,"ion-input",35,5),e.k0s()()(),e.j41(15,"div",36),e.nrm(16,"div",37),e.j41(17,"div",38)(18,"ion-button",39),e.bIt("click",function(n){e.eBV(i);const o=e.XpG();return e.Njj(o.refreshCurrentPosition(n))}),e.DNE(19,te,1,0,"ion-spinner",40)(20,ne,1,0),e.k0s()()()()(),e.j41(21,"ion-footer",10)(22,"div",41)(23,"ion-button",42),e.bIt("click",function(){e.eBV(i),e.XpG();const n=e.sdS(12);return e.Njj(null==n?null:n.dismiss())}),e.j41(24,"ion-label"),e.EFF(25),e.nI1(26,"translate"),e.k0s()(),e.j41(27,"ion-button",43),e.bIt("click",function(){e.eBV(i);const n=e.XpG(),o=e.sdS(12);return e.Njj(n.confirmAddress2(o))}),e.j41(28,"ion-label"),e.EFF(29),e.nI1(30,"translate"),e.k0s()()()()}if(2&a){const i=e.XpG();e.R7$(8),e.JRh(e.bMT(9,5,"AddressTo")),e.R7$(5),e.Y8G("value",i.dataForm.address2_temp),e.R7$(6),e.vxM(19,i.loadingGeolocation?19:20),e.R7$(6),e.JRh(e.bMT(26,7,"Cancel")),e.R7$(4),e.JRh(e.bMT(30,9,"Apply"))}}function ae(a,s){if(1&a&&(e.j41(0,"div")(1,"small"),e.EFF(2),e.k0s()(),e.j41(3,"div",53)(4,"b")(5,"b",54),e.EFF(6),e.k0s()(),e.j41(7,"span"),e.EFF(8),e.k0s()()),2&a){let i;const t=e.XpG().$implicit,n=e.XpG(2);e.R7$(2),e.JRh(t.ChargePackName),e.R7$(4),e.Lme("",t.PowerValue,"",t.Unit,""),e.R7$(2),e.SpI(" / ",n.APP_FUNC_FormatMoney(null!==(i=t.AftertaxPrice)&&void 0!==i?i:0),"\u0111")}}function oe(a,s){if(1&a&&(e.j41(0,"div")(1,"small"),e.EFF(2),e.k0s()(),e.j41(3,"div",53)(4,"b")(5,"b",54),e.EFF(6),e.k0s()(),e.j41(7,"span"),e.EFF(8),e.k0s()()),2&a){let i;const t=e.XpG().$implicit,n=e.XpG(2);e.R7$(2),e.JRh(t.ChargePackName),e.R7$(4),e.SpI("",n.APP_FUNC_FormatMoney(null!==(i=t.AftertaxPrice)&&void 0!==i?i:0),"\u0111"),e.R7$(2),e.Lme(" / ",t.PowerValue,"",t.Unit,"")}}function le(a,s){if(1&a&&(e.j41(0,"div",47)(1,"ion-item",48)(2,"ion-radio",49)(3,"div",50)(4,"div"),e.nrm(5,"ion-img",51),e.k0s(),e.j41(6,"div",52),e.DNE(7,ae,9,4)(8,oe,9,4),e.k0s()()()()()),2&a){const i=s.$implicit;e.R7$(2),e.Y8G("value",i.ChargePackageId),e.R7$(5),e.vxM(7,i.IsPackByPower?7:8)}}function re(a,s){if(1&a){const i=e.RV6();e.j41(0,"ion-header")(1,"ion-toolbar")(2,"ion-title",31),e.EFF(3,"Ch\u1ecdn g\xf3i s\u1ea1c"),e.k0s()()(),e.j41(4,"ion-content",32)(5,"div",45)(6,"ion-radio-group",46),e.bIt("ionChange",function(n){e.eBV(i);const o=e.XpG();return e.Njj(o.changeChargePackage(n))}),e.Z7z(7,le,9,2,"div",47,e.fX1),e.k0s()()(),e.j41(9,"ion-footer",10)(10,"div",41)(11,"ion-button",42),e.bIt("click",function(){e.eBV(i),e.XpG();const n=e.sdS(15);return e.Njj(null==n?null:n.dismiss())}),e.j41(12,"ion-label"),e.EFF(13),e.nI1(14,"translate"),e.k0s()(),e.j41(15,"ion-button",43),e.bIt("click",function(){e.eBV(i);const n=e.XpG(),o=e.sdS(15);return e.Njj(n.confirmChargePackage(o))}),e.j41(16,"ion-label"),e.EFF(17),e.nI1(18,"translate"),e.k0s()()()()}if(2&a){const i=e.XpG();e.R7$(6),e.Y8G("value",i.dataForm.ChargePackageId),e.R7$(),e.Dyx(i.chargingPackages),e.R7$(6),e.JRh(e.bMT(14,3,"Cancel")),e.R7$(4),e.JRh(e.bMT(18,5,"Apply"))}}function se(a,s){if(1&a&&(e.j41(0,"ion-avatar",6),e.nrm(1,"img",26),e.k0s(),e.j41(2,"ion-radio",49)(3,"ion-label")(4,"div",27),e.EFF(5),e.k0s(),e.j41(6,"div",28),e.EFF(7),e.nI1(8,"translate"),e.k0s()()()),2&a){let i;const t=e.XpG().$implicit,n=e.XpG(2);e.R7$(2),e.Y8G("value",t.WalletRandomId),e.R7$(3),e.SpI("",n.APP_FUNC_FormatMoney(null!==(i=null==t?null:t.WalletBalance)&&void 0!==i?i:0),"\u0111"),e.R7$(2),e.Lme("",e.bMT(8,4,"VehicleVipWallet"),": ",null==t?null:t.VehicleNumber,"")}}function de(a,s){if(1&a&&(e.j41(0,"ion-avatar",6),e.nrm(1,"img",29),e.k0s(),e.j41(2,"ion-radio",49)(3,"ion-label")(4,"div"),e.EFF(5),e.k0s(),e.j41(6,"div",30),e.EFF(7),e.nI1(8,"translate"),e.k0s()()()),2&a){let i;const t=e.XpG().$implicit,n=e.XpG(2);e.R7$(2),e.Y8G("value",t.WalletRandomId),e.R7$(3),e.SpI("",n.APP_FUNC_FormatMoney(null!==(i=null==t?null:t.WalletBalance)&&void 0!==i?i:0),"\u0111"),e.R7$(2),e.JRh(e.bMT(8,3,"PersonalWallet"))}}function ce(a,s){if(1&a&&(e.j41(0,"div",55)(1,"ion-item",48),e.DNE(2,se,9,6)(3,de,9,5),e.k0s()()),2&a){const i=s.$implicit;e.R7$(2),e.vxM(2,i.IsVehicleVipWallet?2:3)}}function me(a,s){if(1&a){const i=e.RV6();e.j41(0,"ion-header")(1,"ion-toolbar")(2,"ion-title",31),e.EFF(3,"Ch\u1ecdn V\xed thanh to\xe1n"),e.k0s()()(),e.j41(4,"ion-content",32)(5,"ion-radio-group",46),e.bIt("ionChange",function(n){e.eBV(i);const o=e.XpG();return e.Njj(o.changeWallet(n))}),e.Z7z(6,ce,4,1,"div",55,e.fX1),e.k0s()(),e.j41(8,"ion-footer",10)(9,"div",41)(10,"ion-button",42),e.bIt("click",function(){e.eBV(i),e.XpG();const n=e.sdS(18);return e.Njj(null==n?null:n.dismiss())}),e.j41(11,"ion-label"),e.EFF(12),e.nI1(13,"translate"),e.k0s()(),e.j41(14,"ion-button",43),e.bIt("click",function(){e.eBV(i);const n=e.XpG(),o=e.sdS(18);return e.Njj(n.confirmWallet(o))}),e.j41(15,"ion-label"),e.EFF(16),e.nI1(17,"translate"),e.k0s()()()()}if(2&a){const i=e.XpG();e.R7$(5),e.Y8G("value",i.dataForm.WalletRandomId),e.R7$(),e.Dyx(i.wallets),e.R7$(6),e.JRh(e.bMT(13,3,"Cancel")),e.R7$(4),e.JRh(e.bMT(17,5,"Apply"))}}function ue(a,s){if(1&a){const i=e.RV6();e.j41(0,"ion-header")(1,"ion-toolbar")(2,"ion-title",31),e.EFF(3,"Ch\u1ecdn xe"),e.k0s()()(),e.j41(4,"ion-content",32)(5,"ion-radio-group",46),e.bIt("ionChange",function(n){e.eBV(i);const o=e.XpG();return e.Njj(o.changeVehicleVipCharging(n))}),e.j41(6,"div",56)(7,"ion-item",48)(8,"ion-avatar",6),e.nrm(9,"img",23),e.k0s(),e.j41(10,"ion-radio",49)(11,"ion-label"),e.EFF(12,"C\u1ee9u h\u1ed9 xe VIP"),e.k0s()()()(),e.j41(13,"div",56)(14,"ion-item",48)(15,"ion-avatar",6),e.nrm(16,"img",24),e.k0s(),e.j41(17,"ion-radio",49)(18,"ion-label"),e.EFF(19,"C\u1ee9u h\u1ed9 xe th\u01b0\u1eddng"),e.k0s()()()()()(),e.j41(20,"ion-footer",10)(21,"div",41)(22,"ion-button",42),e.bIt("click",function(){e.eBV(i),e.XpG();const n=e.sdS(21);return e.Njj(null==n?null:n.dismiss())}),e.j41(23,"ion-label"),e.EFF(24),e.nI1(25,"translate"),e.k0s()(),e.j41(26,"ion-button",43),e.bIt("click",function(){e.eBV(i);const n=e.XpG(),o=e.sdS(21);return e.Njj(n.confirmVehicleVipCharging(o))}),e.j41(27,"ion-label"),e.EFF(28),e.nI1(29,"translate"),e.k0s()()()()}if(2&a){const i=e.XpG();e.R7$(5),e.Y8G("value",!!i.dataForm.IsVehicleVipCharging),e.R7$(5),e.Y8G("value",!0),e.R7$(7),e.Y8G("value",!1),e.R7$(7),e.JRh(e.bMT(25,5,"Cancel")),e.R7$(4),e.JRh(e.bMT(29,7,"Apply"))}}const ge=[{path:"",component:(()=>{var a;class s{constructor(t,n,o,l,r,c){this.router=t,this.changeDetectorRef=n,this.animationController=o,this.modalController=l,this.toastController=r,this.loadingController=c,this.APP_ROUTE=x._,this.APP_FUNC_FormatMoney=P.xi,this.APP_FUNC_FormatDate=P.Rv,this.v_user_classify=j.If,this.dataForm={},this.chargingPackages=[],this.wallets=[],this.hourValues=[],this.minuteValues="0,15,30,45"}ngOnInit(){(0,N.kU)(),(0,V.NL)({callback:t=>{if(null!=t&&t.Succeeded){var n,o,l,r,c,d;this.StartDate=((p=null!==(n=t.Data)&&void 0!==n&&n.CurrentDateTime?new Date(null===(o=t.Data)||void 0===o?void 0:o.CurrentDateTime):new Date).setHours(p.getHours()+1),(0,P.Rv)(p,"YYYY-MM-DDTHH:mm:ss")),this.StartTime=null===(l=t.Data)||void 0===l?void 0:l.StartTime,this.EndTime=null===(r=t.Data)||void 0===r?void 0:r.EndTime;let v=new Date("2024-01-01 "+(null===(c=t.Data)||void 0===c?void 0:c.StartTime)),F=new Date("2024-01-01 "+(null===(d=t.Data)||void 0===d?void 0:d.EndTime)),_=v.getHours(),f=F.getHours(),h=[];for(let p=_,R=f;p<=R;p++)h.push(p);this.hourValues=h;var m=new Date;m.setMinutes(15*(Math.ceil(m.getMinutes()/15)+1)),this.dataForm.datefrom=(0,P.Rv)(m,"YYYY-MM-DD"),m.setHours(Math.max(Math.min(m.getHours()+1,f),_)),this.dataForm.timefrom=(0,P.Rv)(m,"HH:mm:ss"),this.dataForm.dateto=(0,P.Rv)(m,"YYYY-MM-DD"),m.setHours(Math.max(Math.min(m.getHours()+3,f),_)),this.dataForm.timeto=(0,P.Rv)(m,"HH:mm:ss")}var p}}),(0,b.fA)({callback:t=>{null!=t&&t.currentAddress&&(this.dataForm.address=null==t?void 0:t.currentAddress,this.dataForm.address2=null==t?void 0:t.currentAddress)}}),(0,b.Xz)().then(t=>{this.dataForm.pos=t,this.dataForm.pos2=t}),Promise.all([new Promise((t,n)=>{(0,W.z)({callback:o=>{var l;null!=o&&o.Succeeded&&(this.user=o.Data,this.dataForm.IsVehicleVipCharging=(null===(l=this.user)||void 0===l?void 0:l.VUserClassify)==j.If.TaiKhoanVIP),t(o)}})})]).then(t=>{(0,B.nV)({callback:n=>{if(null!=n&&n.Succeeded){var o;if(this.wallets=n.Data||[],this.wallets.forEach(r=>r.WalletRandomId=Math.floor(99999999*Math.random())),1==this.wallets.length)this.wallet=this.wallets[0];else if(this.wallets.length>=2){var l;this.wallet=(null===(l=this.user)||void 0===l?void 0:l.VUserClassify)==j.If.TaiKhoanVIP?this.wallets.sort((r,c)=>{var d,m;return(null!==(d=c.WalletBalance)&&void 0!==d?d:0)-(null!==(m=r.WalletBalance)&&void 0!==m?m:0)})[0]:this.wallets.filter(r=>!r.IsVehicleVipWallet).sort((r,c)=>{var d,m;return(null!==(d=c.WalletBalance)&&void 0!==d?d:0)-(null!==(m=r.WalletBalance)&&void 0!==m?m:0)})[0]}this.dataForm.WalletRandomId=null===(o=this.wallet)||void 0===o?void 0:o.WalletRandomId}}}),this.getChargingpackages()})}getChargingpackages(){var t=this;return(0,C.A)(function*(){(0,G.LE)({loadingController:t.loadingController,params:{ServiceId:M.u9.CUU_HO_ID,IsVehicleVipCharging:t.dataForm.IsVehicleVipCharging,PageNumber:1,PageSize:10},callback:n=>{var o;if(null!=n&&n.Succeeded){if(t.chargingPackages=null!==(o=n.Data)&&void 0!==o?o:[],t.chargingPackages.length){if(t.dataForm.ChargePackageId){let l=t.chargingPackages.find(r=>r.ChargePackageId==t.dataForm.ChargePackageId);if(l)return void(t.chargingPackage=l)}t.chargingPackage=t.chargingPackages[Math.floor(t.chargingPackages.length/2)],t.dataForm.ChargePackageId=t.chargingPackage.ChargePackageId}}else(0,S.cX)(t.toastController,{},n).then(l=>l.present())}})})()}get submitDisabled(){var t,n,o,l;return!(this.dataForm.address&&null!==(t=this.dataForm.pos)&&void 0!==t&&t.lat&&null!==(n=this.dataForm.pos)&&void 0!==n&&n.lng&&this.dataForm.address2&&null!==(o=this.dataForm.pos2)&&void 0!==o&&o.lat&&null!==(l=this.dataForm.pos2)&&void 0!==l&&l.lng)}submitCreateService(t){var n,o,l,r,c,d,m,v,F;(0,V.X1)({params:{ServiceId:M.u9.CUU_HO_ID,RequestAddress:this.dataForm.address,RequestLat:null===(n=this.dataForm.pos)||void 0===n?void 0:n.lat,RequestLong:null===(o=this.dataForm.pos)||void 0===o?void 0:o.lng,DestAddress:this.dataForm.address2,DestLat:null===(l=this.dataForm.pos2)||void 0===l?void 0:l.lat,DestLong:null===(r=this.dataForm.pos2)||void 0===r?void 0:r.lng,Distance:(0,P.GH)(null!==(c=this.dataForm.pos)&&void 0!==c?c:{},null!==(d=this.dataForm.pos2)&&void 0!==d?d:{}),Notes:this.dataForm.note,IsVehicleVipCharging:this.dataForm.IsVehicleVipCharging,IsVehicleVipWallet:null===(m=this.wallet)||void 0===m?void 0:m.IsVehicleVipWallet,WalletId:null===(v=this.wallet)||void 0===v?void 0:v.WalletId,VehicleVipId:null===(F=this.wallet)||void 0===F?void 0:F.VehicleVipId},callback:_=>{null!=_&&_.Succeeded&&_.Data?this.router.navigateByUrl(x._.REQUEST_SERVICE_DETAIL.replace(":id",_.Data),{replaceUrl:!0}):(0,S.cX)(this.toastController,{},_).then(f=>f.present())}})}presentModalDatePickerFrom(t){var n=this;return(0,C.A)(function*(){let o=yield n.modalController.create({component:T.W,componentProps:{options:{value:n.dataForm.datefrom,presentation:"date",startDate:n.StartDate,hourValues:n.hourValues,minuteValues:n.minuteValues}},cssClass:"ion-modal-auto ion-modal-small"});o.onDidDismiss().then(l=>{"success"==l.role&&(n.dataForm.datefrom=l.data)}),o.present()})()}presentModalTimePickerFrom(t){var n=this;return(0,C.A)(function*(){let o=yield n.modalController.create({component:T.W,componentProps:{options:{value:n.dataForm.timefrom,presentation:"time",startDate:n.StartDate,hourValues:n.hourValues,minuteValues:n.minuteValues}},cssClass:"ion-modal-auto ion-modal-small"});o.onDidDismiss().then(l=>{"success"==l.role&&(n.dataForm.timefrom=l.data,new Date("2024-01-01T"+n.dataForm.timeto).getTime()-new Date("2024-01-01T"+n.dataForm.timefrom).getTime()<0&&(n.dataForm.timeto=n.dataForm.timefrom))}),o.present()})()}presentModalTimePickerTo(t){var n=this;return(0,C.A)(function*(){let o=yield n.modalController.create({component:T.W,componentProps:{options:{value:n.dataForm.timeto,presentation:"time",startDate:n.StartDate,hourValues:n.hourValues,minuteValues:n.minuteValues}},cssClass:"ion-modal-auto ion-modal-small"});o.onDidDismiss().then(l=>{"success"==l.role&&(n.dataForm.timeto=new Date("2024-01-01T"+l.data).getTime()-new Date("2024-01-01T"+n.dataForm.timefrom).getTime()>=0?l.data:n.dataForm.timefrom)}),o.present()})()}onModalVehicleDidPresent(t){this.dataForm.IsVehicleVipCharging_temp=this.dataForm.IsVehicleVipCharging}changeVehicleVipCharging(t){this.dataForm.IsVehicleVipCharging_temp=t.detail.value}confirmVehicleVipCharging(t){this.dataForm.IsVehicleVipCharging=this.dataForm.IsVehicleVipCharging_temp,null==t||t.dismiss(),this.getChargingpackages()}onModalPackageDidPresent(t){this.dataForm.ChargePackageId_temp=void 0}changeChargePackage(t){this.dataForm.ChargePackageId_temp=t.detail.value}confirmChargePackage(t){this.dataForm.ChargePackageId_temp&&(this.dataForm.ChargePackageId=this.dataForm.ChargePackageId_temp,this.chargingPackage=this.chargingPackages.find(n=>n.ChargePackageId==this.dataForm.ChargePackageId)),null==t||t.dismiss()}onModalWalletDidPresent(t){this.dataForm.WalletRandomId_temp=this.dataForm.WalletRandomId}changeWallet(t){this.dataForm.WalletRandomId_temp=t.detail.value}confirmWallet(t){this.dataForm.WalletRandomId_temp&&(this.dataForm.WalletRandomId=this.dataForm.WalletRandomId_temp,this.wallet=this.wallets.find(n=>n.WalletRandomId==this.dataForm.WalletRandomId_temp)),null==t||t.dismiss()}changeNote(t){this.dataForm.note=t.detail.value}onModalAddressDidPresent(t){var n=this;this.dataForm.pos_temp=this.dataForm.pos,this.dataForm.address_temp=this.dataForm.address;const o=function(){var r=(0,C.A)(function*(){var c;let d,m,v,F;d=window.google.maps,m=new d.Map(document.getElementById("map"),{zoom:15,center:n.dataForm.pos_temp,disableDefaultUI:!0});let f=h=>{var p;m.moveCamera({zoom:15,center:h}),null===(p=v)||void 0===p||p.setMap(null),v=new d.Marker({map:m,draggable:!0,animation:d.Animation.DROP,position:h}),d.event.addListener(v,"dragend",R=>{n.requestAddress({lat:R.latLng.lat(),lng:R.latLng.lng()},(w,E)=>{n.dataForm.pos_temp=w,n.dataForm.address_temp=E})})};window.createMarker=f,n.dataForm.pos_temp&&f(n.dataForm.pos_temp),F=new d.places.Autocomplete(yield null===(c=n.inpAddressRed)||void 0===c?void 0:c.getInputElement()),F.addListener("place_changed",()=>{var h=F.getPlace(),p={lat:h.geometry.location.lat(),lng:h.geometry.location.lng()};n.dataForm.pos_temp=p,n.dataForm.address_temp=h.formatted_address,f(p)})});return function(){return r.apply(this,arguments)}}();window.initMap=o;let l=document.createElement("script");l.async=!0,l.src="https://maps.google.com/maps/api/js?key=AIzaSyAfx5a8yx5MqeGoTS3ierzoe35TXoX0ZOY&libraries=places&callback=initMap&loading=async",document.head.append(l)}confirmAddress(t){this.dataForm.pos_temp&&this.dataForm.address_temp&&(this.dataForm.pos=this.dataForm.pos_temp,this.dataForm.address=this.dataForm.address_temp),null==t||t.dismiss()}onModalAddress2DidPresent(t){var n=this;this.dataForm.pos2_temp=this.dataForm.pos2,this.dataForm.address2_temp=this.dataForm.address2;const o=function(){var r=(0,C.A)(function*(){var c;let d,m,v,F;d=window.google.maps,m=new d.Map(document.getElementById("map"),{zoom:15,center:n.dataForm.pos2_temp,disableDefaultUI:!0});let f=h=>{var p;m.moveCamera({zoom:15,center:h}),null===(p=v)||void 0===p||p.setMap(null),v=new d.Marker({map:m,draggable:!0,animation:d.Animation.DROP,position:h}),d.event.addListener(v,"dragend",R=>{n.requestAddress({lat:R.latLng.lat(),lng:R.latLng.lng()},(w,E)=>{n.dataForm.pos2_temp=w,n.dataForm.address2_temp=E})})};window.createMarker=f,n.dataForm.pos2_temp&&f(n.dataForm.pos2_temp),F=new d.places.Autocomplete(yield null===(c=n.inpAddressRed)||void 0===c?void 0:c.getInputElement()),F.addListener("place_changed",()=>{var h=F.getPlace(),p={lat:h.geometry.location.lat(),lng:h.geometry.location.lng()};n.dataForm.pos2_temp=p,n.dataForm.address2_temp=h.formatted_address,f(p)})});return function(){return r.apply(this,arguments)}}();window.initMap=o;let l=document.createElement("script");l.async=!0,l.src="https://maps.google.com/maps/api/js?key=AIzaSyAfx5a8yx5MqeGoTS3ierzoe35TXoX0ZOY&libraries=places&callback=initMap&loading=async",document.head.append(l)}confirmAddress2(t){this.dataForm.pos2_temp&&this.dataForm.address2_temp&&(this.dataForm.pos2=this.dataForm.pos2_temp,this.dataForm.address2=this.dataForm.address2_temp),null==t||t.dismiss()}refreshCurrentPosition(t){this.loadingGeolocation=!0,this.getCurrentPosition(n=>{this.loadingGeolocation=!1,n&&window.createMarker(n)})}getCurrentPosition(t){var n=this;y.L.getCurrentPosition({enableHighAccuracy:!0}).then(function(){var o=(0,C.A)(function*(l){if(l.coords){var r={lat:l.coords.latitude,lng:l.coords.longitude};yield(0,b.fj)({params:r}),n.requestAddress(r,(c,d)=>{n.dataForm.pos_temp=c,n.dataForm.address_temp=d,n.dataForm.pos2_temp=c,n.dataForm.address2_temp=d}),t&&t(r)}else t&&t()});return function(l){return o.apply(this,arguments)}}()).catch(()=>{t&&t()})}requestAddress(t,n){(0,$.S)({params:{lat:t.lat,lng:t.lng},callback:o=>{var l,r,c;"OK"==(null==o?void 0:o.status)&&(n(t,null!==(l=(null!==(r=o.results[0])&&void 0!==r?r:{}).formatted_address)&&void 0!==l?l:null===(c=o.plus_code)||void 0===c?void 0:c.compound_code),this.changeDetectorRef.detectChanges())}})}}return(a=s).\u0275fac=function(t){return new(t||a)(e.rXU(k.Ix),e.rXU(e.gRc),e.rXU(u.Hx),e.rXU(u.W3),e.rXU(u.K_),e.rXU(u.Xi))},a.\u0275cmp=e.VBU({type:a,selectors:[["app-service-towing-rescue"]],viewQuery:function(t,n){if(1&t&&e.GBs(O,5),2&t){let o;e.mGM(o=e.lsd())&&(n.inpAddressRed=o.first)}},decls:27,vars:3,consts:[["modalAddress",""],["modalAddress2",""],["modalPackage",""],["modalWallet",""],["modalVehicle",""],["inpAddress",""],["slot","start"],["icon","../../../assets/icon/ion-icon/arrow-left.svg","text","",3,"defaultHref"],[1,"card-page","min-h-100"],[3,"didPresent"],[1,"ion-padding"],["color","primary","shape","round","expand","block",3,"click","disabled"],["lines","none"],[1,"form-group"],[1,"choice-item"],["detail","false","button","true",3,"click"],[1,"mr-0"],[1,"fs-14"],["slot","end","color","medium","src","../../../assets/icon/ion-icon/location-add.svg",1,"fs-16"],[1,"ion-item-input"],["placeholder","Nh\u1eadp ghi ch\xfa c\u1ee7a b\u1ea1n cho d\u1ecbch v\u1ee5 s\u1ea1c",3,"ionChange","autoGrow","value"],[1,"vehicle-item"],["slot","end","color","medium","name","chevron-down-outline",1,"fs-16"],["src","../../../assets/icon/payment/vehicle-vip.svg"],["src","../../../assets/icon/payment/vehicle-basic.svg"],[1,"wallet-item"],["src","../../../assets/icon/payment/wallet-vip.svg"],[1,"fw-700"],[1,"mt-1","text-vip"],["src","../../../assets/icon/payment/wallet-basic.svg"],[1,"mt-1","text-basic"],[1,"text-center"],[1,"ion-padding-horizontal"],[1,"h-100","d-flex","flex-column"],["slot","start","color","medium","name","location",1,"mr-3"],["clear-input","true","placeholder","Nh\u1eadp \u0111\u1ecba ch\u1ec9 c\u1ee7a b\u1ea1n ho\u1eb7c ch\u1ecdn t\u1eeb b\u1ea3n \u0111\u1ed3",3,"value"],[1,"flex-grow-1","position-relative"],["id","map"],[1,"position-absolute","bottom-0","right-0"],["id","btn-geolocation","color","light",3,"click"],["color","medium","name","circles"],[1,"d-flex"],["color","medium","fill","outline","expand","block",1,"flex-grow-1","m-1",3,"click"],["color","primary","expand","block",1,"flex-grow-1","m-1",3,"click"],["src","../../../assets/icon/map/geolocation.svg"],[1,"package-list"],[3,"ionChange","value"],[1,"package-item","mb-3"],["lines","none","detail","false","button","","mode","ios"],["mode","md","justify","space-between",3,"value"],[1,"d-flex","align-items-center"],["src","../../../assets/icon/ion-img/charge-package.svg"],[1,"pl-3"],[1,"mt-1"],[1,"text-primary"],[1,"wallet-item","mb-3"],[1,"vehicle-item","mb-3"]],template:function(t,n){if(1&t){const o=e.RV6();e.j41(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",6),e.nrm(3,"ion-back-button",7),e.k0s(),e.j41(4,"ion-title"),e.EFF(5,"Y\xeau c\u1ea7u c\u1ee9u h\u1ed9 k\xe9o xe"),e.k0s()()(),e.j41(6,"ion-content"),e.DNE(7,Z,29,6,"div",8),e.j41(8,"ion-modal",9,0),e.bIt("didPresent",function(r){return e.eBV(o),e.Njj(n.onModalAddressDidPresent(r))}),e.DNE(10,ee,31,11,"ng-template"),e.k0s(),e.j41(11,"ion-modal",9,1),e.bIt("didPresent",function(r){return e.eBV(o),e.Njj(n.onModalAddress2DidPresent(r))}),e.DNE(13,ie,31,11,"ng-template"),e.k0s(),e.j41(14,"ion-modal",9,2),e.bIt("didPresent",function(r){return e.eBV(o),e.Njj(n.onModalPackageDidPresent(r))}),e.DNE(16,re,19,7,"ng-template"),e.k0s(),e.j41(17,"ion-modal",9,3),e.bIt("didPresent",function(r){return e.eBV(o),e.Njj(n.onModalWalletDidPresent(r))}),e.DNE(19,me,18,7,"ng-template"),e.k0s(),e.j41(20,"ion-modal",9,4),e.bIt("didPresent",function(r){return e.eBV(o),e.Njj(n.onModalVehicleDidPresent(r))}),e.DNE(22,ue,30,9,"ng-template"),e.k0s()(),e.j41(23,"ion-footer",10)(24,"ion-button",11),e.bIt("click",function(r){return e.eBV(o),e.Njj(n.submitCreateService(r))}),e.j41(25,"ion-label"),e.EFF(26,"G\u1eedi y\xeau c\u1ea7u"),e.k0s()()()}2&t&&(e.R7$(3),e.Y8G("defaultHref",n.APP_ROUTE.SERVICE),e.R7$(4),e.vxM(7,n.user?7:-1),e.R7$(17),e.Y8G("disabled",n.submitDisabled))},dependencies:[u.mC,u.Jm,u.QW,u.W9,u.M0,u.eU,u.iq,u.KW,u.$w,u.uz,u.he,u.nf,u.KO,u.f0,u.w2,u.nc,u.BC,u.ai,u.Sb,u.Je,u.Gw,u.el,X.D9],styles:[".card-page[_ngcontent-%COMP%]{padding:1rem;border-top-left-radius:1.5rem;border-top-right-radius:1.5rem;background:var(--ion-color-light)}.choice-item[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{--border-width: 1px;--border-color: #eee;--border-radius: .75rem}.choice-item[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-icon[slot=start][_ngcontent-%COMP%]{margin-right:1rem}.choice-item[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-icon[slot=end][_ngcontent-%COMP%]{margin-left:1rem}.package-item[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{--padding-top: .5rem;--padding-bottom: .5rem;--border-width: 1px;--border-color: #eee;--border-radius: .75rem}.package-item[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-img[_ngcontent-%COMP%]{width:4rem}.wallet-item[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{--padding-top: .5rem;--padding-bottom: .5rem;--border-width: 1px;--border-color: #eee;--border-radius: .75rem}.wallet-item[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-img[_ngcontent-%COMP%]{width:4rem}.vehicle-item[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{--padding-top: .5rem;--padding-bottom: .5rem;--border-width: 1px;--border-color: #eee;--border-radius: .75rem}.vehicle-item[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-img[_ngcontent-%COMP%]{width:4rem}.text-vip[_ngcontent-%COMP%]{background:linear-gradient(to top,#fdd36f 10%,#c0982c 50%,#f8cf50 70%);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;text-fill-color:transparent}.text-basic[_ngcontent-%COMP%]{color:var(--ion-color-primary)}ion-datetime-button[_ngcontent-%COMP%]::part(native){background:transparent}ion-datetime-button[_ngcontent-%COMP%]::part(native):hover{background:var(--ion-color-step-300, var(--ion-background-color-step-300, #edeef0))}#map[_ngcontent-%COMP%]{width:100%;height:100%}#btn-geolocation[_ngcontent-%COMP%]{width:3rem;height:3rem;min-width:3rem;min-height:3rem;--padding-top: 0;--padding-start: 0;--padding-end: 0;--padding-bottom: 0;--border-radius: 50%;margin:0 1.5rem 1.5rem 0}#btn-geolocation[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:3rem;color:var(--ion-color-tertiary)}"]}),s})()}];let pe=(()=>{var a;class s{}return(a=s).\u0275fac=function(t){return new(t||a)},a.\u0275mod=e.$C({type:a}),a.\u0275inj=e.G2t({imports:[k.iI.forChild(ge),k.iI]}),s})();var _e=g(3890);let he=(()=>{var a;class s{}return(a=s).\u0275fac=function(t){return new(t||a)},a.\u0275mod=e.$C({type:a}),a.\u0275inj=e.G2t({imports:[D.MD,A.YN,u.bv,pe,_e.x]}),s})()}}]);
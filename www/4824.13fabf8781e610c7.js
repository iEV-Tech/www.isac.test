"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[4824],{4824:(me,E,u)=>{u.r(E),u.d(E,{ServiceTowingRescuePageModule:()=>ce});var D=u(177),A=u(9417),c=u(791),k=u(7625),P=u(467),x=u(7762),T=u(3801),y=u(574),G=u(4470),I=u(5454),$=u(6539),M=u(2313),R=u(8517),S=u(8650),V=u(8833),N=u(1695),b=u(5883),e=u(4438),B=u(4842);const W=["inpAddress"];function X(a,d){1&a&&(e.nrm(0,"ion-icon",24),e.j41(1,"ion-label"),e.EFF(2,"C\u1ee9u h\u1ed9 xe VIP"),e.k0s())}function O(a,d){1&a&&(e.nrm(0,"ion-icon",24),e.j41(1,"ion-label"),e.EFF(2,"C\u1ee9u h\u1ed9 xe th\u01b0\u1eddng"),e.k0s())}function U(a,d){if(1&a&&(e.nrm(0,"ion-icon",24),e.j41(1,"ion-label"),e.EFF(2),e.k0s()),2&a){let o;const n=e.XpG();e.R7$(2),e.SpI("",n.APP_FUNC_FormatMoney(null!==(o=null==n.wallet?null:n.wallet.WalletBalance)&&void 0!==o?o:0),"\u0111")}}function Y(a,d){if(1&a&&(e.nrm(0,"ion-icon",25),e.j41(1,"ion-label"),e.EFF(2),e.k0s()),2&a){let o;const n=e.XpG();e.R7$(2),e.SpI("",n.APP_FUNC_FormatMoney(null!==(o=null==n.wallet?null:n.wallet.WalletBalance)&&void 0!==o?o:0),"\u0111")}}function J(a,d){1&a&&e.nrm(0,"ion-spinner",35)}function H(a,d){1&a&&e.nrm(0,"ion-icon",39)}function L(a,d){if(1&a){const o=e.RV6();e.j41(0,"ion-header")(1,"ion-toolbar")(2,"ion-title",26),e.EFF(3,"Ch\u1ecdn \u0111\u1ecba ch\u1ec9"),e.k0s()()(),e.j41(4,"ion-content",27)(5,"div",28)(6,"div",10)(7,"label"),e.EFF(8),e.nI1(9,"translate"),e.k0s(),e.j41(10,"div",19)(11,"ion-item",9),e.nrm(12,"ion-icon",29)(13,"ion-input",30,5),e.k0s()()(),e.j41(15,"div",31),e.nrm(16,"div",32),e.j41(17,"div",33)(18,"ion-button",34),e.bIt("click",function(t){e.eBV(o);const i=e.XpG();return e.Njj(i.refreshCurrentPosition(t))}),e.DNE(19,J,1,0,"ion-spinner",35)(20,H,1,0),e.k0s()()()()(),e.j41(21,"ion-footer",22)(22,"div",36)(23,"ion-button",37),e.bIt("click",function(){e.eBV(o),e.XpG();const t=e.sdS(54);return e.Njj(null==t?null:t.dismiss())}),e.j41(24,"ion-label"),e.EFF(25),e.nI1(26,"translate"),e.k0s()(),e.j41(27,"ion-button",38),e.bIt("click",function(){e.eBV(o);const t=e.XpG(),i=e.sdS(54);return e.Njj(t.confirmAddress(i))}),e.j41(28,"ion-label"),e.EFF(29),e.nI1(30,"translate"),e.k0s()()()()}if(2&a){const o=e.XpG();e.R7$(8),e.JRh(e.bMT(9,5,"Address")),e.R7$(5),e.Y8G("value",o.dataForm.address_temp),e.R7$(6),e.vxM(19,o.loadingGeolocation?19:20),e.R7$(6),e.JRh(e.bMT(26,7,"Cancel")),e.R7$(4),e.JRh(e.bMT(30,9,"Apply"))}}function z(a,d){1&a&&e.nrm(0,"ion-spinner",35)}function Z(a,d){1&a&&e.nrm(0,"ion-icon",39)}function K(a,d){if(1&a){const o=e.RV6();e.j41(0,"ion-header")(1,"ion-toolbar")(2,"ion-title",26),e.EFF(3,"Ch\u1ecdn \u0111\u1ecba ch\u1ec9 t\u1edbi"),e.k0s()()(),e.j41(4,"ion-content",27)(5,"div",28)(6,"div",10)(7,"label"),e.EFF(8),e.nI1(9,"translate"),e.k0s(),e.j41(10,"div",19)(11,"ion-item",9),e.nrm(12,"ion-icon",29)(13,"ion-input",30,5),e.k0s()()(),e.j41(15,"div",31),e.nrm(16,"div",32),e.j41(17,"div",33)(18,"ion-button",34),e.bIt("click",function(t){e.eBV(o);const i=e.XpG();return e.Njj(i.refreshCurrentPosition(t))}),e.DNE(19,z,1,0,"ion-spinner",35)(20,Z,1,0),e.k0s()()()()(),e.j41(21,"ion-footer",22)(22,"div",36)(23,"ion-button",37),e.bIt("click",function(){e.eBV(o),e.XpG();const t=e.sdS(57);return e.Njj(null==t?null:t.dismiss())}),e.j41(24,"ion-label"),e.EFF(25),e.nI1(26,"translate"),e.k0s()(),e.j41(27,"ion-button",38),e.bIt("click",function(){e.eBV(o);const t=e.XpG(),i=e.sdS(57);return e.Njj(t.confirmAddress2(i))}),e.j41(28,"ion-label"),e.EFF(29),e.nI1(30,"translate"),e.k0s()()()()}if(2&a){const o=e.XpG();e.R7$(8),e.JRh(e.bMT(9,5,"AddressTo")),e.R7$(5),e.Y8G("value",o.dataForm.address2_temp),e.R7$(6),e.vxM(19,o.loadingGeolocation?19:20),e.R7$(6),e.JRh(e.bMT(26,7,"Cancel")),e.R7$(4),e.JRh(e.bMT(30,9,"Apply"))}}function Q(a,d){if(1&a&&(e.j41(0,"div")(1,"small"),e.EFF(2),e.k0s()(),e.j41(3,"div",48)(4,"b")(5,"b",49),e.EFF(6),e.k0s()(),e.j41(7,"span"),e.EFF(8),e.k0s()()),2&a){let o;const n=e.XpG().$implicit,t=e.XpG(2);e.R7$(2),e.JRh(n.ChargePackName),e.R7$(4),e.Lme("",n.PowerValue,"",n.Unit,""),e.R7$(2),e.SpI(" / ",t.APP_FUNC_FormatMoney(null!==(o=n.AftertaxPrice)&&void 0!==o?o:0),"\u0111")}}function q(a,d){if(1&a&&(e.j41(0,"div")(1,"small"),e.EFF(2),e.k0s()(),e.j41(3,"div",48)(4,"b")(5,"b",49),e.EFF(6),e.k0s()(),e.j41(7,"span"),e.EFF(8),e.k0s()()),2&a){let o;const n=e.XpG().$implicit,t=e.XpG(2);e.R7$(2),e.JRh(n.ChargePackName),e.R7$(4),e.SpI("",t.APP_FUNC_FormatMoney(null!==(o=n.AftertaxPrice)&&void 0!==o?o:0),"\u0111"),e.R7$(2),e.Lme(" / ",n.PowerValue,"",n.Unit,"")}}function ee(a,d){if(1&a&&(e.j41(0,"div",42)(1,"ion-item",43)(2,"ion-radio",44)(3,"div",45)(4,"div"),e.nrm(5,"ion-img",46),e.k0s(),e.j41(6,"div",47),e.DNE(7,Q,9,4)(8,q,9,4),e.k0s()()()()()),2&a){const o=d.$implicit;e.R7$(2),e.Y8G("value",o.ChargePackageId),e.R7$(5),e.vxM(7,o.IsPackByPower?7:8)}}function te(a,d){if(1&a){const o=e.RV6();e.j41(0,"ion-header")(1,"ion-toolbar")(2,"ion-title",26),e.EFF(3,"Ch\u1ecdn g\xf3i s\u1ea1c"),e.k0s()()(),e.j41(4,"ion-content",27)(5,"div",40)(6,"ion-radio-group",41),e.bIt("ionChange",function(t){e.eBV(o);const i=e.XpG();return e.Njj(i.changeChargePackage(t))}),e.Z7z(7,ee,9,2,"div",42,e.fX1),e.k0s()()(),e.j41(9,"ion-footer",22)(10,"div",36)(11,"ion-button",37),e.bIt("click",function(){e.eBV(o),e.XpG();const t=e.sdS(60);return e.Njj(null==t?null:t.dismiss())}),e.j41(12,"ion-label"),e.EFF(13),e.nI1(14,"translate"),e.k0s()(),e.j41(15,"ion-button",38),e.bIt("click",function(){e.eBV(o);const t=e.XpG(),i=e.sdS(60);return e.Njj(t.confirmChargePackage(i))}),e.j41(16,"ion-label"),e.EFF(17),e.nI1(18,"translate"),e.k0s()()()()}if(2&a){const o=e.XpG();e.R7$(6),e.Y8G("value",o.dataForm.ChargePackageId),e.R7$(),e.Dyx(o.chargingPackages),e.R7$(6),e.JRh(e.bMT(14,3,"Cancel")),e.R7$(4),e.JRh(e.bMT(18,5,"Apply"))}}function ne(a,d){1&a&&e.nrm(0,"ion-icon",24)}function ie(a,d){1&a&&e.nrm(0,"ion-icon",25)}function ae(a,d){if(1&a&&(e.j41(0,"div",50)(1,"ion-item",43),e.DNE(2,ne,1,0,"ion-icon",24)(3,ie,1,0),e.j41(4,"ion-radio",44)(5,"ion-label"),e.EFF(6),e.k0s()()()()),2&a){let o;const n=d.$implicit,t=e.XpG(2);e.R7$(2),e.vxM(2,n.IsVehicleVipWallet?2:3),e.R7$(2),e.Y8G("value",n.WalletRandomId),e.R7$(2),e.SpI("",t.APP_FUNC_FormatMoney(null!==(o=n.WalletBalance)&&void 0!==o?o:0),"\u0111")}}function oe(a,d){if(1&a){const o=e.RV6();e.j41(0,"ion-header")(1,"ion-toolbar")(2,"ion-title",26),e.EFF(3,"Ch\u1ecdn V\xed thanh to\xe1n"),e.k0s()()(),e.j41(4,"ion-content",27)(5,"ion-radio-group",41),e.bIt("ionChange",function(t){e.eBV(o);const i=e.XpG();return e.Njj(i.changeWallet(t))}),e.Z7z(6,ae,7,3,"div",50,e.fX1),e.k0s()(),e.j41(8,"ion-footer",22)(9,"div",36)(10,"ion-button",37),e.bIt("click",function(){e.eBV(o),e.XpG();const t=e.sdS(63);return e.Njj(null==t?null:t.dismiss())}),e.j41(11,"ion-label"),e.EFF(12),e.nI1(13,"translate"),e.k0s()(),e.j41(14,"ion-button",38),e.bIt("click",function(){e.eBV(o);const t=e.XpG(),i=e.sdS(63);return e.Njj(t.confirmWallet(i))}),e.j41(15,"ion-label"),e.EFF(16),e.nI1(17,"translate"),e.k0s()()()()}if(2&a){const o=e.XpG();e.R7$(5),e.Y8G("value",o.dataForm.WalletRandomId),e.R7$(),e.Dyx(o.wallets),e.R7$(6),e.JRh(e.bMT(13,3,"Cancel")),e.R7$(4),e.JRh(e.bMT(17,5,"Apply"))}}function le(a,d){if(1&a){const o=e.RV6();e.j41(0,"ion-header")(1,"ion-toolbar")(2,"ion-title",26),e.EFF(3,"Ch\u1ecdn xe"),e.k0s()()(),e.j41(4,"ion-content",27)(5,"ion-radio-group",41),e.bIt("ionChange",function(t){e.eBV(o);const i=e.XpG();return e.Njj(i.changeVehicleVipCharging(t))}),e.j41(6,"div",51)(7,"ion-item",43),e.nrm(8,"ion-icon",24),e.j41(9,"ion-radio",44)(10,"ion-label"),e.EFF(11,"C\u1ee9u h\u1ed9 xe VIP"),e.k0s()()()(),e.j41(12,"div",51)(13,"ion-item",43),e.nrm(14,"ion-icon",24),e.j41(15,"ion-radio",44)(16,"ion-label"),e.EFF(17,"C\u1ee9u h\u1ed9 xe th\u01b0\u1eddng"),e.k0s()()()()()(),e.j41(18,"ion-footer",22)(19,"div",36)(20,"ion-button",37),e.bIt("click",function(){e.eBV(o),e.XpG();const t=e.sdS(66);return e.Njj(null==t?null:t.dismiss())}),e.j41(21,"ion-label"),e.EFF(22),e.nI1(23,"translate"),e.k0s()(),e.j41(24,"ion-button",38),e.bIt("click",function(){e.eBV(o);const t=e.XpG(),i=e.sdS(66);return e.Njj(t.confirmVehicleVipCharging(i))}),e.j41(25,"ion-label"),e.EFF(26),e.nI1(27,"translate"),e.k0s()()()()}if(2&a){const o=e.XpG();e.R7$(5),e.Y8G("value",!!o.dataForm.IsVehicleVipCharging),e.R7$(4),e.Y8G("value",!0),e.R7$(6),e.Y8G("value",!1),e.R7$(7),e.JRh(e.bMT(23,5,"Cancel")),e.R7$(4),e.JRh(e.bMT(27,7,"Apply"))}}const re=[{path:"",component:(()=>{var a;class d{constructor(n,t,i,l,r,s){this.router=n,this.changeDetectorRef=t,this.animationController=i,this.modalController=l,this.toastController=r,this.loadingController=s,this.APP_ROUTE=V._,this.APP_FUNC_FormatMoney=R.xi,this.APP_FUNC_FormatDate=R.Rv,this.dataForm={IsVehicleVipCharging:!0},this.chargingPackages=[],this.wallets=[],this.hourValues=[],this.minuteValues="0,15,30,45"}ngOnInit(){(0,$.kU)(),(0,I.NL)({callback:n=>{if(null!=n&&n.Succeeded){var t,i,l,r,s,m;this.StartDate=((p=null!==(t=n.Data)&&void 0!==t&&t.CurrentDateTime?new Date(null===(i=n.Data)||void 0===i?void 0:i.CurrentDateTime):new Date).setHours(p.getHours()+1),(0,R.Rv)(p,"YYYY-MM-DDTHH:mm:ss")),this.StartTime=null===(l=n.Data)||void 0===l?void 0:l.StartTime,this.EndTime=null===(r=n.Data)||void 0===r?void 0:r.EndTime;let _=new Date("2024-01-01 "+(null===(s=n.Data)||void 0===s?void 0:s.StartTime)),v=new Date("2024-01-01 "+(null===(m=n.Data)||void 0===m?void 0:m.EndTime)),f=_.getHours(),F=v.getHours(),h=[];for(let p=f,C=F;p<=C;p++)h.push(p);this.hourValues=h;var g=new Date;g.setMinutes(15*(Math.ceil(g.getMinutes()/15)+1)),this.dataForm.datefrom=(0,R.Rv)(g,"YYYY-MM-DD"),g.setHours(Math.max(Math.min(g.getHours()+1,F),f)),this.dataForm.timefrom=(0,R.Rv)(g,"HH:mm:ss"),this.dataForm.dateto=(0,R.Rv)(g,"YYYY-MM-DD"),g.setHours(Math.max(Math.min(g.getHours()+3,F),f)),this.dataForm.timeto=(0,R.Rv)(g,"HH:mm:ss")}var p}}),(0,T.fA)({callback:n=>{null!=n&&n.currentAddress&&(this.dataForm.address=null==n?void 0:n.currentAddress,this.dataForm.address2=null==n?void 0:n.currentAddress)}}),(0,T.Xz)().then(n=>{this.dataForm.pos=n,this.dataForm.pos2=n}),(0,N.nV)({callback:n=>{var t;null!=n&&n.Succeeded&&(this.wallets=n.Data||[],this.wallets.forEach(i=>i.WalletRandomId=Math.floor(99999999*Math.random())),1==this.wallets.length?this.wallet=this.wallets[0]:this.wallets.length>=2&&(this.wallet=this.wallets.sort((i,l)=>{var r,s;return(null!==(r=l.WalletBalance)&&void 0!==r?r:0)-(null!==(s=i.WalletBalance)&&void 0!==s?s:0)})[0]),this.dataForm.WalletRandomId=null===(t=this.wallet)||void 0===t?void 0:t.WalletRandomId)}}),this.getChargingpackages()}getChargingpackages(){var n=this;return(0,P.A)(function*(){(0,y.LE)({loadingController:n.loadingController,params:{ServiceId:M.u9.CUU_HO_ID,IsVehicleVipCharging:n.dataForm.IsVehicleVipCharging,PageNumber:1,PageSize:10},callback:t=>{var i;if(null!=t&&t.Succeeded){if(n.chargingPackages=null!==(i=t.Data)&&void 0!==i?i:[],n.chargingPackages.length){if(n.dataForm.ChargePackageId){let l=n.chargingPackages.find(r=>r.ChargePackageId==n.dataForm.ChargePackageId);if(l)return void(n.chargingPackage=l)}n.chargingPackage=n.chargingPackages[Math.floor(n.chargingPackages.length/2)],n.dataForm.ChargePackageId=n.chargingPackage.ChargePackageId}}else(0,S.cX)(n.toastController,{},t).then(l=>l.present())}})})()}get submitDisabled(){var n,t,i,l;return!(this.dataForm.address&&null!==(n=this.dataForm.pos)&&void 0!==n&&n.lat&&null!==(t=this.dataForm.pos)&&void 0!==t&&t.lng&&this.dataForm.address2&&null!==(i=this.dataForm.pos2)&&void 0!==i&&i.lat&&null!==(l=this.dataForm.pos2)&&void 0!==l&&l.lng)}submitCreateService(n){var t,i,l,r,s,m,g;(0,I.X1)({params:{ServiceId:M.u9.CUU_HO_ID,RequestAddress:this.dataForm.address,RequestLat:null===(t=this.dataForm.pos)||void 0===t?void 0:t.lat,RequestLong:null===(i=this.dataForm.pos)||void 0===i?void 0:i.lng,DestAddress:this.dataForm.address2,DestLat:null===(l=this.dataForm.pos2)||void 0===l?void 0:l.lat,DestLong:null===(r=this.dataForm.pos2)||void 0===r?void 0:r.lng,Notes:this.dataForm.note,IsVehicleVipCharging:this.dataForm.IsVehicleVipCharging,IsVehicleVipWallet:null===(s=this.wallet)||void 0===s?void 0:s.IsVehicleVipWallet,WalletId:null===(m=this.wallet)||void 0===m?void 0:m.WalletId,VehicleVipId:null===(g=this.wallet)||void 0===g?void 0:g.VehicleVipId},callback:_=>{null!=_&&_.Succeeded&&_.Data?this.router.navigateByUrl(V._.REQUEST_SERVICE_DETAIL.replace(":id",_.Data),{replaceUrl:!0}):(0,S.cX)(this.toastController,{},_).then(v=>v.present())}})}presentModalDatePickerFrom(n){var t=this;return(0,P.A)(function*(){let i=yield t.modalController.create({component:b.W,componentProps:{options:{value:t.dataForm.datefrom,presentation:"date",startDate:t.StartDate,hourValues:t.hourValues,minuteValues:t.minuteValues}},cssClass:"ion-modal-auto ion-modal-small"});i.onDidDismiss().then(l=>{"success"==l.role&&(t.dataForm.datefrom=l.data)}),i.present()})()}presentModalTimePickerFrom(n){var t=this;return(0,P.A)(function*(){let i=yield t.modalController.create({component:b.W,componentProps:{options:{value:t.dataForm.timefrom,presentation:"time",startDate:t.StartDate,hourValues:t.hourValues,minuteValues:t.minuteValues}},cssClass:"ion-modal-auto ion-modal-small"});i.onDidDismiss().then(l=>{"success"==l.role&&(t.dataForm.timefrom=l.data,new Date("2024-01-01T"+t.dataForm.timeto).getTime()-new Date("2024-01-01T"+t.dataForm.timefrom).getTime()<0&&(t.dataForm.timeto=t.dataForm.timefrom))}),i.present()})()}presentModalTimePickerTo(n){var t=this;return(0,P.A)(function*(){let i=yield t.modalController.create({component:b.W,componentProps:{options:{value:t.dataForm.timeto,presentation:"time",startDate:t.StartDate,hourValues:t.hourValues,minuteValues:t.minuteValues}},cssClass:"ion-modal-auto ion-modal-small"});i.onDidDismiss().then(l=>{"success"==l.role&&(t.dataForm.timeto=new Date("2024-01-01T"+l.data).getTime()-new Date("2024-01-01T"+t.dataForm.timefrom).getTime()>=0?l.data:t.dataForm.timefrom)}),i.present()})()}onModalVehicleDidPresent(n){this.dataForm.IsVehicleVipCharging_temp=this.dataForm.IsVehicleVipCharging}changeVehicleVipCharging(n){this.dataForm.IsVehicleVipCharging_temp=n.detail.value}confirmVehicleVipCharging(n){this.dataForm.IsVehicleVipCharging=this.dataForm.IsVehicleVipCharging_temp,null==n||n.dismiss(),this.getChargingpackages()}onModalPackageDidPresent(n){this.dataForm.ChargePackageId_temp=void 0}changeChargePackage(n){this.dataForm.ChargePackageId_temp=n.detail.value}confirmChargePackage(n){this.dataForm.ChargePackageId_temp&&(this.dataForm.ChargePackageId=this.dataForm.ChargePackageId_temp,this.chargingPackage=this.chargingPackages.find(t=>t.ChargePackageId==this.dataForm.ChargePackageId)),null==n||n.dismiss()}onModalWalletDidPresent(n){this.dataForm.WalletRandomId_temp=this.dataForm.WalletRandomId}changeWallet(n){this.dataForm.WalletRandomId_temp=n.detail.value}confirmWallet(n){this.dataForm.WalletRandomId_temp&&(this.dataForm.WalletRandomId=this.dataForm.WalletRandomId_temp,this.wallet=this.wallets.find(t=>t.WalletRandomId==this.dataForm.WalletRandomId_temp)),null==n||n.dismiss()}changeNote(n){this.dataForm.note=n.detail.value}onModalAddressDidPresent(n){var t=this;this.dataForm.pos_temp=this.dataForm.pos,this.dataForm.address_temp=this.dataForm.address;const i=function(){var r=(0,P.A)(function*(){var s;let m,g,_,v;m=window.google.maps,g=new m.Map(document.getElementById("map"),{zoom:15,center:t.dataForm.pos_temp,disableDefaultUI:!0});let F=h=>{var p;g.moveCamera({zoom:15,center:h}),null===(p=_)||void 0===p||p.setMap(null),_=new m.Marker({map:g,draggable:!0,animation:m.Animation.DROP,position:h}),m.event.addListener(_,"dragend",C=>{t.requestAddress({lat:C.latLng.lat(),lng:C.latLng.lng()},(j,w)=>{t.dataForm.pos_temp=j,t.dataForm.address_temp=w})})};window.createMarker=F,t.dataForm.pos_temp&&F(t.dataForm.pos_temp),v=new m.places.Autocomplete(yield null===(s=t.inpAddressRed)||void 0===s?void 0:s.getInputElement()),v.addListener("place_changed",()=>{var h=v.getPlace(),p={lat:h.geometry.location.lat(),lng:h.geometry.location.lng()};t.dataForm.pos_temp=p,t.dataForm.address_temp=h.formatted_address,F(p)})});return function(){return r.apply(this,arguments)}}();window.initMap=i;let l=document.createElement("script");l.async=!0,l.src="https://maps.google.com/maps/api/js?key=AIzaSyAfx5a8yx5MqeGoTS3ierzoe35TXoX0ZOY&libraries=places&callback=initMap&loading=async",document.head.append(l)}confirmAddress(n){this.dataForm.pos_temp&&this.dataForm.address_temp&&(this.dataForm.pos=this.dataForm.pos_temp,this.dataForm.address=this.dataForm.address_temp),null==n||n.dismiss()}onModalAddress2DidPresent(n){var t=this;this.dataForm.pos2_temp=this.dataForm.pos2,this.dataForm.address2_temp=this.dataForm.address2;const i=function(){var r=(0,P.A)(function*(){var s;let m,g,_,v;m=window.google.maps,g=new m.Map(document.getElementById("map"),{zoom:15,center:t.dataForm.pos2_temp,disableDefaultUI:!0});let F=h=>{var p;g.moveCamera({zoom:15,center:h}),null===(p=_)||void 0===p||p.setMap(null),_=new m.Marker({map:g,draggable:!0,animation:m.Animation.DROP,position:h}),m.event.addListener(_,"dragend",C=>{t.requestAddress({lat:C.latLng.lat(),lng:C.latLng.lng()},(j,w)=>{t.dataForm.pos2_temp=j,t.dataForm.address2_temp=w})})};window.createMarker=F,t.dataForm.pos2_temp&&F(t.dataForm.pos2_temp),v=new m.places.Autocomplete(yield null===(s=t.inpAddressRed)||void 0===s?void 0:s.getInputElement()),v.addListener("place_changed",()=>{var h=v.getPlace(),p={lat:h.geometry.location.lat(),lng:h.geometry.location.lng()};t.dataForm.pos2_temp=p,t.dataForm.address2_temp=h.formatted_address,F(p)})});return function(){return r.apply(this,arguments)}}();window.initMap=i;let l=document.createElement("script");l.async=!0,l.src="https://maps.google.com/maps/api/js?key=AIzaSyAfx5a8yx5MqeGoTS3ierzoe35TXoX0ZOY&libraries=places&callback=initMap&loading=async",document.head.append(l)}confirmAddress2(n){this.dataForm.pos2_temp&&this.dataForm.address2_temp&&(this.dataForm.pos2=this.dataForm.pos2_temp,this.dataForm.address2=this.dataForm.address2_temp),null==n||n.dismiss()}refreshCurrentPosition(n){this.loadingGeolocation=!0,this.getCurrentPosition(t=>{this.loadingGeolocation=!1,t&&window.createMarker(t)})}getCurrentPosition(n){var t=this;x.L.getCurrentPosition({enableHighAccuracy:!0}).then(function(){var i=(0,P.A)(function*(l){if(l.coords){var r={lat:l.coords.latitude,lng:l.coords.longitude};yield(0,T.fj)({params:r}),t.requestAddress(r,(s,m)=>{t.dataForm.pos_temp=s,t.dataForm.address_temp=m,t.dataForm.pos2_temp=s,t.dataForm.address2_temp=m}),n&&n(r)}else n&&n()});return function(l){return i.apply(this,arguments)}}()).catch(()=>{n&&n()})}requestAddress(n,t){(0,G.S)({params:{lat:n.lat,lng:n.lng},callback:i=>{var l,r,s;"OK"==(null==i?void 0:i.status)&&(t(n,null!==(l=(null!==(r=i.results[0])&&void 0!==r?r:{}).formatted_address)&&void 0!==l?l:null===(s=i.plus_code)||void 0===s?void 0:s.compound_code),this.changeDetectorRef.detectChanges())}})}}return(a=d).\u0275fac=function(n){return new(n||a)(e.rXU(k.Ix),e.rXU(e.gRc),e.rXU(c.Hx),e.rXU(c.W3),e.rXU(c.K_),e.rXU(c.Xi))},a.\u0275cmp=e.VBU({type:a,selectors:[["app-service-towing-rescue"]],viewQuery:function(n,t){if(1&n&&e.GBs(W,5),2&n){let i;e.mGM(i=e.lsd())&&(t.inpAddressRed=i.first)}},decls:72,vars:20,consts:[["modalAddress",""],["modalAddress2",""],["modalPackage",""],["modalWallet",""],["modalVehicle",""],["inpAddress",""],["slot","start"],["icon","../../../assets/icon/ion-icon/arrow-left.svg","text","",3,"defaultHref"],[1,"card-page","min-h-100"],["lines","none"],[1,"form-group"],[1,"choice-item"],["detail","false","button","true",3,"click"],["slot","start","color","medium","name","location"],[1,"mr-0"],[1,"fs-14"],[1,"vehicle-item"],["slot","end","color","medium","name","chevron-down-outline"],[1,"wallet-item"],[1,"ion-item-input"],["placeholder","Nh\u1eadp ghi ch\xfa c\u1ee7a b\u1ea1n cho d\u1ecbch v\u1ee5 s\u1ea1c",3,"ionChange","autoGrow","value"],[3,"didPresent"],[1,"ion-padding"],["color","primary","shape","round","expand","block",3,"click","disabled"],["slot","start","name","car-outline",1,"fs-24","mr-3"],["slot","start","name","wallet-outline",1,"fs-24","mr-3"],[1,"text-center"],[1,"ion-padding-horizontal"],[1,"h-100","d-flex","flex-column"],["slot","start","color","medium","name","location",1,"mr-3"],["clear-input","true","placeholder","Nh\u1eadp \u0111\u1ecba ch\u1ec9 c\u1ee7a b\u1ea1n ho\u1eb7c ch\u1ecdn t\u1eeb b\u1ea3n \u0111\u1ed3",3,"value"],[1,"flex-grow-1","position-relative"],["id","map"],[1,"position-absolute","bottom-0","right-0"],["id","btn-geolocation","color","light",3,"click"],["color","medium","name","circles"],[1,"d-flex"],["color","medium","fill","outline","expand","block",1,"flex-grow-1","m-1",3,"click"],["color","primary","fill","outline","expand","block",1,"flex-grow-1","m-1",3,"click"],["src","../../../assets/icon/map/geolocation.svg"],[1,"package-list"],[3,"ionChange","value"],[1,"package-item","mb-3"],["lines","none","detail","false","button","","mode","ios"],["mode","md","justify","space-between",3,"value"],[1,"d-flex","align-items-center"],["src","../../../assets/icon/ion-img/charge-package.svg"],[1,"pl-3"],[1,"mt-1"],[1,"text-primary"],[1,"wallet-item","mb-3"],[1,"vehicle-item","mb-3"]],template:function(n,t){if(1&n){const i=e.RV6();e.j41(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",6),e.nrm(3,"ion-back-button",7),e.k0s(),e.j41(4,"ion-title"),e.EFF(5,"Y\xeau c\u1ea7u c\u1ee9u h\u1ed9 k\xe9o xe"),e.k0s()()(),e.j41(6,"ion-content")(7,"div",8)(8,"ion-list",9)(9,"div",10)(10,"label"),e.EFF(11),e.nI1(12,"translate"),e.k0s(),e.j41(13,"div",11)(14,"ion-item",12),e.bIt("click",function(){e.eBV(i);const r=e.sdS(54);return e.Njj(null==r?null:r.present())}),e.nrm(15,"ion-icon",13),e.j41(16,"ion-label",14)(17,"div",15),e.EFF(18),e.k0s()()()()(),e.j41(19,"div",10)(20,"label"),e.EFF(21),e.nI1(22,"translate"),e.k0s(),e.j41(23,"div",11)(24,"ion-item",12),e.bIt("click",function(){e.eBV(i);const r=e.sdS(57);return e.Njj(null==r?null:r.present())}),e.nrm(25,"ion-icon",13),e.j41(26,"ion-label",14)(27,"div",15),e.EFF(28),e.k0s()()()()(),e.j41(29,"div",10)(30,"label"),e.EFF(31),e.nI1(32,"translate"),e.k0s(),e.j41(33,"div",16)(34,"ion-item",12),e.bIt("click",function(){e.eBV(i);const r=e.sdS(66);return e.Njj(null==r?null:r.present())}),e.DNE(35,X,3,0)(36,O,3,0),e.nrm(37,"ion-icon",17),e.k0s()()(),e.j41(38,"div",10)(39,"label"),e.EFF(40),e.nI1(41,"translate"),e.k0s(),e.j41(42,"div",18)(43,"ion-item",12),e.bIt("click",function(){e.eBV(i);const r=e.sdS(63);return e.Njj(null==r?null:r.present())}),e.DNE(44,U,3,1)(45,Y,3,1),e.nrm(46,"ion-icon",17),e.k0s()()(),e.j41(47,"div",10)(48,"label"),e.EFF(49,"Ghi ch\xfa"),e.k0s(),e.j41(50,"div",19)(51,"ion-item")(52,"ion-textarea",20),e.bIt("ionChange",function(r){return e.eBV(i),e.Njj(t.changeNote(r))}),e.k0s()()()()()(),e.j41(53,"ion-modal",21,0),e.bIt("didPresent",function(r){return e.eBV(i),e.Njj(t.onModalAddressDidPresent(r))}),e.DNE(55,L,31,11,"ng-template"),e.k0s(),e.j41(56,"ion-modal",21,1),e.bIt("didPresent",function(r){return e.eBV(i),e.Njj(t.onModalAddress2DidPresent(r))}),e.DNE(58,K,31,11,"ng-template"),e.k0s(),e.j41(59,"ion-modal",21,2),e.bIt("didPresent",function(r){return e.eBV(i),e.Njj(t.onModalPackageDidPresent(r))}),e.DNE(61,te,19,7,"ng-template"),e.k0s(),e.j41(62,"ion-modal",21,3),e.bIt("didPresent",function(r){return e.eBV(i),e.Njj(t.onModalWalletDidPresent(r))}),e.DNE(64,oe,18,7,"ng-template"),e.k0s(),e.j41(65,"ion-modal",21,4),e.bIt("didPresent",function(r){return e.eBV(i),e.Njj(t.onModalVehicleDidPresent(r))}),e.DNE(67,le,28,9,"ng-template"),e.k0s()(),e.j41(68,"ion-footer",22)(69,"ion-button",23),e.bIt("click",function(r){return e.eBV(i),e.Njj(t.submitCreateService(r))}),e.j41(70,"ion-label"),e.EFF(71,"G\u1eedi y\xeau c\u1ea7u d\u1ecbch v\u1ee5"),e.k0s()()()}2&n&&(e.R7$(3),e.Y8G("defaultHref",t.APP_ROUTE.SERVICE),e.R7$(8),e.JRh(e.bMT(12,12,"Address")),e.R7$(7),e.JRh(t.dataForm.address),e.R7$(3),e.JRh(e.bMT(22,14,"AddressTo")),e.R7$(7),e.JRh(t.dataForm.address2),e.R7$(3),e.JRh(e.bMT(32,16,"Vehicle")),e.R7$(4),e.vxM(35,t.dataForm.IsVehicleVipCharging?35:36),e.R7$(5),e.JRh(e.bMT(41,18,"Wallet")),e.R7$(4),e.vxM(44,null!=t.wallet&&t.wallet.VehicleVipId?44:null!=t.wallet&&t.wallet.WalletId?45:-1),e.R7$(8),e.Y8G("autoGrow",!0)("value",t.dataForm.note),e.R7$(17),e.Y8G("disabled",t.submitDisabled))},dependencies:[c.Jm,c.QW,c.W9,c.M0,c.eU,c.iq,c.KW,c.$w,c.uz,c.he,c.nf,c.KO,c.f0,c.w2,c.nc,c.BC,c.ai,c.Sb,c.Je,c.Gw,c.el,B.D9],styles:[".card-page[_ngcontent-%COMP%]{padding:1rem;border-top-left-radius:1.5rem;border-top-right-radius:1.5rem;background:var(--ion-color-light)}.choice-item[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{--border-width: 1px;--border-color: #eee;--border-radius: .75rem}.choice-item[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-icon[slot=start][_ngcontent-%COMP%]{margin-right:1rem}.choice-item[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-icon[slot=end][_ngcontent-%COMP%]{margin-left:1rem}.package-item[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{--padding-top: .5rem;--padding-bottom: .5rem;--border-width: 1px;--border-color: #eee;--border-radius: .75rem}.package-item[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-img[_ngcontent-%COMP%]{width:4rem}.wallet-item[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{--padding-top: .5rem;--padding-bottom: .5rem;--border-width: 1px;--border-color: #eee;--border-radius: .75rem}.wallet-item[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-img[_ngcontent-%COMP%]{width:4rem}.vehicle-item[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{--padding-top: .5rem;--padding-bottom: .5rem;--border-width: 1px;--border-color: #eee;--border-radius: .75rem}.vehicle-item[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-img[_ngcontent-%COMP%]{width:4rem}ion-datetime-button[_ngcontent-%COMP%]::part(native){background:transparent}ion-datetime-button[_ngcontent-%COMP%]::part(native):hover{background:var(--ion-color-step-300, var(--ion-background-color-step-300, #edeef0))}#map[_ngcontent-%COMP%]{width:100%;height:100%}#btn-geolocation[_ngcontent-%COMP%]{width:3rem;height:3rem;min-width:3rem;min-height:3rem;--padding-top: 0;--padding-start: 0;--padding-end: 0;--padding-bottom: 0;--border-radius: 50%;margin:0 1.5rem 1.5rem 0}#btn-geolocation[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:3rem;color:var(--ion-color-tertiary)}"]}),d})()}];let se=(()=>{var a;class d{}return(a=d).\u0275fac=function(n){return new(n||a)},a.\u0275mod=e.$C({type:a}),a.\u0275inj=e.G2t({imports:[k.iI.forChild(re),k.iI]}),d})();var de=u(3890);let ce=(()=>{var a;class d{}return(a=d).\u0275fac=function(n){return new(n||a)},a.\u0275mod=e.$C({type:a}),a.\u0275inj=e.G2t({imports:[D.MD,A.YN,c.bv,se,de.x]}),d})()}}]);
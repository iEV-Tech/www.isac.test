"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[1222],{1222:(q,F,d)=>{d.r(F),d.d(F,{ServiceChargingPageModule:()=>Z});var M=d(177),j=d(9417),o=d(9465),v=d(7625),A=d(467),f=d(3801),S=d(574),I=d(4470),x=(d(5454),d(6539)),b=d(2313),P=d(8517),y=d(8650),G=d(8833),e=d(4438),T=d(4842);const D=["inpAddress"],E=()=>[0,1],N=()=>({weekday:"long",year:"numeric",month:"2-digit",day:"2-digit"}),O=()=>({hour:"2-digit",minute:"2-digit"}),X=(n,l)=>({date:n,time:l});function B(n,l){if(1&n&&(e.j41(0,"b")(1,"b",27),e.EFF(2),e.k0s()(),e.j41(3,"span"),e.EFF(4),e.k0s()),2&n){let i;const t=e.XpG(2);e.R7$(2),e.Lme("",t.chargingPackage.PowerValue,"",t.chargingPackage.Unit,""),e.R7$(2),e.SpI(" / ",t.APP_FUNC_FormatMoney(null!==(i=t.chargingPackage.AftertaxPrice)&&void 0!==i?i:0),"\u0111")}}function U(n,l){if(1&n&&(e.j41(0,"b")(1,"b",27),e.EFF(2),e.k0s()(),e.j41(3,"span"),e.EFF(4),e.k0s()),2&n){let i;const t=e.XpG(2);e.R7$(2),e.SpI("",t.APP_FUNC_FormatMoney(null!==(i=t.chargingPackage.AftertaxPrice)&&void 0!==i?i:0),"\u0111"),e.R7$(2),e.Lme(" / ",t.chargingPackage.PowerValue,"",t.chargingPackage.Unit,"")}}function V(n,l){if(1&n&&(e.j41(0,"div")(1,"small"),e.EFF(2),e.k0s()(),e.j41(3,"div",26),e.DNE(4,B,5,3)(5,U,5,3),e.k0s()),2&n){const i=e.XpG();e.R7$(2),e.JRh(i.chargingPackage.ChargePackName),e.R7$(2),e.vxM(4,i.chargingPackage.IsPackByPower?4:5)}}function w(n,l){if(1&n){const i=e.RV6();e.j41(0,"ion-header")(1,"ion-toolbar")(2,"ion-title",28),e.EFF(3,"Ch\u1ecdn \u0111\u1ecba ch\u1ec9"),e.k0s()()(),e.j41(4,"ion-content",29)(5,"div",30)(6,"div",7)(7,"label"),e.EFF(8),e.nI1(9,"translate"),e.k0s(),e.j41(10,"div",19)(11,"ion-item",6),e.nrm(12,"ion-icon",31)(13,"ion-input",32,2),e.k0s()()(),e.j41(15,"div",33),e.nrm(16,"div",34),e.k0s()()(),e.j41(17,"ion-footer",24)(18,"ion-button",35),e.bIt("click",function(){e.eBV(i),e.XpG();const a=e.sdS(44);return e.Njj(null==a?null:a.dismiss())}),e.j41(19,"ion-label"),e.EFF(20),e.nI1(21,"translate"),e.k0s()()()}if(2&n){const i=e.XpG();e.R7$(8),e.JRh(e.bMT(9,3,"Address")),e.R7$(5),e.Y8G("value",i.dataForm.address),e.R7$(7),e.JRh(e.bMT(21,5,"Complete"))}}function J(n,l){if(1&n){const i=e.RV6();e.j41(0,"ion-datetime",36),e.bIt("ionChange",function(a){e.eBV(i);const r=e.XpG();return e.Njj(r.changeDateTime(a))}),e.k0s()}if(2&n){const i=e.XpG();e.Y8G("value",i.dataForm.datetime)("formatOptions",e.l_i(4,X,e.lJ4(2,N),e.lJ4(3,O)))}}function Y(n,l){if(1&n&&(e.j41(0,"div")(1,"small"),e.EFF(2),e.k0s()(),e.j41(3,"div",26)(4,"b")(5,"b",27),e.EFF(6),e.k0s()(),e.j41(7,"span"),e.EFF(8),e.k0s()()),2&n){let i;const t=e.XpG().$implicit,a=e.XpG(2);e.R7$(2),e.JRh(t.ChargePackName),e.R7$(4),e.Lme("",t.PowerValue,"",t.Unit,""),e.R7$(2),e.SpI(" / ",a.APP_FUNC_FormatMoney(null!==(i=t.AftertaxPrice)&&void 0!==i?i:0),"\u0111")}}function L(n,l){if(1&n&&(e.j41(0,"div")(1,"small"),e.EFF(2),e.k0s()(),e.j41(3,"div",26)(4,"b")(5,"b",27),e.EFF(6),e.k0s()(),e.j41(7,"span"),e.EFF(8),e.k0s()()),2&n){let i;const t=e.XpG().$implicit,a=e.XpG(2);e.R7$(2),e.JRh(t.ChargePackName),e.R7$(4),e.SpI("",a.APP_FUNC_FormatMoney(null!==(i=t.AftertaxPrice)&&void 0!==i?i:0),"\u0111"),e.R7$(2),e.Lme(" / ",t.PowerValue,"",t.Unit,"")}}function z(n,l){if(1&n&&(e.j41(0,"div",39)(1,"ion-item",40)(2,"ion-radio",41)(3,"div",42)(4,"div"),e.nrm(5,"ion-img",43),e.k0s(),e.j41(6,"div",44),e.DNE(7,Y,9,4)(8,L,9,4),e.k0s()()()()()),2&n){const i=l.$implicit;e.R7$(2),e.Y8G("value",i.ChargePackageId),e.R7$(5),e.vxM(7,i.IsPackByPower?7:8)}}function H(n,l){if(1&n){const i=e.RV6();e.j41(0,"ion-header")(1,"ion-toolbar")(2,"ion-title",28),e.EFF(3,"Ch\u1ecdn g\xf3i s\u1ea1c"),e.k0s()()(),e.j41(4,"ion-content",29)(5,"div",37)(6,"ion-radio-group",38),e.bIt("ionChange",function(a){e.eBV(i);const r=e.XpG();return e.Njj(r.changeChargePackage(a))}),e.Z7z(7,z,9,2,"div",39,e.fX1),e.k0s()()(),e.j41(9,"ion-footer",24)(10,"ion-button",35),e.bIt("click",function(){e.eBV(i),e.XpG();const a=e.sdS(49);return e.Njj(null==a?null:a.dismiss())}),e.j41(11,"ion-label"),e.EFF(12),e.nI1(13,"translate"),e.k0s()()()}if(2&n){const i=e.XpG();e.R7$(6),e.Y8G("value",i.dataForm.ChargePackageId),e.R7$(),e.Dyx(i.chargingPackages),e.R7$(5),e.JRh(e.bMT(13,2,"Complete"))}}const K=[{path:"",component:(()=>{var n;class l{constructor(t,a,r,s,c){var g;this.router=t,this.animationController=a,this.modalController=r,this.toastController=s,this.loadingController=c,this.APP_ROUTE=G._,this.APP_FUNC_FormatMoney=P.xi,this.APP_FUNC_FormatDate=P.Rv,this.dataForm={datetime:(g=new Date,g.setMinutes(15*Math.ceil(g.getMinutes()/15)),(0,P.Rv)(g,"YYYY-MM-DDTHH:mm:ss"))},this.chargingPackages=[]}ngOnInit(){(0,x.kU)(),(0,f.fA)({callback:t=>{null!=t&&t.currentAddress&&(this.dataForm.address=null==t?void 0:t.currentAddress)}}),(0,f.Xz)().then(t=>{this.dataForm.pos=t})}changeAdress(t){this.dataForm.address=t.detail.value}changeDateTime(t){this.dataForm.datetime=t.detail.value}changeChargePackage(t){this.dataForm.ChargePackageId=t.detail.value,this.chargingPackage=this.chargingPackages.find(a=>a.ChargePackageId==this.dataForm.ChargePackageId)}changeNote(t){this.dataForm.note=t.detail.value}get submitDisabled(){var t,a;return!(this.dataForm.ChargePackageId&&this.dataForm.address&&null!==(t=this.dataForm.pos)&&void 0!==t&&t.lat&&null!==(a=this.dataForm.pos)&&void 0!==a&&a.lng)}submitCreateService(t){console.log(this.dataForm)}onModalAddressDidPresent(t){var a=this;const r=function(){var c=(0,A.A)(function*(){var g;let m,p,h,C;m=window.google.maps,p=new m.Map(document.getElementById("map"),{zoom:15,center:a.dataForm.pos,disableDefaultUI:!0}),h=new m.Marker({map:p,draggable:!0,animation:m.Animation.DROP,position:a.dataForm.pos}),m.event.addListener(h,"dragend",u=>{a.requestAddress({lat:u.latLng.lat(),lng:u.latLng.lng()})}),C=new m.places.Autocomplete(yield null===(g=a.inpAddressRed)||void 0===g?void 0:g.getInputElement()),C.addListener("place_changed",()=>{var u,k=C.getPlace(),_={lat:k.geometry.location.lat(),lng:k.geometry.location.lng()};a.dataForm.address=k.formatted_address,a.dataForm.pos=_,p.moveCamera({zoom:15,center:_}),null===(u=h)||void 0===u||u.setMap(null),h=new m.Marker({map:p,draggable:!0,animation:m.Animation.DROP,position:_})})});return function(){return c.apply(this,arguments)}}();window.initMap=r;let s=document.createElement("script");s.async=!0,s.src="https://maps.google.com/maps/api/js?key=AIzaSyAfx5a8yx5MqeGoTS3ierzoe35TXoX0ZOY&libraries=places&callback=initMap",document.head.append(s)}onModalPackageDidPresent(t){(0,S.LE)({loadingController:this.loadingController,params:{ServiceId:b.u9.SAC_VIP_ID,PageNumber:1,PageSize:10},callback:a=>{var r;null!=a&&a.Succeeded?this.chargingPackages=null!==(r=a.Data)&&void 0!==r?r:[]:(0,y.cX)(this.toastController,{},a).then(s=>s.present())}})}requestAddress(t){(0,I.S)({params:{lat:t.lat,lng:t.lng},callback:a=>{var r,s,c;"OK"==(null==a?void 0:a.status)&&(this.dataForm.pos=t,this.dataForm.address=null!==(r=(null!==(s=a.results[0])&&void 0!==s?s:{}).formatted_address)&&void 0!==r?r:null===(c=a.plus_code)||void 0===c?void 0:c.compound_code)}})}}return(n=l).\u0275fac=function(t){return new(t||n)(e.rXU(v.Ix),e.rXU(o.Hx),e.rXU(o.W3),e.rXU(o.K_),e.rXU(o.Xi))},n.\u0275cmp=e.VBU({type:n,selectors:[["app-service-charging"]],viewQuery:function(t,a){if(1&t&&e.GBs(D,5),2&t){let r;e.mGM(r=e.lsd())&&(a.inpAddressRed=r.first)}},decls:56,vars:25,consts:[["modalAddress",""],["modalPackage",""],["inpAddress",""],["slot","start"],["icon","../../../assets/icon/ion-icon/arrow-left.svg","text","",3,"defaultHref"],[1,"card-page","min-h-100"],["lines","none"],[1,"form-group"],[1,"choice-item"],["detail","false","button","true","id","present-modal-address"],["slot","start","color","medium","name","location"],[1,"mr-0"],[1,"fs-14"],["slot","start","color","medium","name","calendar",1,"mr-0"],["datetime","datetime"],[1,"package-item"],["detail","false","button","true","id","present-modal-package"],["slot","start","src","../../../assets/icon/ion-img/charge-package.svg"],["slot","end","color","medium","name","chevron-down-outline"],[1,"ion-item-input"],["placeholder","Nh\u1eadp ghi ch\xfa c\u1ee7a b\u1ea1n cho d\u1ecbch v\u1ee5 s\u1ea1c",3,"ionChange","autoGrow","value"],["trigger","present-modal-address",3,"didPresent","initialBreakpoint","breakpoints"],[3,"keepContentsMounted"],["trigger","present-modal-package",3,"didPresent","initialBreakpoint","breakpoints"],[1,"ion-padding"],["color","primary","shape","round","expand","block",3,"click","disabled"],[1,"mt-1"],[1,"text-primary"],[1,"text-center"],[1,"ion-padding-horizontal"],[1,"h-100","d-flex","flex-column"],["slot","start","color","medium","name","location",1,"mr-3"],["clear-input","true","placeholder","Nh\u1eadp \u0111\u1ecba ch\u1ec9 c\u1ee7a b\u1ea1n ho\u1eb7c ch\u1ecdn t\u1eeb b\u1ea3n \u0111\u1ed3",3,"value"],[1,"flex-grow-1"],["id","map"],["color","primary","fill","outline","expand","block",3,"click"],["id","datetime","presentation","date-time",3,"ionChange","value","formatOptions"],[1,"package-list"],[3,"ionChange","value"],[1,"package-item","mb-3"],["lines","none","detail","false","button","","mode","ios"],["mode","md","justify","space-between",3,"value"],[1,"d-flex","align-items-center"],["src","../../../assets/icon/ion-img/charge-package.svg"],[1,"pl-3"]],template:function(t,a){if(1&t){const r=e.RV6();e.j41(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",3),e.nrm(3,"ion-back-button",4),e.k0s(),e.j41(4,"ion-title"),e.EFF(5,"Y\xeau c\u1ea7u s\u1ea1c t\u1ea1i nh\xe0"),e.k0s()()(),e.j41(6,"ion-content")(7,"div",5)(8,"ion-list",6)(9,"div",7)(10,"label"),e.EFF(11),e.nI1(12,"translate"),e.k0s(),e.j41(13,"div",8)(14,"ion-item",9),e.nrm(15,"ion-icon",10),e.j41(16,"ion-label",11)(17,"div",12),e.EFF(18),e.k0s()()()()(),e.j41(19,"div",7)(20,"label"),e.EFF(21),e.nI1(22,"translate"),e.k0s(),e.j41(23,"div",8)(24,"ion-item"),e.nrm(25,"ion-icon",13)(26,"ion-datetime-button",14),e.k0s()()(),e.j41(27,"div",7)(28,"label"),e.EFF(29),e.nI1(30,"translate"),e.k0s(),e.j41(31,"div",15)(32,"ion-item",16),e.nrm(33,"ion-img",17),e.j41(34,"ion-label"),e.DNE(35,V,6,2),e.k0s(),e.nrm(36,"ion-icon",18),e.k0s()()(),e.j41(37,"div",7)(38,"label"),e.EFF(39,"Ghi ch\xfa"),e.k0s(),e.j41(40,"div",19)(41,"ion-item")(42,"ion-textarea",20),e.bIt("ionChange",function(c){return e.eBV(r),e.Njj(a.changeNote(c))}),e.k0s()()()()()(),e.j41(43,"ion-modal",21,0),e.bIt("didPresent",function(c){return e.eBV(r),e.Njj(a.onModalAddressDidPresent(c))}),e.DNE(45,w,22,7,"ng-template"),e.k0s(),e.j41(46,"ion-modal",22),e.DNE(47,J,1,7,"ng-template"),e.k0s(),e.j41(48,"ion-modal",23,1),e.bIt("didPresent",function(c){return e.eBV(r),e.Njj(a.onModalPackageDidPresent(c))}),e.DNE(50,H,14,4,"ng-template"),e.k0s()(),e.j41(51,"ion-footer",24)(52,"ion-button",25),e.bIt("click",function(c){return e.eBV(r),e.Njj(a.submitCreateService(c))}),e.j41(53,"ion-label"),e.EFF(54),e.nI1(55,"translate"),e.k0s()()()}2&t&&(e.R7$(3),e.Y8G("defaultHref",a.APP_ROUTE.TABS_SERVICE),e.R7$(8),e.JRh(e.bMT(12,15,"Address")),e.R7$(7),e.JRh(a.dataForm.address),e.R7$(3),e.JRh(e.bMT(22,17,"Time")),e.R7$(8),e.JRh(e.bMT(30,19,"ChargingPackage")),e.R7$(6),e.vxM(35,a.chargingPackage?35:-1),e.R7$(7),e.Y8G("autoGrow",!0)("value",a.dataForm.note),e.R7$(),e.Y8G("initialBreakpoint",1)("breakpoints",e.lJ4(23,E)),e.R7$(3),e.Y8G("keepContentsMounted",!0),e.R7$(2),e.Y8G("initialBreakpoint",1)("breakpoints",e.lJ4(24,E)),e.R7$(4),e.Y8G("disabled",a.submitDisabled),e.R7$(2),e.JRh(e.bMT(55,21,"Pay")))},dependencies:[o.Jm,o.QW,o.W9,o.A9,o.K4,o.M0,o.eU,o.iq,o.KW,o.$w,o.uz,o.he,o.nf,o.KO,o.f0,o.nc,o.BC,o.ai,o.Sb,o.Je,o.Gw,o.el,T.D9],styles:[".card-page[_ngcontent-%COMP%]{padding:1rem;border-top-left-radius:1.5rem;border-top-right-radius:1.5rem;background:var(--ion-color-light)}.choice-item[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{--border-width: 1px;--border-color: #eee;--border-radius: .75rem}.choice-item[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-icon[slot=start][_ngcontent-%COMP%]{margin-right:1rem}.choice-item[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-icon[slot=end][_ngcontent-%COMP%]{margin-left:1rem}.package-item[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{--padding-top: .5rem;--padding-bottom: .5rem;--border-width: 1px;--border-color: #eee;--border-radius: .75rem}.package-item[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-img[_ngcontent-%COMP%]{width:4rem}ion-datetime-button[_ngcontent-%COMP%]::part(native){background:transparent}ion-datetime-button[_ngcontent-%COMP%]::part(native):hover{background:var(--ion-color-step-300, var(--ion-background-color-step-300, #edeef0))}#map[_ngcontent-%COMP%]{width:100%;height:100%}"]}),l})()}];let W=(()=>{var n;class l{}return(n=l).\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.$C({type:n}),n.\u0275inj=e.G2t({imports:[v.iI.forChild(K),v.iI]}),l})();var Q=d(3890);let Z=(()=>{var n;class l{}return(n=l).\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.$C({type:n}),n.\u0275inj=e.G2t({imports:[M.MD,j.YN,o.bv,W,Q.x]}),l})()}}]);